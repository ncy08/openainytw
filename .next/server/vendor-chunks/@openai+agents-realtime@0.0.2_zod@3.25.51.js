"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@openai+agents-realtime@0.0.2_zod@3.25.51";
exports.ids = ["vendor-chunks/@openai+agents-realtime@0.0.2_zod@3.25.51"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/guardrail.mjs":
/*!******************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/guardrail.mjs ***!
  \******************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defineRealtimeOutputGuardrail: () => (/* binding */ defineRealtimeOutputGuardrail),\n/* harmony export */   getRealtimeGuardrailFeedbackMessage: () => (/* binding */ getRealtimeGuardrailFeedbackMessage),\n/* harmony export */   getRealtimeGuardrailSettings: () => (/* binding */ getRealtimeGuardrailSettings)\n/* harmony export */ });\n/* harmony import */ var _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openai/agents-core */ \"(ssr)/./node_modules/.pnpm/@openai+agents-core@0.0.2_ws@8.18.2_zod@3.25.51/node_modules/@openai/agents-core/dist/index.mjs\");\n\nfunction getRealtimeGuardrailSettings(settings) {\n    return {\n        debounceTextLength: settings.debounceTextLength ?? 100,\n    };\n}\nfunction defineRealtimeOutputGuardrail({ policyHint: policyHintInput, ...options }) {\n    const baseGuardrail = (0,_openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.defineOutputGuardrail)(options);\n    const policyHint = policyHintInput ?? baseGuardrail.name;\n    return {\n        ...baseGuardrail,\n        policyHint,\n        run: async (args) => {\n            const result = await baseGuardrail.run(args);\n            return {\n                ...result,\n                guardrail: { ...result.guardrail, policyHint },\n            };\n        },\n    };\n}\n/**\n * Generates a message that informs the model about why the guardrail was triggered and to\n * correct the behavior.\n */\nfunction getRealtimeGuardrailFeedbackMessage(result) {\n    return `\n⚠️ Your last answer was blocked. \nFailed Guardrail Reason: ${result.guardrail.policyHint}. \nFailure Details: ${JSON.stringify(result.output.outputInfo ?? {})}. \nPlease respond again following policy. Apologize for not being able to answer the question (while avoiding the specific reason) and divert discussion back to an approved topic immediately and not invite more discussion.\n`.trim();\n}\n//# sourceMappingURL=guardrail.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW5haSthZ2VudHMtcmVhbHRpbWVAMC4wLjJfem9kQDMuMjUuNTEvbm9kZV9tb2R1bGVzL0BvcGVuYWkvYWdlbnRzLXJlYWx0aW1lL2Rpc3QvZ3VhcmRyYWlsLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTZEO0FBQ3REO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDTyx5Q0FBeUMseUNBQXlDO0FBQ3pGLDBCQUEwQiwwRUFBcUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixpQ0FBaUM7QUFDOUQ7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsMkJBQTJCLDRCQUE0QjtBQUN2RCxtQkFBbUIsNkNBQTZDLEVBQUU7QUFDbEU7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuYWlueXR3Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVuYWkrYWdlbnRzLXJlYWx0aW1lQDAuMC4yX3pvZEAzLjI1LjUxL25vZGVfbW9kdWxlcy9Ab3BlbmFpL2FnZW50cy1yZWFsdGltZS9kaXN0L2d1YXJkcmFpbC5tanM/YmE2YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWZpbmVPdXRwdXRHdWFyZHJhaWwsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVhbHRpbWVHdWFyZHJhaWxTZXR0aW5ncyhzZXR0aW5ncykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGRlYm91bmNlVGV4dExlbmd0aDogc2V0dGluZ3MuZGVib3VuY2VUZXh0TGVuZ3RoID8/IDEwMCxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZmluZVJlYWx0aW1lT3V0cHV0R3VhcmRyYWlsKHsgcG9saWN5SGludDogcG9saWN5SGludElucHV0LCAuLi5vcHRpb25zIH0pIHtcbiAgICBjb25zdCBiYXNlR3VhcmRyYWlsID0gZGVmaW5lT3V0cHV0R3VhcmRyYWlsKG9wdGlvbnMpO1xuICAgIGNvbnN0IHBvbGljeUhpbnQgPSBwb2xpY3lIaW50SW5wdXQgPz8gYmFzZUd1YXJkcmFpbC5uYW1lO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmJhc2VHdWFyZHJhaWwsXG4gICAgICAgIHBvbGljeUhpbnQsXG4gICAgICAgIHJ1bjogYXN5bmMgKGFyZ3MpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGJhc2VHdWFyZHJhaWwucnVuKGFyZ3MpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5yZXN1bHQsXG4gICAgICAgICAgICAgICAgZ3VhcmRyYWlsOiB7IC4uLnJlc3VsdC5ndWFyZHJhaWwsIHBvbGljeUhpbnQgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgbWVzc2FnZSB0aGF0IGluZm9ybXMgdGhlIG1vZGVsIGFib3V0IHdoeSB0aGUgZ3VhcmRyYWlsIHdhcyB0cmlnZ2VyZWQgYW5kIHRvXG4gKiBjb3JyZWN0IHRoZSBiZWhhdmlvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlYWx0aW1lR3VhcmRyYWlsRmVlZGJhY2tNZXNzYWdlKHJlc3VsdCkge1xuICAgIHJldHVybiBgXG7imqDvuI8gWW91ciBsYXN0IGFuc3dlciB3YXMgYmxvY2tlZC4gXG5GYWlsZWQgR3VhcmRyYWlsIFJlYXNvbjogJHtyZXN1bHQuZ3VhcmRyYWlsLnBvbGljeUhpbnR9LiBcbkZhaWx1cmUgRGV0YWlsczogJHtKU09OLnN0cmluZ2lmeShyZXN1bHQub3V0cHV0Lm91dHB1dEluZm8gPz8ge30pfS4gXG5QbGVhc2UgcmVzcG9uZCBhZ2FpbiBmb2xsb3dpbmcgcG9saWN5LiBBcG9sb2dpemUgZm9yIG5vdCBiZWluZyBhYmxlIHRvIGFuc3dlciB0aGUgcXVlc3Rpb24gKHdoaWxlIGF2b2lkaW5nIHRoZSBzcGVjaWZpYyByZWFzb24pIGFuZCBkaXZlcnQgZGlzY3Vzc2lvbiBiYWNrIHRvIGFuIGFwcHJvdmVkIHRvcGljIGltbWVkaWF0ZWx5IGFuZCBub3QgaW52aXRlIG1vcmUgZGlzY3Vzc2lvbi5cbmAudHJpbSgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z3VhcmRyYWlsLm1qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/guardrail.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/index.mjs":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/index.mjs ***!
  \**************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_OPENAI_REALTIME_MODEL: () => (/* reexport safe */ _openaiRealtimeBase_mjs__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_OPENAI_REALTIME_MODEL),\n/* harmony export */   DEFAULT_OPENAI_REALTIME_SESSION_CONFIG: () => (/* reexport safe */ _openaiRealtimeBase_mjs__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_OPENAI_REALTIME_SESSION_CONFIG),\n/* harmony export */   ModelBehaviorError: () => (/* reexport safe */ _openai_agents_core__WEBPACK_IMPORTED_MODULE_6__.ModelBehaviorError),\n/* harmony export */   OpenAIRealtimeBase: () => (/* reexport safe */ _openaiRealtimeBase_mjs__WEBPACK_IMPORTED_MODULE_5__.OpenAIRealtimeBase),\n/* harmony export */   OpenAIRealtimeWebRTC: () => (/* reexport safe */ _openaiRealtimeWebRtc_mjs__WEBPACK_IMPORTED_MODULE_3__.OpenAIRealtimeWebRTC),\n/* harmony export */   OpenAIRealtimeWebSocket: () => (/* reexport safe */ _openaiRealtimeWebsocket_mjs__WEBPACK_IMPORTED_MODULE_4__.OpenAIRealtimeWebSocket),\n/* harmony export */   OutputGuardrailTripwireTriggered: () => (/* reexport safe */ _openai_agents_core__WEBPACK_IMPORTED_MODULE_6__.OutputGuardrailTripwireTriggered),\n/* harmony export */   RealtimeAgent: () => (/* reexport safe */ _realtimeAgent_mjs__WEBPACK_IMPORTED_MODULE_1__.RealtimeAgent),\n/* harmony export */   RealtimeSession: () => (/* reexport safe */ _realtimeSession_mjs__WEBPACK_IMPORTED_MODULE_2__.RealtimeSession),\n/* harmony export */   UserError: () => (/* reexport safe */ _openai_agents_core__WEBPACK_IMPORTED_MODULE_6__.UserError),\n/* harmony export */   tool: () => (/* reexport safe */ _openai_agents_core__WEBPACK_IMPORTED_MODULE_6__.tool),\n/* harmony export */   utils: () => (/* binding */ utils)\n/* harmony export */ });\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.mjs */ \"(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/utils.mjs\");\n/* harmony import */ var _realtimeAgent_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./realtimeAgent.mjs */ \"(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/realtimeAgent.mjs\");\n/* harmony import */ var _realtimeSession_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./realtimeSession.mjs */ \"(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/realtimeSession.mjs\");\n/* harmony import */ var _openaiRealtimeWebRtc_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./openaiRealtimeWebRtc.mjs */ \"(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/openaiRealtimeWebRtc.mjs\");\n/* harmony import */ var _openaiRealtimeWebsocket_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./openaiRealtimeWebsocket.mjs */ \"(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/openaiRealtimeWebsocket.mjs\");\n/* harmony import */ var _openaiRealtimeBase_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./openaiRealtimeBase.mjs */ \"(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/openaiRealtimeBase.mjs\");\n/* harmony import */ var _openai_agents_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @openai/agents-core */ \"(ssr)/./node_modules/.pnpm/@openai+agents-core@0.0.2_ws@8.18.2_zod@3.25.51/node_modules/@openai/agents-core/dist/index.mjs\");\n\n\n\n\n\n\nconst utils = {\n    base64ToArrayBuffer: _utils_mjs__WEBPACK_IMPORTED_MODULE_0__.base64ToArrayBuffer,\n    arrayBufferToBase64: _utils_mjs__WEBPACK_IMPORTED_MODULE_0__.arrayBufferToBase64,\n    getLastTextFromAudioOutputMessage: _utils_mjs__WEBPACK_IMPORTED_MODULE_0__.getLastTextFromAudioOutputMessage,\n};\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW5haSthZ2VudHMtcmVhbHRpbWVAMC4wLjJfem9kQDMuMjUuNTEvbm9kZV9tb2R1bGVzL0BvcGVuYWkvYWdlbnRzLXJlYWx0aW1lL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBMEM7QUFDVTtBQUNLO0FBQ1U7QUFDTTtBQUM2RDtBQUMvSDtBQUNQLHlCQUF5QiwyREFBOEI7QUFDdkQseUJBQXlCLDJEQUE4QjtBQUN2RCx1Q0FBdUMseUVBQTRDO0FBQ25GO0FBQzZHO0FBQzdHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3BlbmFpbnl0dy8uL25vZGVfbW9kdWxlcy8ucG5wbS9Ab3BlbmFpK2FnZW50cy1yZWFsdGltZUAwLjAuMl96b2RAMy4yNS41MS9ub2RlX21vZHVsZXMvQG9wZW5haS9hZ2VudHMtcmVhbHRpbWUvZGlzdC9pbmRleC5tanM/NDhlMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyB1dGlsSW1wb3J0IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuZXhwb3J0IHsgUmVhbHRpbWVBZ2VudCB9IGZyb20gXCIuL3JlYWx0aW1lQWdlbnQubWpzXCI7XG5leHBvcnQgeyBSZWFsdGltZVNlc3Npb24sIH0gZnJvbSBcIi4vcmVhbHRpbWVTZXNzaW9uLm1qc1wiO1xuZXhwb3J0IHsgT3BlbkFJUmVhbHRpbWVXZWJSVEMsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVXZWJSdGMubWpzXCI7XG5leHBvcnQgeyBPcGVuQUlSZWFsdGltZVdlYlNvY2tldCwgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZVdlYnNvY2tldC5tanNcIjtcbmV4cG9ydCB7IE9wZW5BSVJlYWx0aW1lQmFzZSwgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfTU9ERUwsIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lQmFzZS5tanNcIjtcbmV4cG9ydCBjb25zdCB1dGlscyA9IHtcbiAgICBiYXNlNjRUb0FycmF5QnVmZmVyOiB1dGlsSW1wb3J0LmJhc2U2NFRvQXJyYXlCdWZmZXIsXG4gICAgYXJyYXlCdWZmZXJUb0Jhc2U2NDogdXRpbEltcG9ydC5hcnJheUJ1ZmZlclRvQmFzZTY0LFxuICAgIGdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZTogdXRpbEltcG9ydC5nZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UsXG59O1xuZXhwb3J0IHsgTW9kZWxCZWhhdmlvckVycm9yLCBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgdG9vbCwgVXNlckVycm9yLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/items.mjs":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/items.mjs ***!
  \**************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   baseItemSchema: () => (/* binding */ baseItemSchema),\n/* harmony export */   realtimeMessageItemSchema: () => (/* binding */ realtimeMessageItemSchema),\n/* harmony export */   realtimeToolCallItem: () => (/* binding */ realtimeToolCallItem)\n/* harmony export */ });\n/* harmony import */ var _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openai/zod/v3 */ \"(ssr)/./node_modules/.pnpm/zod@3.25.51/node_modules/zod/dist/esm/index.js\");\n\nconst baseItemSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    itemId: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n});\nconst realtimeMessageItemSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion('role', [\n    _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        itemId: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        previousItemId: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().nullable().optional(),\n        type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('message'),\n        role: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('system'),\n        content: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.array(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({ type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('input_text'), text: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string() })),\n    }),\n    _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        itemId: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        previousItemId: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().nullable().optional(),\n        type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('message'),\n        role: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('user'),\n        status: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"](['in_progress', 'completed']),\n        content: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.array(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({ type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('input_text'), text: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string() }).or(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('input_audio'),\n            audio: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().nullable().optional(),\n            transcript: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().nullable(),\n        }))),\n    }),\n    _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        itemId: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        previousItemId: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().nullable().optional(),\n        type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('message'),\n        role: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('assistant'),\n        status: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"](['in_progress', 'completed', 'incomplete']),\n        content: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.array(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({ type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('text'), text: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string() }).or(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n            type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('audio'),\n            audio: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().nullable().optional(),\n            transcript: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().nullable().optional(),\n        }))),\n    }),\n]);\nconst realtimeToolCallItem = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    itemId: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    previousItemId: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().nullable().optional(),\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('function_call'),\n    status: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"](['in_progress', 'completed']),\n    arguments: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    name: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    output: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().nullable(),\n});\n//# sourceMappingURL=items.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW5haSthZ2VudHMtcmVhbHRpbWVAMC4wLjJfem9kQDMuMjUuNTEvbm9kZV9tb2R1bGVzL0BvcGVuYWkvYWdlbnRzLXJlYWx0aW1lL2Rpc3QvaXRlbXMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBbUM7QUFDNUIsdUJBQXVCLG9EQUFRO0FBQ3RDLFlBQVksb0RBQVE7QUFDcEIsQ0FBQztBQUNNLGtDQUFrQyxnRUFBb0I7QUFDN0QsSUFBSSxvREFBUTtBQUNaLGdCQUFnQixvREFBUTtBQUN4Qix3QkFBd0Isb0RBQVE7QUFDaEMsY0FBYyxxREFBUztBQUN2QixjQUFjLHFEQUFTO0FBQ3ZCLGlCQUFpQixtREFBTyxDQUFDLG9EQUFRLEdBQUcsTUFBTSxxREFBUyxzQkFBc0Isb0RBQVEsSUFBSTtBQUNyRixLQUFLO0FBQ0wsSUFBSSxvREFBUTtBQUNaLGdCQUFnQixvREFBUTtBQUN4Qix3QkFBd0Isb0RBQVE7QUFDaEMsY0FBYyxxREFBUztBQUN2QixjQUFjLHFEQUFTO0FBQ3ZCLGdCQUFnQixxREFBTTtBQUN0QixpQkFBaUIsbURBQU8sQ0FBQyxvREFBUSxHQUFHLE1BQU0scURBQVMsc0JBQXNCLG9EQUFRLElBQUksS0FBSyxvREFBUTtBQUNsRyxrQkFBa0IscURBQVM7QUFDM0IsbUJBQW1CLG9EQUFRO0FBQzNCLHdCQUF3QixvREFBUTtBQUNoQyxTQUFTO0FBQ1QsS0FBSztBQUNMLElBQUksb0RBQVE7QUFDWixnQkFBZ0Isb0RBQVE7QUFDeEIsd0JBQXdCLG9EQUFRO0FBQ2hDLGNBQWMscURBQVM7QUFDdkIsY0FBYyxxREFBUztBQUN2QixnQkFBZ0IscURBQU07QUFDdEIsaUJBQWlCLG1EQUFPLENBQUMsb0RBQVEsR0FBRyxNQUFNLHFEQUFTLGdCQUFnQixvREFBUSxJQUFJLEtBQUssb0RBQVE7QUFDNUYsa0JBQWtCLHFEQUFTO0FBQzNCLG1CQUFtQixvREFBUTtBQUMzQix3QkFBd0Isb0RBQVE7QUFDaEMsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNPLDZCQUE2QixvREFBUTtBQUM1QyxZQUFZLG9EQUFRO0FBQ3BCLG9CQUFvQixvREFBUTtBQUM1QixVQUFVLHFEQUFTO0FBQ25CLFlBQVkscURBQU07QUFDbEIsZUFBZSxvREFBUTtBQUN2QixVQUFVLG9EQUFRO0FBQ2xCLFlBQVksb0RBQVE7QUFDcEIsQ0FBQztBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3BlbmFpbnl0dy8uL25vZGVfbW9kdWxlcy8ucG5wbS9Ab3BlbmFpK2FnZW50cy1yZWFsdGltZUAwLjAuMl96b2RAMy4yNS41MS9ub2RlX21vZHVsZXMvQG9wZW5haS9hZ2VudHMtcmVhbHRpbWUvZGlzdC9pdGVtcy5tanM/ZDgxMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSAnQG9wZW5haS96b2QvdjMnO1xuZXhwb3J0IGNvbnN0IGJhc2VJdGVtU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lTWVzc2FnZUl0ZW1TY2hlbWEgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigncm9sZScsIFtcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICAgICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAgICAgcm9sZTogei5saXRlcmFsKCdzeXN0ZW0nKSxcbiAgICAgICAgY29udGVudDogei5hcnJheSh6Lm9iamVjdCh7IHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfdGV4dCcpLCB0ZXh0OiB6LnN0cmluZygpIH0pKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICAgICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAgICAgcm9sZTogei5saXRlcmFsKCd1c2VyJyksXG4gICAgICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJ10pLFxuICAgICAgICBjb250ZW50OiB6LmFycmF5KHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCdpbnB1dF90ZXh0JyksIHRleHQ6IHouc3RyaW5nKCkgfSkub3Ioei5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpbycpLFxuICAgICAgICAgICAgYXVkaW86IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgICAgICB9KSkpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgaXRlbUlkOiB6LnN0cmluZygpLFxuICAgICAgICBwcmV2aW91c0l0ZW1JZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZScpLFxuICAgICAgICByb2xlOiB6LmxpdGVyYWwoJ2Fzc2lzdGFudCcpLFxuICAgICAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLFxuICAgICAgICBjb250ZW50OiB6LmFycmF5KHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCd0ZXh0JyksIHRleHQ6IHouc3RyaW5nKCkgfSkub3Ioei5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogei5saXRlcmFsKCdhdWRpbycpLFxuICAgICAgICAgICAgYXVkaW86IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgIH0pKSksXG4gICAgfSksXG5dKTtcbmV4cG9ydCBjb25zdCByZWFsdGltZVRvb2xDYWxsSXRlbSA9IHoub2JqZWN0KHtcbiAgICBpdGVtSWQ6IHouc3RyaW5nKCksXG4gICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHR5cGU6IHoubGl0ZXJhbCgnZnVuY3Rpb25fY2FsbCcpLFxuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJ10pLFxuICAgIGFyZ3VtZW50czogei5zdHJpbmcoKSxcbiAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgIG91dHB1dDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pdGVtcy5tanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/items.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/logger.mjs":
/*!***************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/logger.mjs ***!
  \***************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openai/agents-core */ \"(ssr)/./node_modules/.pnpm/@openai+agents-core@0.0.2_ws@8.18.2_zod@3.25.51/node_modules/@openai/agents-core/dist/index.mjs\");\n\nconst logger = (0,_openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.getLogger)('openai-agents:realtime');\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (logger);\n//# sourceMappingURL=logger.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW5haSthZ2VudHMtcmVhbHRpbWVAMC4wLjJfem9kQDMuMjUuNTEvbm9kZV9tb2R1bGVzL0BvcGVuYWkvYWdlbnRzLXJlYWx0aW1lL2Rpc3QvbG9nZ2VyLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFnRDtBQUNoRCxlQUFlLDhEQUFTO0FBQ3hCLGlFQUFlLE1BQU0sRUFBQztBQUN0QiIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW5haW55dHcvLi9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW5haSthZ2VudHMtcmVhbHRpbWVAMC4wLjJfem9kQDMuMjUuNTEvbm9kZV9tb2R1bGVzL0BvcGVuYWkvYWdlbnRzLXJlYWx0aW1lL2Rpc3QvbG9nZ2VyLm1qcz8yMGM0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCdvcGVuYWktYWdlbnRzOnJlYWx0aW1lJyk7XG5leHBvcnQgZGVmYXVsdCBsb2dnZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2dnZXIubWpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/logger.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/metadata.mjs":
/*!*****************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/metadata.mjs ***!
  \*****************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   METADATA: () => (/* binding */ METADATA),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n// This file is automatically generated\nconst METADATA = {\n    \"name\": \"@openai/agents-realtime\",\n    \"version\": \"0.0.2\",\n    \"versions\": {\n        \"@openai/agents-realtime\": \"0.0.2\",\n        \"@openai/agents-core\": \"workspace:*\"\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (METADATA);\n//# sourceMappingURL=metadata.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW5haSthZ2VudHMtcmVhbHRpbWVAMC4wLjJfem9kQDMuMjUuNTEvbm9kZV9tb2R1bGVzL0BvcGVuYWkvYWdlbnRzLXJlYWx0aW1lL2Rpc3QvbWV0YWRhdGEubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWUsUUFBUSxFQUFDO0FBQ3hCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3BlbmFpbnl0dy8uL25vZGVfbW9kdWxlcy8ucG5wbS9Ab3BlbmFpK2FnZW50cy1yZWFsdGltZUAwLjAuMl96b2RAMy4yNS41MS9ub2RlX21vZHVsZXMvQG9wZW5haS9hZ2VudHMtcmVhbHRpbWUvZGlzdC9tZXRhZGF0YS5tanM/Yjc3MyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGlzIGZpbGUgaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWRcbmV4cG9ydCBjb25zdCBNRVRBREFUQSA9IHtcbiAgICBcIm5hbWVcIjogXCJAb3BlbmFpL2FnZW50cy1yZWFsdGltZVwiLFxuICAgIFwidmVyc2lvblwiOiBcIjAuMC4yXCIsXG4gICAgXCJ2ZXJzaW9uc1wiOiB7XG4gICAgICAgIFwiQG9wZW5haS9hZ2VudHMtcmVhbHRpbWVcIjogXCIwLjAuMlwiLFxuICAgICAgICBcIkBvcGVuYWkvYWdlbnRzLWNvcmVcIjogXCJ3b3Jrc3BhY2U6KlwiXG4gICAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IE1FVEFEQVRBO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWV0YWRhdGEubWpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/metadata.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/openaiRealtimeBase.mjs":
/*!***************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/openaiRealtimeBase.mjs ***!
  \***************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_OPENAI_REALTIME_MODEL: () => (/* binding */ DEFAULT_OPENAI_REALTIME_MODEL),\n/* harmony export */   DEFAULT_OPENAI_REALTIME_SESSION_CONFIG: () => (/* binding */ DEFAULT_OPENAI_REALTIME_SESSION_CONFIG),\n/* harmony export */   OpenAIRealtimeBase: () => (/* binding */ OpenAIRealtimeBase)\n/* harmony export */ });\n/* harmony import */ var _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openai/agents-core */ \"(ssr)/./node_modules/.pnpm/@openai+agents-core@0.0.2_ws@8.18.2_zod@3.25.51/node_modules/@openai/agents-core/dist/index.mjs\");\n/* harmony import */ var _items_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./items.mjs */ \"(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/items.mjs\");\n/* harmony import */ var _logger_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./logger.mjs */ \"(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/logger.mjs\");\n/* harmony import */ var _openaiRealtimeEvents_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./openaiRealtimeEvents.mjs */ \"(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/openaiRealtimeEvents.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils.mjs */ \"(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/utils.mjs\");\n/* harmony import */ var _openai_agents_core_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @openai/agents-core/utils */ \"(ssr)/./node_modules/.pnpm/@openai+agents-core@0.0.2_ws@8.18.2_zod@3.25.51/node_modules/@openai/agents-core/dist/utils/index.mjs\");\n\n\n\n\n\n\n/**\n * The default model that is used during the connection if no model is provided.\n */\nconst DEFAULT_OPENAI_REALTIME_MODEL = 'gpt-4o-realtime-preview';\n/**\n * The default session config that gets send over during session connection unless overriden\n * by the user.\n */\nconst DEFAULT_OPENAI_REALTIME_SESSION_CONFIG = {\n    voice: 'ash',\n    modalities: ['text', 'audio'],\n    inputAudioFormat: 'pcm16',\n    outputAudioFormat: 'pcm16',\n    inputAudioTranscription: {\n        model: 'gpt-4o-mini-transcribe',\n    },\n    turnDetection: {\n        type: 'semantic_vad',\n    },\n};\nclass OpenAIRealtimeBase extends _openai_agents_core_utils__WEBPACK_IMPORTED_MODULE_5__.EventEmitterDelegate {\n    #model;\n    #apiKey;\n    #tracingConfig = null;\n    eventEmitter = new _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.RuntimeEventEmitter();\n    constructor(options = {}) {\n        super();\n        this.#model = options.model ?? DEFAULT_OPENAI_REALTIME_MODEL;\n        this.#apiKey = options.apiKey;\n    }\n    /**\n     * The current model that is being used by the transport layer.\n     */\n    get currentModel() {\n        return this.#model;\n    }\n    /**\n     * The current model that is being used by the transport layer.\n     * **Note**: The model cannot be changed mid conversation.\n     */\n    set currentModel(model) {\n        this.#model = model;\n    }\n    async _getApiKey(options) {\n        const apiKey = options.apiKey ?? this.#apiKey;\n        if (typeof apiKey === 'function') {\n            return await apiKey();\n        }\n        return apiKey;\n    }\n    _onMessage(event) {\n        const { data: parsed, isGeneric } = (0,_openaiRealtimeEvents_mjs__WEBPACK_IMPORTED_MODULE_3__.parseRealtimeEvent)(event);\n        if (parsed === null) {\n            return;\n        }\n        this.emit('*', parsed);\n        if (isGeneric) {\n            return;\n        }\n        if (parsed.type === 'error') {\n            this.emit('error', { type: 'error', error: parsed });\n        }\n        else {\n            this.emit(parsed.type, parsed);\n        }\n        if (parsed.type === 'response.created') {\n            this.emit('turn_started', {\n                type: 'response_started',\n                providerData: {\n                    ...parsed,\n                },\n            });\n            return;\n        }\n        if (parsed.type === 'response.done') {\n            const response = _openaiRealtimeEvents_mjs__WEBPACK_IMPORTED_MODULE_3__.responseDoneEventSchema.safeParse(parsed);\n            if (!response.success) {\n                _logger_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error('Error parsing response done event', response.error);\n                return;\n            }\n            const inputTokens = response.data.response.usage?.input_tokens ?? 0;\n            const outputTokens = response.data.response.usage?.output_tokens ?? 0;\n            const totalTokens = inputTokens + outputTokens;\n            const usage = new _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.Usage({\n                inputTokens,\n                inputTokensDetails: response.data.response.usage?.input_tokens_details ?? {},\n                outputTokens,\n                outputTokensDetails: response.data.response.usage?.output_tokens_details ?? {},\n                totalTokens,\n            });\n            this.emit('usage_update', usage);\n            this.emit('turn_done', {\n                type: 'response_done',\n                response: {\n                    id: response.data.response.id ?? '',\n                    output: response.data.response.output ?? [],\n                    usage: {\n                        inputTokens,\n                        inputTokensDetails: response.data.response.usage?.input_tokens_details ?? {},\n                        outputTokens,\n                        outputTokensDetails: response.data.response.usage?.output_tokens_details ?? {},\n                        totalTokens,\n                    },\n                },\n            });\n            return;\n        }\n        if (parsed.type === 'response.audio.done') {\n            this.emit('audio_done');\n            return;\n        }\n        if (parsed.type === 'conversation.item.deleted') {\n            this.emit('item_deleted', {\n                itemId: parsed.item_id,\n            });\n            return;\n        }\n        if (parsed.type === 'conversation.item.input_audio_transcription.completed' ||\n            parsed.type === 'conversation.item.truncated') {\n            // right now rather than keeping track of partials and rebuilding the item we\n            // will retrieve it instead which triggers the `conversation.item.retrieved` event below\n            this.sendEvent({\n                type: 'conversation.item.retrieve',\n                item_id: parsed.item_id,\n            });\n            return;\n        }\n        if (parsed.type === 'conversation.item.input_audio_transcription.delta' ||\n            parsed.type === 'response.text.delta' ||\n            parsed.type === 'response.audio_transcript.delta' ||\n            parsed.type === 'response.function_call_arguments.delta') {\n            if (parsed.type === 'response.audio_transcript.delta') {\n                this.emit('audio_transcript_delta', {\n                    type: 'transcript_delta',\n                    delta: parsed.delta,\n                    itemId: parsed.item_id,\n                });\n            }\n            // no support for partial transcripts yet.\n            return;\n        }\n        if (parsed.type === 'conversation.item.created' ||\n            parsed.type === 'conversation.item.retrieved') {\n            if (parsed.item.type === 'message') {\n                const previousItemId = parsed.type === 'conversation.item.created'\n                    ? parsed.previous_item_id\n                    : null;\n                const item = _items_mjs__WEBPACK_IMPORTED_MODULE_1__.realtimeMessageItemSchema.parse({\n                    itemId: parsed.item.id,\n                    previousItemId,\n                    type: parsed.item.type,\n                    role: parsed.item.role,\n                    content: parsed.item.content,\n                    status: parsed.item.status,\n                });\n                this.emit('item_update', item);\n                return;\n            }\n        }\n        if (parsed.type === 'response.output_item.done' ||\n            parsed.type === 'response.output_item.added') {\n            const item = parsed.item;\n            if (item.type === 'function_call' && item.status === 'completed') {\n                const toolCall = _items_mjs__WEBPACK_IMPORTED_MODULE_1__.realtimeToolCallItem.parse({\n                    itemId: item.id,\n                    type: item.type,\n                    status: 'in_progress', // we set it to in_progress for the UI as it will only be completed with the output\n                    arguments: item.arguments,\n                    name: item.name,\n                    output: null,\n                });\n                this.emit('item_update', toolCall);\n                this.emit('function_call', {\n                    id: item.id,\n                    type: 'function_call',\n                    callId: item.call_id ?? '',\n                    arguments: item.arguments ?? '',\n                    name: item.name ?? '',\n                });\n                return;\n            }\n            if (item.type === 'message') {\n                const realtimeItem = _items_mjs__WEBPACK_IMPORTED_MODULE_1__.realtimeMessageItemSchema.parse({\n                    itemId: parsed.item.id,\n                    type: parsed.item.type,\n                    role: parsed.item.role,\n                    content: parsed.item.content,\n                    status: 'in_progress',\n                });\n                this.emit('item_update', realtimeItem);\n                return;\n            }\n        }\n    }\n    _onError(error) {\n        this.emit('error', {\n            type: 'error',\n            error,\n        });\n    }\n    _onOpen() {\n        this.emit('connected');\n    }\n    _onClose() {\n        this.emit('disconnected');\n    }\n    /**\n     * Send a message to the Realtime API. This will create a new item in the conversation and\n     * trigger a response.\n     *\n     * @param message - The message to send.\n     * @param otherEventData - Additional event data to send.\n     */\n    sendMessage(message, otherEventData) {\n        this.sendEvent({\n            type: 'conversation.item.create',\n            item: typeof message === 'string'\n                ? {\n                    type: 'message',\n                    role: 'user',\n                    content: [\n                        {\n                            type: 'input_text',\n                            text: message,\n                        },\n                    ],\n                }\n                : message,\n            ...otherEventData,\n        });\n        this.sendEvent({\n            type: 'response.create',\n        });\n    }\n    _getMergedSessionConfig(config) {\n        const sessionData = {\n            instructions: config.instructions,\n            model: config.model ??\n                this.#model ??\n                DEFAULT_OPENAI_REALTIME_SESSION_CONFIG.model,\n            voice: config.voice ?? DEFAULT_OPENAI_REALTIME_SESSION_CONFIG.voice,\n            modalities: config.modalities ?? DEFAULT_OPENAI_REALTIME_SESSION_CONFIG.modalities,\n            input_audio_format: config.inputAudioFormat ??\n                DEFAULT_OPENAI_REALTIME_SESSION_CONFIG.inputAudioFormat,\n            output_audio_format: config.outputAudioFormat ??\n                DEFAULT_OPENAI_REALTIME_SESSION_CONFIG.outputAudioFormat,\n            input_audio_transcription: config.inputAudioTranscription ??\n                DEFAULT_OPENAI_REALTIME_SESSION_CONFIG.inputAudioTranscription,\n            turn_detection: config.turnDetection ??\n                DEFAULT_OPENAI_REALTIME_SESSION_CONFIG.turnDetection,\n            tool_choice: config.toolChoice ?? DEFAULT_OPENAI_REALTIME_SESSION_CONFIG.toolChoice,\n            tools: config.tools?.map((tool) => ({\n                ...tool,\n                strict: undefined,\n            })),\n            // We don't set tracing here to make sure that we don't try to override it on every\n            // session.update as it might lead to errors\n            ...(config.providerData ?? {}),\n        };\n        return sessionData;\n    }\n    /**\n     * Sets the internal tracing config. This is used to track the tracing config that has been set\n     * during the session.create event.\n     */\n    set _tracingConfig(tracingConfig) {\n        this.#tracingConfig = tracingConfig;\n    }\n    /**\n     * Sets the tracing config for the session. This will send the tracing config to the Realtime API.\n     *\n     * @param tracingConfig - The tracing config to set. We don't support 'auto' here as the SDK will always configure a Workflow Name unless it exists\n     */\n    _updateTracingConfig(tracingConfig) {\n        if (typeof this.#tracingConfig === 'undefined') {\n            // treating it as default value\n            this.#tracingConfig = null;\n        }\n        if (tracingConfig === 'auto') {\n            // turn on tracing in auto mode\n            this.sendEvent({\n                type: 'session.update',\n                session: {\n                    tracing: 'auto',\n                },\n            });\n            return;\n        }\n        if (typeof this.#tracingConfig !== 'string' &&\n            typeof tracingConfig !== 'string') {\n            // tracing is already set, we can't change it\n            _logger_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].warn('Tracing config is already set, skipping setting it again. This likely happens when you already set a tracing config on session creation.');\n            return;\n        }\n        if (tracingConfig === null) {\n            _logger_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].debug('Disabling tracing for this session. It cannot be turned on for this session from this point on.');\n            this.sendEvent({\n                type: 'session.update',\n                session: {\n                    tracing: null,\n                },\n            });\n            return;\n        }\n        if (this.#tracingConfig === null ||\n            typeof this.#tracingConfig === 'string') {\n            // tracing is currently not set so we can set it to the new value\n            this.sendEvent({\n                type: 'session.update',\n                session: {\n                    tracing: tracingConfig,\n                },\n            });\n            return;\n        }\n        if (tracingConfig?.group_id !== this.#tracingConfig?.group_id ||\n            tracingConfig?.metadata !== this.#tracingConfig?.metadata ||\n            tracingConfig?.workflow_name !== this.#tracingConfig?.workflow_name) {\n            _logger_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].warn('Mismatch in tracing config. Ignoring the new tracing config. This likely happens when you already set a tracing config on session creation. Current tracing config: %s, new tracing config: %s', JSON.stringify(this.#tracingConfig), JSON.stringify(tracingConfig));\n            return;\n        }\n        this.sendEvent({\n            type: 'session.update',\n            session: {\n                tracing: tracingConfig,\n            },\n        });\n    }\n    /**\n     * Updates the session config. This will merge it with the current session config with the default\n     * values and send it to the Realtime API.\n     *\n     * @param config - The session config to update.\n     */\n    updateSessionConfig(config) {\n        const sessionData = this._getMergedSessionConfig(config);\n        this.sendEvent({\n            type: 'session.update',\n            session: sessionData,\n        });\n    }\n    /**\n     * Send the output of a function call to the Realtime API.\n     *\n     * @param toolCall - The tool call to send the output for.\n     * @param output - The output of the function call.\n     * @param startResponse - Whether to start a new response after sending the output.\n     */\n    sendFunctionCallOutput(toolCall, output, startResponse = true) {\n        this.sendEvent({\n            type: 'conversation.item.create',\n            item: {\n                type: 'function_call_output',\n                output,\n                call_id: toolCall.callId,\n            },\n        });\n        try {\n            const item = _items_mjs__WEBPACK_IMPORTED_MODULE_1__.realtimeToolCallItem.parse({\n                itemId: toolCall.id,\n                previousItemId: toolCall.previousItemId,\n                type: 'function_call',\n                status: 'completed',\n                arguments: toolCall.arguments,\n                name: toolCall.name,\n                output,\n            });\n            this.emit('item_update', item);\n        }\n        catch (error) {\n            _logger_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error('Error parsing tool call item', error, toolCall);\n        }\n        if (startResponse) {\n            this.sendEvent({\n                type: 'response.create',\n            });\n        }\n    }\n    /**\n     * Send an audio buffer to the Realtime API. If `{ commit: true }` is passed, the audio buffer\n     * will be committed and the model will start processing it. This is necessary if you have\n     * disabled turn detection / voice activity detection (VAD).\n     *\n     * @param audio - The audio buffer to send.\n     * @param options - The options for the audio buffer.\n     */\n    sendAudio(audio, { commit = false } = {}) {\n        this.sendEvent({\n            type: 'input_audio_buffer.append',\n            audio: (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_4__.arrayBufferToBase64)(audio),\n        });\n        if (commit) {\n            this.sendEvent({\n                type: 'input_audio_buffer.commit',\n            });\n        }\n    }\n    /**\n     * Reset the history of the conversation. This will create a diff between the old and new history\n     * and send the necessary events to the Realtime API to update the history.\n     *\n     * @param oldHistory - The old history of the conversation.\n     * @param newHistory - The new history of the conversation.\n     */\n    resetHistory(oldHistory, newHistory) {\n        const { removals, additions, updates } = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_4__.diffRealtimeHistory)(oldHistory, newHistory);\n        const removalIds = new Set(removals.map((item) => item.itemId));\n        // we don't have an update event for items so we will remove and re-add what's there\n        for (const update of updates) {\n            removalIds.add(update.itemId);\n        }\n        if (removalIds.size > 0) {\n            for (const itemId of removalIds) {\n                this.sendEvent({\n                    type: 'conversation.item.delete',\n                    item_id: itemId,\n                });\n            }\n        }\n        const additionsAndUpdates = [...additions, ...updates];\n        for (const addition of additionsAndUpdates) {\n            if (addition.type === 'message') {\n                const itemEntry = {\n                    type: 'message',\n                    role: addition.role,\n                    content: addition.content,\n                    id: addition.itemId,\n                };\n                if (addition.role !== 'system' && addition.status) {\n                    itemEntry.status = addition.status;\n                }\n                this.sendEvent({\n                    type: 'conversation.item.create',\n                    item: itemEntry,\n                });\n            }\n            else if (addition.type === 'function_call') {\n                _logger_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].warn('Function calls cannot be manually added or updated at the moment. Ignoring.');\n            }\n        }\n    }\n}\n//# sourceMappingURL=openaiRealtimeBase.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW5haSthZ2VudHMtcmVhbHRpbWVAMC4wLjJfem9kQDMuMjUuNTEvbm9kZV9tb2R1bGVzL0BvcGVuYWkvYWdlbnRzLXJlYWx0aW1lL2Rpc3Qvb3BlbmFpUmVhbHRpbWVCYXNlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBaUU7QUFDYztBQUM3QztBQUN3RDtBQUNuQjtBQUNOO0FBQ2pFO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ08saUNBQWlDLDJFQUFvQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsb0VBQW1CO0FBQzFDLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwwQkFBMEIsRUFBRSw2RUFBa0I7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyw4QkFBOEI7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsOEVBQXVCO0FBQ3BEO0FBQ0EsZ0JBQWdCLG1EQUFNO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsc0RBQUs7QUFDbkM7QUFDQSw0RkFBNEY7QUFDNUY7QUFDQSw4RkFBOEY7QUFDOUY7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9HQUFvRztBQUNwRztBQUNBLHNHQUFz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QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLCtCQUErQixFQUFFLCtEQUFtQjtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxnQkFBZ0IsbURBQU07QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW5haW55dHcvLi9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW5haSthZ2VudHMtcmVhbHRpbWVAMC4wLjJfem9kQDMuMjUuNTEvbm9kZV9tb2R1bGVzL0BvcGVuYWkvYWdlbnRzLXJlYWx0aW1lL2Rpc3Qvb3BlbmFpUmVhbHRpbWVCYXNlLm1qcz9iZDNiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJ1bnRpbWVFdmVudEVtaXR0ZXIsIFVzYWdlIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5pbXBvcnQgeyByZWFsdGltZU1lc3NhZ2VJdGVtU2NoZW1hLCByZWFsdGltZVRvb2xDYWxsSXRlbSwgfSBmcm9tIFwiLi9pdGVtcy5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWFsdGltZUV2ZW50LCByZXNwb25zZURvbmVFdmVudFNjaGVtYSwgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUV2ZW50cy5tanNcIjtcbmltcG9ydCB7IGFycmF5QnVmZmVyVG9CYXNlNjQsIGRpZmZSZWFsdGltZUhpc3RvcnkgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmltcG9ydCB7IEV2ZW50RW1pdHRlckRlbGVnYXRlIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS91dGlscyc7XG4vKipcbiAqIFRoZSBkZWZhdWx0IG1vZGVsIHRoYXQgaXMgdXNlZCBkdXJpbmcgdGhlIGNvbm5lY3Rpb24gaWYgbm8gbW9kZWwgaXMgcHJvdmlkZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9NT0RFTCA9ICdncHQtNG8tcmVhbHRpbWUtcHJldmlldyc7XG4vKipcbiAqIFRoZSBkZWZhdWx0IHNlc3Npb24gY29uZmlnIHRoYXQgZ2V0cyBzZW5kIG92ZXIgZHVyaW5nIHNlc3Npb24gY29ubmVjdGlvbiB1bmxlc3Mgb3ZlcnJpZGVuXG4gKiBieSB0aGUgdXNlci5cbiAqL1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHID0ge1xuICAgIHZvaWNlOiAnYXNoJyxcbiAgICBtb2RhbGl0aWVzOiBbJ3RleHQnLCAnYXVkaW8nXSxcbiAgICBpbnB1dEF1ZGlvRm9ybWF0OiAncGNtMTYnLFxuICAgIG91dHB1dEF1ZGlvRm9ybWF0OiAncGNtMTYnLFxuICAgIGlucHV0QXVkaW9UcmFuc2NyaXB0aW9uOiB7XG4gICAgICAgIG1vZGVsOiAnZ3B0LTRvLW1pbmktdHJhbnNjcmliZScsXG4gICAgfSxcbiAgICB0dXJuRGV0ZWN0aW9uOiB7XG4gICAgICAgIHR5cGU6ICdzZW1hbnRpY192YWQnLFxuICAgIH0sXG59O1xuZXhwb3J0IGNsYXNzIE9wZW5BSVJlYWx0aW1lQmFzZSBleHRlbmRzIEV2ZW50RW1pdHRlckRlbGVnYXRlIHtcbiAgICAjbW9kZWw7XG4gICAgI2FwaUtleTtcbiAgICAjdHJhY2luZ0NvbmZpZyA9IG51bGw7XG4gICAgZXZlbnRFbWl0dGVyID0gbmV3IFJ1bnRpbWVFdmVudEVtaXR0ZXIoKTtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy4jbW9kZWwgPSBvcHRpb25zLm1vZGVsID8/IERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX01PREVMO1xuICAgICAgICB0aGlzLiNhcGlLZXkgPSBvcHRpb25zLmFwaUtleTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgbW9kZWwgdGhhdCBpcyBiZWluZyB1c2VkIGJ5IHRoZSB0cmFuc3BvcnQgbGF5ZXIuXG4gICAgICovXG4gICAgZ2V0IGN1cnJlbnRNb2RlbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI21vZGVsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBtb2RlbCB0aGF0IGlzIGJlaW5nIHVzZWQgYnkgdGhlIHRyYW5zcG9ydCBsYXllci5cbiAgICAgKiAqKk5vdGUqKjogVGhlIG1vZGVsIGNhbm5vdCBiZSBjaGFuZ2VkIG1pZCBjb252ZXJzYXRpb24uXG4gICAgICovXG4gICAgc2V0IGN1cnJlbnRNb2RlbChtb2RlbCkge1xuICAgICAgICB0aGlzLiNtb2RlbCA9IG1vZGVsO1xuICAgIH1cbiAgICBhc3luYyBfZ2V0QXBpS2V5KG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgYXBpS2V5ID0gb3B0aW9ucy5hcGlLZXkgPz8gdGhpcy4jYXBpS2V5O1xuICAgICAgICBpZiAodHlwZW9mIGFwaUtleSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGFwaUtleSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcGlLZXk7XG4gICAgfVxuICAgIF9vbk1lc3NhZ2UoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgeyBkYXRhOiBwYXJzZWQsIGlzR2VuZXJpYyB9ID0gcGFyc2VSZWFsdGltZUV2ZW50KGV2ZW50KTtcbiAgICAgICAgaWYgKHBhcnNlZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW1pdCgnKicsIHBhcnNlZCk7XG4gICAgICAgIGlmIChpc0dlbmVyaWMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdlcnJvcicpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7IHR5cGU6ICdlcnJvcicsIGVycm9yOiBwYXJzZWQgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQocGFyc2VkLnR5cGUsIHBhcnNlZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuY3JlYXRlZCcpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgndHVybl9zdGFydGVkJywge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZV9zdGFydGVkJyxcbiAgICAgICAgICAgICAgICBwcm92aWRlckRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucGFyc2VkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5kb25lJykge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSByZXNwb25zZURvbmVFdmVudFNjaGVtYS5zYWZlUGFyc2UocGFyc2VkKTtcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgcGFyc2luZyByZXNwb25zZSBkb25lIGV2ZW50JywgcmVzcG9uc2UuZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGlucHV0VG9rZW5zID0gcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8uaW5wdXRfdG9rZW5zID8/IDA7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXRUb2tlbnMgPSByZXNwb25zZS5kYXRhLnJlc3BvbnNlLnVzYWdlPy5vdXRwdXRfdG9rZW5zID8/IDA7XG4gICAgICAgICAgICBjb25zdCB0b3RhbFRva2VucyA9IGlucHV0VG9rZW5zICsgb3V0cHV0VG9rZW5zO1xuICAgICAgICAgICAgY29uc3QgdXNhZ2UgPSBuZXcgVXNhZ2Uoe1xuICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zRGV0YWlsczogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8uaW5wdXRfdG9rZW5zX2RldGFpbHMgPz8ge30sXG4gICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgIG91dHB1dFRva2Vuc0RldGFpbHM6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/Lm91dHB1dF90b2tlbnNfZGV0YWlscyA/PyB7fSxcbiAgICAgICAgICAgICAgICB0b3RhbFRva2VucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCd1c2FnZV91cGRhdGUnLCB1c2FnZSk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3R1cm5fZG9uZScsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2VfZG9uZScsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2U6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UuaWQgPz8gJycsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS5vdXRwdXQgPz8gW10sXG4gICAgICAgICAgICAgICAgICAgIHVzYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zRGV0YWlsczogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8uaW5wdXRfdG9rZW5zX2RldGFpbHMgPz8ge30sXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnNEZXRhaWxzOiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLnVzYWdlPy5vdXRwdXRfdG9rZW5zX2RldGFpbHMgPz8ge30sXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuYXVkaW8uZG9uZScpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW9fZG9uZScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmRlbGV0ZWQnKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fZGVsZXRlZCcsIHtcbiAgICAgICAgICAgICAgICBpdGVtSWQ6IHBhcnNlZC5pdGVtX2lkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5jb21wbGV0ZWQnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLnRydW5jYXRlZCcpIHtcbiAgICAgICAgICAgIC8vIHJpZ2h0IG5vdyByYXRoZXIgdGhhbiBrZWVwaW5nIHRyYWNrIG9mIHBhcnRpYWxzIGFuZCByZWJ1aWxkaW5nIHRoZSBpdGVtIHdlXG4gICAgICAgICAgICAvLyB3aWxsIHJldHJpZXZlIGl0IGluc3RlYWQgd2hpY2ggdHJpZ2dlcnMgdGhlIGBjb252ZXJzYXRpb24uaXRlbS5yZXRyaWV2ZWRgIGV2ZW50IGJlbG93XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlJyxcbiAgICAgICAgICAgICAgICBpdGVtX2lkOiBwYXJzZWQuaXRlbV9pZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb24uZGVsdGEnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLnRleHQuZGVsdGEnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmF1ZGlvX3RyYW5zY3JpcHQuZGVsdGEnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmZ1bmN0aW9uX2NhbGxfYXJndW1lbnRzLmRlbHRhJykge1xuICAgICAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuYXVkaW9fdHJhbnNjcmlwdC5kZWx0YScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX3RyYW5zY3JpcHRfZGVsdGEnLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0cmFuc2NyaXB0X2RlbHRhJyxcbiAgICAgICAgICAgICAgICAgICAgZGVsdGE6IHBhcnNlZC5kZWx0YSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiBwYXJzZWQuaXRlbV9pZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIG5vIHN1cHBvcnQgZm9yIHBhcnRpYWwgdHJhbnNjcmlwdHMgeWV0LlxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZWQnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlZCcpIHtcbiAgICAgICAgICAgIGlmIChwYXJzZWQuaXRlbS50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c0l0ZW1JZCA9IHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlZCdcbiAgICAgICAgICAgICAgICAgICAgPyBwYXJzZWQucHJldmlvdXNfaXRlbV9pZFxuICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IHJlYWx0aW1lTWVzc2FnZUl0ZW1TY2hlbWEucGFyc2Uoe1xuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IHBhcnNlZC5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0l0ZW1JZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogcGFyc2VkLml0ZW0udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogcGFyc2VkLml0ZW0ucm9sZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogcGFyc2VkLml0ZW0uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBwYXJzZWQuaXRlbS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtX3VwZGF0ZScsIGl0ZW0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5vdXRwdXRfaXRlbS5kb25lJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5vdXRwdXRfaXRlbS5hZGRlZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBwYXJzZWQuaXRlbTtcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJyAmJiBpdGVtLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29sQ2FsbCA9IHJlYWx0aW1lVG9vbENhbGxJdGVtLnBhcnNlKHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiBpdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBpdGVtLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2luX3Byb2dyZXNzJywgLy8gd2Ugc2V0IGl0IHRvIGluX3Byb2dyZXNzIGZvciB0aGUgVUkgYXMgaXQgd2lsbCBvbmx5IGJlIGNvbXBsZXRlZCB3aXRoIHRoZSBvdXRwdXRcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiBpdGVtLmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtX3VwZGF0ZScsIHRvb2xDYWxsKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Z1bmN0aW9uX2NhbGwnLCB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBpdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fY2FsbCcsXG4gICAgICAgICAgICAgICAgICAgIGNhbGxJZDogaXRlbS5jYWxsX2lkID8/ICcnLFxuICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IGl0ZW0uYXJndW1lbnRzID8/ICcnLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUgPz8gJycsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbHRpbWVJdGVtID0gcmVhbHRpbWVNZXNzYWdlSXRlbVNjaGVtYS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFyc2VkLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhcnNlZC5pdGVtLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6IHBhcnNlZC5pdGVtLnJvbGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHBhcnNlZC5pdGVtLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2luX3Byb2dyZXNzJyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgcmVhbHRpbWVJdGVtKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgX29uRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICBlcnJvcixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9vbk9wZW4oKSB7XG4gICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGVkJyk7XG4gICAgfVxuICAgIF9vbkNsb3NlKCkge1xuICAgICAgICB0aGlzLmVtaXQoJ2Rpc2Nvbm5lY3RlZCcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEgbWVzc2FnZSB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIHdpbGwgY3JlYXRlIGEgbmV3IGl0ZW0gaW4gdGhlIGNvbnZlcnNhdGlvbiBhbmRcbiAgICAgKiB0cmlnZ2VyIGEgcmVzcG9uc2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBtZXNzYWdlIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG90aGVyRXZlbnREYXRhIC0gQWRkaXRpb25hbCBldmVudCBkYXRhIHRvIHNlbmQuXG4gICAgICovXG4gICAgc2VuZE1lc3NhZ2UobWVzc2FnZSwgb3RoZXJFdmVudERhdGEpIHtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZScsXG4gICAgICAgICAgICBpdGVtOiB0eXBlb2YgbWVzc2FnZSA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ21lc3NhZ2UnLFxuICAgICAgICAgICAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW5wdXRfdGV4dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDogbWVzc2FnZSxcbiAgICAgICAgICAgIC4uLm90aGVyRXZlbnREYXRhLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlLmNyZWF0ZScsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfZ2V0TWVyZ2VkU2Vzc2lvbkNvbmZpZyhjb25maWcpIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkRhdGEgPSB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6IGNvbmZpZy5pbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICBtb2RlbDogY29uZmlnLm1vZGVsID8/XG4gICAgICAgICAgICAgICAgdGhpcy4jbW9kZWwgPz9cbiAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5tb2RlbCxcbiAgICAgICAgICAgIHZvaWNlOiBjb25maWcudm9pY2UgPz8gREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcudm9pY2UsXG4gICAgICAgICAgICBtb2RhbGl0aWVzOiBjb25maWcubW9kYWxpdGllcyA/PyBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5tb2RhbGl0aWVzLFxuICAgICAgICAgICAgaW5wdXRfYXVkaW9fZm9ybWF0OiBjb25maWcuaW5wdXRBdWRpb0Zvcm1hdCA/P1xuICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLmlucHV0QXVkaW9Gb3JtYXQsXG4gICAgICAgICAgICBvdXRwdXRfYXVkaW9fZm9ybWF0OiBjb25maWcub3V0cHV0QXVkaW9Gb3JtYXQgPz9cbiAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5vdXRwdXRBdWRpb0Zvcm1hdCxcbiAgICAgICAgICAgIGlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb246IGNvbmZpZy5pbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbiA/P1xuICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLmlucHV0QXVkaW9UcmFuc2NyaXB0aW9uLFxuICAgICAgICAgICAgdHVybl9kZXRlY3Rpb246IGNvbmZpZy50dXJuRGV0ZWN0aW9uID8/XG4gICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcudHVybkRldGVjdGlvbixcbiAgICAgICAgICAgIHRvb2xfY2hvaWNlOiBjb25maWcudG9vbENob2ljZSA/PyBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy50b29sQ2hvaWNlLFxuICAgICAgICAgICAgdG9vbHM6IGNvbmZpZy50b29scz8ubWFwKCh0b29sKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRvb2wsXG4gICAgICAgICAgICAgICAgc3RyaWN0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAvLyBXZSBkb24ndCBzZXQgdHJhY2luZyBoZXJlIHRvIG1ha2Ugc3VyZSB0aGF0IHdlIGRvbid0IHRyeSB0byBvdmVycmlkZSBpdCBvbiBldmVyeVxuICAgICAgICAgICAgLy8gc2Vzc2lvbi51cGRhdGUgYXMgaXQgbWlnaHQgbGVhZCB0byBlcnJvcnNcbiAgICAgICAgICAgIC4uLihjb25maWcucHJvdmlkZXJEYXRhID8/IHt9KSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHNlc3Npb25EYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBpbnRlcm5hbCB0cmFjaW5nIGNvbmZpZy4gVGhpcyBpcyB1c2VkIHRvIHRyYWNrIHRoZSB0cmFjaW5nIGNvbmZpZyB0aGF0IGhhcyBiZWVuIHNldFxuICAgICAqIGR1cmluZyB0aGUgc2Vzc2lvbi5jcmVhdGUgZXZlbnQuXG4gICAgICovXG4gICAgc2V0IF90cmFjaW5nQ29uZmlnKHRyYWNpbmdDb25maWcpIHtcbiAgICAgICAgdGhpcy4jdHJhY2luZ0NvbmZpZyA9IHRyYWNpbmdDb25maWc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHRyYWNpbmcgY29uZmlnIGZvciB0aGUgc2Vzc2lvbi4gVGhpcyB3aWxsIHNlbmQgdGhlIHRyYWNpbmcgY29uZmlnIHRvIHRoZSBSZWFsdGltZSBBUEkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhY2luZ0NvbmZpZyAtIFRoZSB0cmFjaW5nIGNvbmZpZyB0byBzZXQuIFdlIGRvbid0IHN1cHBvcnQgJ2F1dG8nIGhlcmUgYXMgdGhlIFNESyB3aWxsIGFsd2F5cyBjb25maWd1cmUgYSBXb3JrZmxvdyBOYW1lIHVubGVzcyBpdCBleGlzdHNcbiAgICAgKi9cbiAgICBfdXBkYXRlVHJhY2luZ0NvbmZpZyh0cmFjaW5nQ29uZmlnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy4jdHJhY2luZ0NvbmZpZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIC8vIHRyZWF0aW5nIGl0IGFzIGRlZmF1bHQgdmFsdWVcbiAgICAgICAgICAgIHRoaXMuI3RyYWNpbmdDb25maWcgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFjaW5nQ29uZmlnID09PSAnYXV0bycpIHtcbiAgICAgICAgICAgIC8vIHR1cm4gb24gdHJhY2luZyBpbiBhdXRvIG1vZGVcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnc2Vzc2lvbi51cGRhdGUnLFxuICAgICAgICAgICAgICAgIHNlc3Npb246IHtcbiAgICAgICAgICAgICAgICAgICAgdHJhY2luZzogJ2F1dG8nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuI3RyYWNpbmdDb25maWcgIT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgICB0eXBlb2YgdHJhY2luZ0NvbmZpZyAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIC8vIHRyYWNpbmcgaXMgYWxyZWFkeSBzZXQsIHdlIGNhbid0IGNoYW5nZSBpdFxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1RyYWNpbmcgY29uZmlnIGlzIGFscmVhZHkgc2V0LCBza2lwcGluZyBzZXR0aW5nIGl0IGFnYWluLiBUaGlzIGxpa2VseSBoYXBwZW5zIHdoZW4geW91IGFscmVhZHkgc2V0IGEgdHJhY2luZyBjb25maWcgb24gc2Vzc2lvbiBjcmVhdGlvbi4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2luZ0NvbmZpZyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdEaXNhYmxpbmcgdHJhY2luZyBmb3IgdGhpcyBzZXNzaW9uLiBJdCBjYW5ub3QgYmUgdHVybmVkIG9uIGZvciB0aGlzIHNlc3Npb24gZnJvbSB0aGlzIHBvaW50IG9uLicpO1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgICAgICAgICB0cmFjaW5nOiBudWxsLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jdHJhY2luZ0NvbmZpZyA9PT0gbnVsbCB8fFxuICAgICAgICAgICAgdHlwZW9mIHRoaXMuI3RyYWNpbmdDb25maWcgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAvLyB0cmFjaW5nIGlzIGN1cnJlbnRseSBub3Qgc2V0IHNvIHdlIGNhbiBzZXQgaXQgdG8gdGhlIG5ldyB2YWx1ZVxuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgICAgICAgICB0cmFjaW5nOiB0cmFjaW5nQ29uZmlnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2luZ0NvbmZpZz8uZ3JvdXBfaWQgIT09IHRoaXMuI3RyYWNpbmdDb25maWc/Lmdyb3VwX2lkIHx8XG4gICAgICAgICAgICB0cmFjaW5nQ29uZmlnPy5tZXRhZGF0YSAhPT0gdGhpcy4jdHJhY2luZ0NvbmZpZz8ubWV0YWRhdGEgfHxcbiAgICAgICAgICAgIHRyYWNpbmdDb25maWc/LndvcmtmbG93X25hbWUgIT09IHRoaXMuI3RyYWNpbmdDb25maWc/LndvcmtmbG93X25hbWUpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdNaXNtYXRjaCBpbiB0cmFjaW5nIGNvbmZpZy4gSWdub3JpbmcgdGhlIG5ldyB0cmFjaW5nIGNvbmZpZy4gVGhpcyBsaWtlbHkgaGFwcGVucyB3aGVuIHlvdSBhbHJlYWR5IHNldCBhIHRyYWNpbmcgY29uZmlnIG9uIHNlc3Npb24gY3JlYXRpb24uIEN1cnJlbnQgdHJhY2luZyBjb25maWc6ICVzLCBuZXcgdHJhY2luZyBjb25maWc6ICVzJywgSlNPTi5zdHJpbmdpZnkodGhpcy4jdHJhY2luZ0NvbmZpZyksIEpTT04uc3RyaW5naWZ5KHRyYWNpbmdDb25maWcpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnc2Vzc2lvbi51cGRhdGUnLFxuICAgICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgICAgIHRyYWNpbmc6IHRyYWNpbmdDb25maWcsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgc2Vzc2lvbiBjb25maWcuIFRoaXMgd2lsbCBtZXJnZSBpdCB3aXRoIHRoZSBjdXJyZW50IHNlc3Npb24gY29uZmlnIHdpdGggdGhlIGRlZmF1bHRcbiAgICAgKiB2YWx1ZXMgYW5kIHNlbmQgaXQgdG8gdGhlIFJlYWx0aW1lIEFQSS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb25maWcgLSBUaGUgc2Vzc2lvbiBjb25maWcgdG8gdXBkYXRlLlxuICAgICAqL1xuICAgIHVwZGF0ZVNlc3Npb25Db25maWcoY29uZmlnKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb25EYXRhID0gdGhpcy5fZ2V0TWVyZ2VkU2Vzc2lvbkNvbmZpZyhjb25maWcpO1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnc2Vzc2lvbi51cGRhdGUnLFxuICAgICAgICAgICAgc2Vzc2lvbjogc2Vzc2lvbkRhdGEsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIHRoZSBvdXRwdXQgb2YgYSBmdW5jdGlvbiBjYWxsIHRvIHRoZSBSZWFsdGltZSBBUEkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdG9vbENhbGwgLSBUaGUgdG9vbCBjYWxsIHRvIHNlbmQgdGhlIG91dHB1dCBmb3IuXG4gICAgICogQHBhcmFtIG91dHB1dCAtIFRoZSBvdXRwdXQgb2YgdGhlIGZ1bmN0aW9uIGNhbGwuXG4gICAgICogQHBhcmFtIHN0YXJ0UmVzcG9uc2UgLSBXaGV0aGVyIHRvIHN0YXJ0IGEgbmV3IHJlc3BvbnNlIGFmdGVyIHNlbmRpbmcgdGhlIG91dHB1dC5cbiAgICAgKi9cbiAgICBzZW5kRnVuY3Rpb25DYWxsT3V0cHV0KHRvb2xDYWxsLCBvdXRwdXQsIHN0YXJ0UmVzcG9uc2UgPSB0cnVlKSB7XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGUnLFxuICAgICAgICAgICAgaXRlbToge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9jYWxsX291dHB1dCcsXG4gICAgICAgICAgICAgICAgb3V0cHV0LFxuICAgICAgICAgICAgICAgIGNhbGxfaWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHJlYWx0aW1lVG9vbENhbGxJdGVtLnBhcnNlKHtcbiAgICAgICAgICAgICAgICBpdGVtSWQ6IHRvb2xDYWxsLmlkLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzSXRlbUlkOiB0b29sQ2FsbC5wcmV2aW91c0l0ZW1JZCxcbiAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fY2FsbCcsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHRvb2xDYWxsLmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICBuYW1lOiB0b29sQ2FsbC5uYW1lLFxuICAgICAgICAgICAgICAgIG91dHB1dCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtX3VwZGF0ZScsIGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBwYXJzaW5nIHRvb2wgY2FsbCBpdGVtJywgZXJyb3IsIHRvb2xDYWxsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhcnRSZXNwb25zZSkge1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZS5jcmVhdGUnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhbiBhdWRpbyBidWZmZXIgdG8gdGhlIFJlYWx0aW1lIEFQSS4gSWYgYHsgY29tbWl0OiB0cnVlIH1gIGlzIHBhc3NlZCwgdGhlIGF1ZGlvIGJ1ZmZlclxuICAgICAqIHdpbGwgYmUgY29tbWl0dGVkIGFuZCB0aGUgbW9kZWwgd2lsbCBzdGFydCBwcm9jZXNzaW5nIGl0LiBUaGlzIGlzIG5lY2Vzc2FyeSBpZiB5b3UgaGF2ZVxuICAgICAqIGRpc2FibGVkIHR1cm4gZGV0ZWN0aW9uIC8gdm9pY2UgYWN0aXZpdHkgZGV0ZWN0aW9uIChWQUQpLlxuICAgICAqXG4gICAgICogQHBhcmFtIGF1ZGlvIC0gVGhlIGF1ZGlvIGJ1ZmZlciB0byBzZW5kLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgZm9yIHRoZSBhdWRpbyBidWZmZXIuXG4gICAgICovXG4gICAgc2VuZEF1ZGlvKGF1ZGlvLCB7IGNvbW1pdCA9IGZhbHNlIH0gPSB7fSkge1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnaW5wdXRfYXVkaW9fYnVmZmVyLmFwcGVuZCcsXG4gICAgICAgICAgICBhdWRpbzogYXJyYXlCdWZmZXJUb0Jhc2U2NChhdWRpbyksXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY29tbWl0KSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2lucHV0X2F1ZGlvX2J1ZmZlci5jb21taXQnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgdGhlIGhpc3Rvcnkgb2YgdGhlIGNvbnZlcnNhdGlvbi4gVGhpcyB3aWxsIGNyZWF0ZSBhIGRpZmYgYmV0d2VlbiB0aGUgb2xkIGFuZCBuZXcgaGlzdG9yeVxuICAgICAqIGFuZCBzZW5kIHRoZSBuZWNlc3NhcnkgZXZlbnRzIHRvIHRoZSBSZWFsdGltZSBBUEkgdG8gdXBkYXRlIHRoZSBoaXN0b3J5LlxuICAgICAqXG4gICAgICogQHBhcmFtIG9sZEhpc3RvcnkgLSBUaGUgb2xkIGhpc3Rvcnkgb2YgdGhlIGNvbnZlcnNhdGlvbi5cbiAgICAgKiBAcGFyYW0gbmV3SGlzdG9yeSAtIFRoZSBuZXcgaGlzdG9yeSBvZiB0aGUgY29udmVyc2F0aW9uLlxuICAgICAqL1xuICAgIHJlc2V0SGlzdG9yeShvbGRIaXN0b3J5LCBuZXdIaXN0b3J5KSB7XG4gICAgICAgIGNvbnN0IHsgcmVtb3ZhbHMsIGFkZGl0aW9ucywgdXBkYXRlcyB9ID0gZGlmZlJlYWx0aW1lSGlzdG9yeShvbGRIaXN0b3J5LCBuZXdIaXN0b3J5KTtcbiAgICAgICAgY29uc3QgcmVtb3ZhbElkcyA9IG5ldyBTZXQocmVtb3ZhbHMubWFwKChpdGVtKSA9PiBpdGVtLml0ZW1JZCkpO1xuICAgICAgICAvLyB3ZSBkb24ndCBoYXZlIGFuIHVwZGF0ZSBldmVudCBmb3IgaXRlbXMgc28gd2Ugd2lsbCByZW1vdmUgYW5kIHJlLWFkZCB3aGF0J3MgdGhlcmVcbiAgICAgICAgZm9yIChjb25zdCB1cGRhdGUgb2YgdXBkYXRlcykge1xuICAgICAgICAgICAgcmVtb3ZhbElkcy5hZGQodXBkYXRlLml0ZW1JZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlbW92YWxJZHMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbUlkIG9mIHJlbW92YWxJZHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5kZWxldGUnLFxuICAgICAgICAgICAgICAgICAgICBpdGVtX2lkOiBpdGVtSWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWRkaXRpb25zQW5kVXBkYXRlcyA9IFsuLi5hZGRpdGlvbnMsIC4uLnVwZGF0ZXNdO1xuICAgICAgICBmb3IgKGNvbnN0IGFkZGl0aW9uIG9mIGFkZGl0aW9uc0FuZFVwZGF0ZXMpIHtcbiAgICAgICAgICAgIGlmIChhZGRpdGlvbi50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtRW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdtZXNzYWdlJyxcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogYWRkaXRpb24ucm9sZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogYWRkaXRpb24uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGFkZGl0aW9uLml0ZW1JZCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChhZGRpdGlvbi5yb2xlICE9PSAnc3lzdGVtJyAmJiBhZGRpdGlvbi5zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUVudHJ5LnN0YXR1cyA9IGFkZGl0aW9uLnN0YXR1cztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgaXRlbTogaXRlbUVudHJ5LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYWRkaXRpb24udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0Z1bmN0aW9uIGNhbGxzIGNhbm5vdCBiZSBtYW51YWxseSBhZGRlZCBvciB1cGRhdGVkIGF0IHRoZSBtb21lbnQuIElnbm9yaW5nLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3BlbmFpUmVhbHRpbWVCYXNlLm1qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/openaiRealtimeBase.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/openaiRealtimeEvents.mjs":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/openaiRealtimeEvents.mjs ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   conversationCreatedEventSchema: () => (/* binding */ conversationCreatedEventSchema),\n/* harmony export */   conversationItemContentSchema: () => (/* binding */ conversationItemContentSchema),\n/* harmony export */   conversationItemCreateEventSchema: () => (/* binding */ conversationItemCreateEventSchema),\n/* harmony export */   conversationItemCreatedEventSchema: () => (/* binding */ conversationItemCreatedEventSchema),\n/* harmony export */   conversationItemDeleteEventSchema: () => (/* binding */ conversationItemDeleteEventSchema),\n/* harmony export */   conversationItemDeletedEventSchema: () => (/* binding */ conversationItemDeletedEventSchema),\n/* harmony export */   conversationItemInputAudioTranscriptionCompletedEventSchema: () => (/* binding */ conversationItemInputAudioTranscriptionCompletedEventSchema),\n/* harmony export */   conversationItemInputAudioTranscriptionDeltaEventSchema: () => (/* binding */ conversationItemInputAudioTranscriptionDeltaEventSchema),\n/* harmony export */   conversationItemInputAudioTranscriptionFailedEventSchema: () => (/* binding */ conversationItemInputAudioTranscriptionFailedEventSchema),\n/* harmony export */   conversationItemRetrieveEventSchema: () => (/* binding */ conversationItemRetrieveEventSchema),\n/* harmony export */   conversationItemRetrievedEventSchema: () => (/* binding */ conversationItemRetrievedEventSchema),\n/* harmony export */   conversationItemSchema: () => (/* binding */ conversationItemSchema),\n/* harmony export */   conversationItemTruncateEventSchema: () => (/* binding */ conversationItemTruncateEventSchema),\n/* harmony export */   conversationItemTruncatedEventSchema: () => (/* binding */ conversationItemTruncatedEventSchema),\n/* harmony export */   errorEventSchema: () => (/* binding */ errorEventSchema),\n/* harmony export */   genericEventSchema: () => (/* binding */ genericEventSchema),\n/* harmony export */   inputAudioBufferAppendEventSchema: () => (/* binding */ inputAudioBufferAppendEventSchema),\n/* harmony export */   inputAudioBufferClearEventSchema: () => (/* binding */ inputAudioBufferClearEventSchema),\n/* harmony export */   inputAudioBufferClearedEventSchema: () => (/* binding */ inputAudioBufferClearedEventSchema),\n/* harmony export */   inputAudioBufferCommitEventSchema: () => (/* binding */ inputAudioBufferCommitEventSchema),\n/* harmony export */   inputAudioBufferCommittedEventSchema: () => (/* binding */ inputAudioBufferCommittedEventSchema),\n/* harmony export */   inputAudioBufferSpeechStartedEventSchema: () => (/* binding */ inputAudioBufferSpeechStartedEventSchema),\n/* harmony export */   inputAudioBufferSpeechStoppedEventSchema: () => (/* binding */ inputAudioBufferSpeechStoppedEventSchema),\n/* harmony export */   outputAudioBufferClearedEventSchema: () => (/* binding */ outputAudioBufferClearedEventSchema),\n/* harmony export */   outputAudioBufferStartedEventSchema: () => (/* binding */ outputAudioBufferStartedEventSchema),\n/* harmony export */   outputAudioBufferStoppedEventSchema: () => (/* binding */ outputAudioBufferStoppedEventSchema),\n/* harmony export */   parseRealtimeEvent: () => (/* binding */ parseRealtimeEvent),\n/* harmony export */   rateLimitsUpdatedEventSchema: () => (/* binding */ rateLimitsUpdatedEventSchema),\n/* harmony export */   realtimeClientEventSchema: () => (/* binding */ realtimeClientEventSchema),\n/* harmony export */   realtimeResponse: () => (/* binding */ realtimeResponse),\n/* harmony export */   realtimeServerEventSchema: () => (/* binding */ realtimeServerEventSchema),\n/* harmony export */   responseAudioDeltaEventSchema: () => (/* binding */ responseAudioDeltaEventSchema),\n/* harmony export */   responseAudioDoneEventSchema: () => (/* binding */ responseAudioDoneEventSchema),\n/* harmony export */   responseAudioTranscriptDeltaEventSchema: () => (/* binding */ responseAudioTranscriptDeltaEventSchema),\n/* harmony export */   responseAudioTranscriptDoneEventSchema: () => (/* binding */ responseAudioTranscriptDoneEventSchema),\n/* harmony export */   responseCancelEventSchema: () => (/* binding */ responseCancelEventSchema),\n/* harmony export */   responseContentPartAddedEventSchema: () => (/* binding */ responseContentPartAddedEventSchema),\n/* harmony export */   responseContentPartDoneEventSchema: () => (/* binding */ responseContentPartDoneEventSchema),\n/* harmony export */   responseCreateEventSchema: () => (/* binding */ responseCreateEventSchema),\n/* harmony export */   responseCreatedEventSchema: () => (/* binding */ responseCreatedEventSchema),\n/* harmony export */   responseDoneEventSchema: () => (/* binding */ responseDoneEventSchema),\n/* harmony export */   responseFunctionCallArgumentsDeltaEventSchema: () => (/* binding */ responseFunctionCallArgumentsDeltaEventSchema),\n/* harmony export */   responseFunctionCallArgumentsDoneEventSchema: () => (/* binding */ responseFunctionCallArgumentsDoneEventSchema),\n/* harmony export */   responseOutputItemAddedEventSchema: () => (/* binding */ responseOutputItemAddedEventSchema),\n/* harmony export */   responseOutputItemDoneEventSchema: () => (/* binding */ responseOutputItemDoneEventSchema),\n/* harmony export */   responseTextDeltaEventSchema: () => (/* binding */ responseTextDeltaEventSchema),\n/* harmony export */   responseTextDoneEventSchema: () => (/* binding */ responseTextDoneEventSchema),\n/* harmony export */   sessionCreatedEventSchema: () => (/* binding */ sessionCreatedEventSchema),\n/* harmony export */   sessionUpdateEventSchema: () => (/* binding */ sessionUpdateEventSchema),\n/* harmony export */   sessionUpdatedEventSchema: () => (/* binding */ sessionUpdatedEventSchema),\n/* harmony export */   transcriptionSessionUpdateEventSchema: () => (/* binding */ transcriptionSessionUpdateEventSchema),\n/* harmony export */   transcriptionSessionUpdatedEventSchema: () => (/* binding */ transcriptionSessionUpdatedEventSchema)\n/* harmony export */ });\n/* harmony import */ var _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openai/zod/v3 */ \"(ssr)/./node_modules/.pnpm/zod@3.25.51/node_modules/zod/dist/esm/index.js\");\n\n// Event schemas mirroring the structures defined in the OpenAI SDK typings.\n// Most fields from the interfaces in `realtime.d.ts` are captured here to\n// provide better runtime validation when parsing events from the server.\nconst realtimeResponse = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    conversation_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    max_output_tokens: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number().or(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('inf')).optional(),\n    metadata: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.record(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(), _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.any()).optional().nullable(),\n    modalities: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.array(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string()).optional(),\n    object: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('realtime.response').optional(),\n    output: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.array(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.any()).optional(),\n    output_audio_format: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    status: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"](['completed', 'incomplete', 'failed', 'cancelled']).optional(),\n    status_details: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.record(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(), _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.any()).optional().nullable(),\n    usage: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        input_tokens: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number().optional(),\n        input_tokens_details: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.record(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(), _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.any()).optional().nullable(),\n        output_tokens: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number().optional(),\n        output_tokens_details: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.record(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(), _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.any())\n            .optional()\n            .nullable(),\n    })\n        .optional(),\n    voice: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n});\n// Basic content schema used by ConversationItem.\nconst conversationItemContentSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    audio: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().nullable().optional(),\n    text: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().nullable().optional(),\n    transcript: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().nullable().optional(),\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.union([\n        _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('input_text'),\n        _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('input_audio'),\n        _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('item_reference'),\n        _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('text'),\n        _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('audio'),\n    ]),\n});\nconst conversationItemSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    arguments: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    call_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    content: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.array(conversationItemContentSchema).optional(),\n    name: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    object: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('realtime.item').optional(),\n    output: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    role: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"](['user', 'assistant', 'system']).optional(),\n    status: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"](['completed', 'incomplete', 'in_progress']).optional(),\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"](['message', 'function_call', 'function_call_output']).optional(),\n});\nconst conversationCreatedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('conversation.created'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    conversation: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        object: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('realtime.conversation').optional(),\n    }),\n});\nconst conversationItemCreatedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('conversation.item.created'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    item: conversationItemSchema,\n    previous_item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().nullable().optional(),\n});\nconst conversationItemDeletedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('conversation.item.deleted'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n});\nconst conversationItemInputAudioTranscriptionCompletedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('conversation.item.input_audio_transcription.completed'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    content_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    transcript: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    logprobs: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.array(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.any()).nullable().optional(),\n});\nconst conversationItemInputAudioTranscriptionDeltaEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('conversation.item.input_audio_transcription.delta'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    content_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number().optional(),\n    delta: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    logprobs: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.array(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.any()).nullable().optional(),\n});\nconst conversationItemInputAudioTranscriptionFailedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('conversation.item.input_audio_transcription.failed'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    content_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    error: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        code: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        message: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        param: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    }),\n});\nconst conversationItemRetrievedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('conversation.item.retrieved'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    item: conversationItemSchema,\n});\nconst conversationItemTruncatedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('conversation.item.truncated'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    audio_end_ms: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    content_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n});\nconst conversationItemCreateEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('conversation.item.create'),\n    item: conversationItemSchema,\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    previous_item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().nullable().optional(),\n});\nconst conversationItemDeleteEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('conversation.item.delete'),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n});\nconst conversationItemRetrieveEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('conversation.item.retrieve'),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n});\nconst conversationItemTruncateEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('conversation.item.truncate'),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    audio_end_ms: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    content_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n});\nconst errorEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('error'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    error: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.any().optional(),\n});\nconst inputAudioBufferClearedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('input_audio_buffer.cleared'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n});\nconst inputAudioBufferAppendEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('input_audio_buffer.append'),\n    audio: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n});\nconst inputAudioBufferClearEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('input_audio_buffer.clear'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n});\nconst inputAudioBufferCommitEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('input_audio_buffer.commit'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n});\nconst inputAudioBufferCommittedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('input_audio_buffer.committed'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    previous_item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().nullable().optional(),\n});\nconst inputAudioBufferSpeechStartedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('input_audio_buffer.speech_started'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    audio_start_ms: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n});\nconst inputAudioBufferSpeechStoppedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('input_audio_buffer.speech_stopped'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    audio_end_ms: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n});\nconst outputAudioBufferStartedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('output_audio_buffer.started'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n})\n    .passthrough();\nconst outputAudioBufferStoppedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('output_audio_buffer.stopped'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n})\n    .passthrough();\nconst outputAudioBufferClearedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('output_audio_buffer.cleared'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n});\nconst rateLimitsUpdatedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('rate_limits.updated'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    rate_limits: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.array(_openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        limit: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number().optional(),\n        name: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"](['requests', 'tokens']).optional(),\n        remaining: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number().optional(),\n        reset_seconds: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number().optional(),\n    })),\n});\nconst responseAudioDeltaEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('response.audio.delta'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    content_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    delta: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    output_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    response_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n});\nconst responseAudioDoneEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('response.audio.done'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    content_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    output_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    response_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n});\nconst responseAudioTranscriptDeltaEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('response.audio_transcript.delta'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    content_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    delta: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    output_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    response_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n});\nconst responseAudioTranscriptDoneEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('response.audio_transcript.done'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    content_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    transcript: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    output_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    response_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n});\nconst responseContentPartAddedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('response.content_part.added'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    content_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    output_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    response_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    part: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        audio: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        text: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        transcript: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"](['text', 'audio']).optional(),\n    }),\n});\nconst responseContentPartDoneEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('response.content_part.done'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    content_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    output_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    response_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    part: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        audio: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        text: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        transcript: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z[\"enum\"](['text', 'audio']).optional(),\n    }),\n});\nconst responseCreatedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('response.created'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    response: realtimeResponse,\n});\nconst responseDoneEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('response.done'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    response: realtimeResponse,\n    test: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.boolean(),\n});\nconst responseFunctionCallArgumentsDeltaEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('response.function_call_arguments.delta'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    call_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    delta: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    output_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    response_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n});\nconst responseFunctionCallArgumentsDoneEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('response.function_call_arguments.done'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    call_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    arguments: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    output_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    response_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n});\nconst responseOutputItemAddedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('response.output_item.added'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    item: conversationItemSchema,\n    output_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    response_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n});\nconst responseOutputItemDoneEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('response.output_item.done'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    item: conversationItemSchema,\n    output_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    response_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n});\nconst responseTextDeltaEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('response.text.delta'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    content_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    delta: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    output_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    response_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n});\nconst responseTextDoneEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('response.text.done'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    item_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    content_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    text: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    output_index: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    response_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n});\nconst sessionCreatedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('session.created'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    session: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.any(),\n});\nconst sessionUpdatedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('session.updated'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    session: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.any(),\n});\nconst responseCancelEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('response.cancel'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    response_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n});\nconst responseCreateEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('response.create'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    response: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.any().optional(),\n});\nconst sessionUpdateEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('session.update'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    session: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.any(),\n});\nconst transcriptionSessionUpdateEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('transcription_session.update'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n    session: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.any(),\n});\nconst transcriptionSessionUpdatedEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.literal('transcription_session.updated'),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    session: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.any(),\n});\n/**\n * This schema is used if an event is unknown to the client. The Realtime API might introduce\n * new events at some point and we should handle them gracefully by treating them as generic events\n * only requiring a type and an optional event_id.\n */\nconst genericEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    event_id: _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.string().optional().nullable(),\n})\n    .passthrough();\nconst realtimeServerEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion('type', [\n    conversationCreatedEventSchema,\n    conversationItemCreatedEventSchema,\n    conversationItemDeletedEventSchema,\n    conversationItemInputAudioTranscriptionCompletedEventSchema,\n    conversationItemInputAudioTranscriptionDeltaEventSchema,\n    conversationItemInputAudioTranscriptionFailedEventSchema,\n    conversationItemRetrievedEventSchema,\n    conversationItemTruncatedEventSchema,\n    errorEventSchema,\n    inputAudioBufferClearedEventSchema,\n    inputAudioBufferCommittedEventSchema,\n    inputAudioBufferSpeechStartedEventSchema,\n    inputAudioBufferSpeechStoppedEventSchema,\n    outputAudioBufferStartedEventSchema,\n    outputAudioBufferStoppedEventSchema,\n    outputAudioBufferClearedEventSchema,\n    rateLimitsUpdatedEventSchema,\n    responseAudioDeltaEventSchema,\n    responseAudioDoneEventSchema,\n    responseAudioTranscriptDeltaEventSchema,\n    responseAudioTranscriptDoneEventSchema,\n    responseContentPartAddedEventSchema,\n    responseContentPartDoneEventSchema,\n    responseCreatedEventSchema,\n    responseDoneEventSchema,\n    responseFunctionCallArgumentsDeltaEventSchema,\n    responseFunctionCallArgumentsDoneEventSchema,\n    responseOutputItemAddedEventSchema,\n    responseOutputItemDoneEventSchema,\n    responseTextDeltaEventSchema,\n    responseTextDoneEventSchema,\n    sessionCreatedEventSchema,\n    sessionUpdatedEventSchema,\n    transcriptionSessionUpdatedEventSchema,\n]);\nconst realtimeClientEventSchema = _openai_zod_v3__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion('type', [\n    conversationItemCreateEventSchema,\n    conversationItemDeleteEventSchema,\n    conversationItemRetrieveEventSchema,\n    conversationItemTruncateEventSchema,\n    inputAudioBufferAppendEventSchema,\n    inputAudioBufferClearEventSchema,\n    inputAudioBufferCommitEventSchema,\n    responseCancelEventSchema,\n    responseCreateEventSchema,\n    sessionUpdateEventSchema,\n    transcriptionSessionUpdateEventSchema,\n]);\n/**\n * Parses a realtime event from the server. If the event is unknown to the client, it will be treated as a generic event.\n * @param event - The event to parse.\n * @returns The parsed event or null if the event is unknown to the client.\n */\nfunction parseRealtimeEvent(event) {\n    const raw = JSON.parse(event.data.toString());\n    const parsed = realtimeServerEventSchema.safeParse(raw);\n    if (!parsed.success) {\n        const genericParsed = genericEventSchema.safeParse(raw);\n        if (genericParsed.success) {\n            return { data: genericParsed.data, isGeneric: true };\n        }\n        return { data: null, isGeneric: true };\n    }\n    return { data: parsed.data, isGeneric: false };\n}\n//# sourceMappingURL=openaiRealtimeEvents.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW5haSthZ2VudHMtcmVhbHRpbWVAMC4wLjJfem9kQDMuMjUuNTEvbm9kZV9tb2R1bGVzL0BvcGVuYWkvYWdlbnRzLXJlYWx0aW1lL2Rpc3Qvb3BlbmFpUmVhbHRpbWVFdmVudHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNPLHlCQUF5QixvREFBUTtBQUN4QyxRQUFRLG9EQUFRO0FBQ2hCLHFCQUFxQixvREFBUTtBQUM3Qix1QkFBdUIsb0RBQVEsTUFBTSxxREFBUztBQUM5QyxjQUFjLG9EQUFRLENBQUMsb0RBQVEsSUFBSSxpREFBSztBQUN4QyxnQkFBZ0IsbURBQU8sQ0FBQyxvREFBUTtBQUNoQyxZQUFZLHFEQUFTO0FBQ3JCLFlBQVksbURBQU8sQ0FBQyxpREFBSztBQUN6Qix5QkFBeUIsb0RBQVE7QUFDakMsWUFBWSxxREFBTTtBQUNsQixvQkFBb0Isb0RBQVEsQ0FBQyxvREFBUSxJQUFJLGlEQUFLO0FBQzlDLFdBQVcsb0RBQ0k7QUFDZixzQkFBc0Isb0RBQVE7QUFDOUIsOEJBQThCLG9EQUFRLENBQUMsb0RBQVEsSUFBSSxpREFBSztBQUN4RCx1QkFBdUIsb0RBQVE7QUFDL0IsK0JBQStCLG9EQUNaLENBQUMsb0RBQVEsSUFBSSxpREFBSztBQUNyQztBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsV0FBVyxvREFBUTtBQUNuQixDQUFDO0FBQ0Q7QUFDTyxzQ0FBc0Msb0RBQVE7QUFDckQsUUFBUSxvREFBUTtBQUNoQixXQUFXLG9EQUFRO0FBQ25CLFVBQVUsb0RBQVE7QUFDbEIsZ0JBQWdCLG9EQUFRO0FBQ3hCLFVBQVUsbURBQU87QUFDakIsUUFBUSxxREFBUztBQUNqQixRQUFRLHFEQUFTO0FBQ2pCLFFBQVEscURBQVM7QUFDakIsUUFBUSxxREFBUztBQUNqQixRQUFR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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sa0NBQWtDLGdFQUFvQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsYUFBYTtBQUNiO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuYWlueXR3Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVuYWkrYWdlbnRzLXJlYWx0aW1lQDAuMC4yX3pvZEAzLjI1LjUxL25vZGVfbW9kdWxlcy9Ab3BlbmFpL2FnZW50cy1yZWFsdGltZS9kaXN0L29wZW5haVJlYWx0aW1lRXZlbnRzLm1qcz82YjBmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tICdAb3BlbmFpL3pvZC92Myc7XG4vLyBFdmVudCBzY2hlbWFzIG1pcnJvcmluZyB0aGUgc3RydWN0dXJlcyBkZWZpbmVkIGluIHRoZSBPcGVuQUkgU0RLIHR5cGluZ3MuXG4vLyBNb3N0IGZpZWxkcyBmcm9tIHRoZSBpbnRlcmZhY2VzIGluIGByZWFsdGltZS5kLnRzYCBhcmUgY2FwdHVyZWQgaGVyZSB0b1xuLy8gcHJvdmlkZSBiZXR0ZXIgcnVudGltZSB2YWxpZGF0aW9uIHdoZW4gcGFyc2luZyBldmVudHMgZnJvbSB0aGUgc2VydmVyLlxuZXhwb3J0IGNvbnN0IHJlYWx0aW1lUmVzcG9uc2UgPSB6Lm9iamVjdCh7XG4gICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBjb252ZXJzYXRpb25faWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBtYXhfb3V0cHV0X3Rva2Vuczogei5udW1iZXIoKS5vcih6LmxpdGVyYWwoJ2luZicpKS5vcHRpb25hbCgpLFxuICAgIG1ldGFkYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgbW9kYWxpdGllczogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpLFxuICAgIG9iamVjdDogei5saXRlcmFsKCdyZWFsdGltZS5yZXNwb25zZScpLm9wdGlvbmFsKCksXG4gICAgb3V0cHV0OiB6LmFycmF5KHouYW55KCkpLm9wdGlvbmFsKCksXG4gICAgb3V0cHV0X2F1ZGlvX2Zvcm1hdDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHN0YXR1czogei5lbnVtKFsnY29tcGxldGVkJywgJ2luY29tcGxldGUnLCAnZmFpbGVkJywgJ2NhbmNlbGxlZCddKS5vcHRpb25hbCgpLFxuICAgIHN0YXR1c19kZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgdXNhZ2U6IHpcbiAgICAgICAgLm9iamVjdCh7XG4gICAgICAgIGlucHV0X3Rva2Vuczogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgICBpbnB1dF90b2tlbnNfZGV0YWlsczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgICAgICBvdXRwdXRfdG9rZW5zOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgIG91dHB1dF90b2tlbnNfZGV0YWlsczogelxuICAgICAgICAgICAgLnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKVxuICAgICAgICAgICAgLm9wdGlvbmFsKClcbiAgICAgICAgICAgIC5udWxsYWJsZSgpLFxuICAgIH0pXG4gICAgICAgIC5vcHRpb25hbCgpLFxuICAgIHZvaWNlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbi8vIEJhc2ljIGNvbnRlbnQgc2NoZW1hIHVzZWQgYnkgQ29udmVyc2F0aW9uSXRlbS5cbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtQ29udGVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBpZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGF1ZGlvOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICB0ZXh0OiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICB0eXBlOiB6LnVuaW9uKFtcbiAgICAgICAgei5saXRlcmFsKCdpbnB1dF90ZXh0JyksXG4gICAgICAgIHoubGl0ZXJhbCgnaW5wdXRfYXVkaW8nKSxcbiAgICAgICAgei5saXRlcmFsKCdpdGVtX3JlZmVyZW5jZScpLFxuICAgICAgICB6LmxpdGVyYWwoJ3RleHQnKSxcbiAgICAgICAgei5saXRlcmFsKCdhdWRpbycpLFxuICAgIF0pLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBpZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGFyZ3VtZW50czogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGNhbGxfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBjb250ZW50OiB6LmFycmF5KGNvbnZlcnNhdGlvbkl0ZW1Db250ZW50U2NoZW1hKS5vcHRpb25hbCgpLFxuICAgIG5hbWU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBvYmplY3Q6IHoubGl0ZXJhbCgncmVhbHRpbWUuaXRlbScpLm9wdGlvbmFsKCksXG4gICAgb3V0cHV0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgcm9sZTogei5lbnVtKFsndXNlcicsICdhc3Npc3RhbnQnLCAnc3lzdGVtJ10pLm9wdGlvbmFsKCksXG4gICAgc3RhdHVzOiB6LmVudW0oWydjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZScsICdpbl9wcm9ncmVzcyddKS5vcHRpb25hbCgpLFxuICAgIHR5cGU6IHouZW51bShbJ21lc3NhZ2UnLCAnZnVuY3Rpb25fY2FsbCcsICdmdW5jdGlvbl9jYWxsX291dHB1dCddKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uQ3JlYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLmNyZWF0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBjb252ZXJzYXRpb246IHoub2JqZWN0KHtcbiAgICAgICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgb2JqZWN0OiB6LmxpdGVyYWwoJ3JlYWx0aW1lLmNvbnZlcnNhdGlvbicpLm9wdGlvbmFsKCksXG4gICAgfSksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtQ3JlYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG4gICAgcHJldmlvdXNfaXRlbV9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtRGVsZXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uZGVsZXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25Db21wbGV0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb24uY29tcGxldGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCksXG4gICAgbG9ncHJvYnM6IHouYXJyYXkoei5hbnkoKSkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uRGVsdGFFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb24uZGVsdGEnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGxvZ3Byb2JzOiB6LmFycmF5KHouYW55KCkpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkZhaWxlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5mYWlsZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZXJyb3I6IHoub2JqZWN0KHtcbiAgICAgICAgY29kZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICBtZXNzYWdlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHBhcmFtOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICB9KSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS50cnVuY2F0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGF1ZGlvX2VuZF9tczogei5udW1iZXIoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbUNyZWF0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlJyksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHByZXZpb3VzX2l0ZW1faWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbURlbGV0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uZGVsZXRlJyksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbVJldHJpZXZlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5yZXRyaWV2ZScpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0udHJ1bmNhdGUnKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGF1ZGlvX2VuZF9tczogei5udW1iZXIoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBlcnJvckV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnZXJyb3InKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGVycm9yOiB6LmFueSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLmNsZWFyZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJBcHBlbmRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5hcHBlbmQnKSxcbiAgICBhdWRpbzogei5zdHJpbmcoKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlckNsZWFyRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuY2xlYXInKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlckNvbW1pdEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLmNvbW1pdCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyQ29tbWl0dGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuY29tbWl0dGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBwcmV2aW91c19pdGVtX2lkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJTcGVlY2hTdGFydGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuc3BlZWNoX3N0YXJ0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGF1ZGlvX3N0YXJ0X21zOiB6Lm51bWJlcigpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0b3BwZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5zcGVlY2hfc3RvcHBlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgYXVkaW9fZW5kX21zOiB6Lm51bWJlcigpLFxufSk7XG5leHBvcnQgY29uc3Qgb3V0cHV0QXVkaW9CdWZmZXJTdGFydGVkRXZlbnRTY2hlbWEgPSB6XG4gICAgLm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfYXVkaW9fYnVmZmVyLnN0YXJ0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbn0pXG4gICAgLnBhc3N0aHJvdWdoKCk7XG5leHBvcnQgY29uc3Qgb3V0cHV0QXVkaW9CdWZmZXJTdG9wcGVkRXZlbnRTY2hlbWEgPSB6XG4gICAgLm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfYXVkaW9fYnVmZmVyLnN0b3BwZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbn0pXG4gICAgLnBhc3N0aHJvdWdoKCk7XG5leHBvcnQgY29uc3Qgb3V0cHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdvdXRwdXRfYXVkaW9fYnVmZmVyLmNsZWFyZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJhdGVMaW1pdHNVcGRhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyYXRlX2xpbWl0cy51cGRhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgcmF0ZV9saW1pdHM6IHouYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICBsaW1pdDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgICBuYW1lOiB6LmVudW0oWydyZXF1ZXN0cycsICd0b2tlbnMnXSkub3B0aW9uYWwoKSxcbiAgICAgICAgcmVtYWluaW5nOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgIHJlc2V0X3NlY29uZHM6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICB9KSksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUF1ZGlvRGVsdGFFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmF1ZGlvLmRlbHRhJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGRlbHRhOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQXVkaW9Eb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5hdWRpby5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQXVkaW9UcmFuc2NyaXB0RGVsdGFFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmF1ZGlvX3RyYW5zY3JpcHQuZGVsdGEnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZGVsdGE6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5hdWRpb190cmFuc2NyaXB0LmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUNvbnRlbnRQYXJ0QWRkZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmNvbnRlbnRfcGFydC5hZGRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG4gICAgcGFydDogei5vYmplY3Qoe1xuICAgICAgICBhdWRpbzogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0ZXh0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHlwZTogei5lbnVtKFsndGV4dCcsICdhdWRpbyddKS5vcHRpb25hbCgpLFxuICAgIH0pLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VDb250ZW50UGFydERvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmNvbnRlbnRfcGFydC5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbiAgICBwYXJ0OiB6Lm9iamVjdCh7XG4gICAgICAgIGF1ZGlvOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHRleHQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmVudW0oWyd0ZXh0JywgJ2F1ZGlvJ10pLm9wdGlvbmFsKCksXG4gICAgfSksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUNyZWF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmNyZWF0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICByZXNwb25zZTogcmVhbHRpbWVSZXNwb25zZSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlRG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHJlc3BvbnNlOiByZWFsdGltZVJlc3BvbnNlLFxuICAgIHRlc3Q6IHouYm9vbGVhbigpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuZnVuY3Rpb25fY2FsbF9hcmd1bWVudHMuZGVsdGEnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNhbGxfaWQ6IHouc3RyaW5nKCksXG4gICAgZGVsdGE6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5mdW5jdGlvbl9jYWxsX2FyZ3VtZW50cy5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjYWxsX2lkOiB6LnN0cmluZygpLFxuICAgIGFyZ3VtZW50czogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZU91dHB1dEl0ZW1BZGRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X2l0ZW0uYWRkZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtOiBjb252ZXJzYXRpb25JdGVtU2NoZW1hLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlT3V0cHV0SXRlbURvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm91dHB1dF9pdGVtLmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtOiBjb252ZXJzYXRpb25JdGVtU2NoZW1hLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlVGV4dERlbHRhRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS50ZXh0LmRlbHRhJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGRlbHRhOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlVGV4dERvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLnRleHQuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICB0ZXh0OiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHNlc3Npb25DcmVhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdzZXNzaW9uLmNyZWF0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBzZXNzaW9uOiB6LmFueSgpLFxufSk7XG5leHBvcnQgY29uc3Qgc2Vzc2lvblVwZGF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Nlc3Npb24udXBkYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHNlc3Npb246IHouYW55KCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUNhbmNlbEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY2FuY2VsJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VDcmVhdGVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmNyZWF0ZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgcmVzcG9uc2U6IHouYW55KCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHNlc3Npb25VcGRhdGVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Nlc3Npb24udXBkYXRlJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBzZXNzaW9uOiB6LmFueSgpLFxufSk7XG5leHBvcnQgY29uc3QgdHJhbnNjcmlwdGlvblNlc3Npb25VcGRhdGVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3RyYW5zY3JpcHRpb25fc2Vzc2lvbi51cGRhdGUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHNlc3Npb246IHouYW55KCksXG59KTtcbmV4cG9ydCBjb25zdCB0cmFuc2NyaXB0aW9uU2Vzc2lvblVwZGF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3RyYW5zY3JpcHRpb25fc2Vzc2lvbi51cGRhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgc2Vzc2lvbjogei5hbnkoKSxcbn0pO1xuLyoqXG4gKiBUaGlzIHNjaGVtYSBpcyB1c2VkIGlmIGFuIGV2ZW50IGlzIHVua25vd24gdG8gdGhlIGNsaWVudC4gVGhlIFJlYWx0aW1lIEFQSSBtaWdodCBpbnRyb2R1Y2VcbiAqIG5ldyBldmVudHMgYXQgc29tZSBwb2ludCBhbmQgd2Ugc2hvdWxkIGhhbmRsZSB0aGVtIGdyYWNlZnVsbHkgYnkgdHJlYXRpbmcgdGhlbSBhcyBnZW5lcmljIGV2ZW50c1xuICogb25seSByZXF1aXJpbmcgYSB0eXBlIGFuZCBhbiBvcHRpb25hbCBldmVudF9pZC5cbiAqL1xuZXhwb3J0IGNvbnN0IGdlbmVyaWNFdmVudFNjaGVtYSA9IHpcbiAgICAub2JqZWN0KHtcbiAgICB0eXBlOiB6LnN0cmluZygpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbn0pXG4gICAgLnBhc3N0aHJvdWdoKCk7XG5leHBvcnQgY29uc3QgcmVhbHRpbWVTZXJ2ZXJFdmVudFNjaGVtYSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIGNvbnZlcnNhdGlvbkNyZWF0ZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtQ3JlYXRlZEV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1EZWxldGVkRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uQ29tcGxldGVkRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uRGVsdGFFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25GYWlsZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtUmV0cmlldmVkRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbVRydW5jYXRlZEV2ZW50U2NoZW1hLFxuICAgIGVycm9yRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQ29tbWl0dGVkRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0YXJ0ZWRFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RvcHBlZEV2ZW50U2NoZW1hLFxuICAgIG91dHB1dEF1ZGlvQnVmZmVyU3RhcnRlZEV2ZW50U2NoZW1hLFxuICAgIG91dHB1dEF1ZGlvQnVmZmVyU3RvcHBlZEV2ZW50U2NoZW1hLFxuICAgIG91dHB1dEF1ZGlvQnVmZmVyQ2xlYXJlZEV2ZW50U2NoZW1hLFxuICAgIHJhdGVMaW1pdHNVcGRhdGVkRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VBdWRpb0RlbHRhRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VBdWRpb0RvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERlbHRhRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREb25lRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VDb250ZW50UGFydEFkZGVkRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VDb250ZW50UGFydERvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUNyZWF0ZWRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZURvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RlbHRhRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEb25lRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VPdXRwdXRJdGVtQWRkZWRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZU91dHB1dEl0ZW1Eb25lRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VUZXh0RGVsdGFFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZVRleHREb25lRXZlbnRTY2hlbWEsXG4gICAgc2Vzc2lvbkNyZWF0ZWRFdmVudFNjaGVtYSxcbiAgICBzZXNzaW9uVXBkYXRlZEV2ZW50U2NoZW1hLFxuICAgIHRyYW5zY3JpcHRpb25TZXNzaW9uVXBkYXRlZEV2ZW50U2NoZW1hLFxuXSk7XG5leHBvcnQgY29uc3QgcmVhbHRpbWVDbGllbnRFdmVudFNjaGVtYSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIGNvbnZlcnNhdGlvbkl0ZW1DcmVhdGVFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtRGVsZXRlRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbVJldHJpZXZlRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbVRydW5jYXRlRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlckFwcGVuZEV2ZW50U2NoZW1hLFxuICAgIGlucHV0QXVkaW9CdWZmZXJDbGVhckV2ZW50U2NoZW1hLFxuICAgIGlucHV0QXVkaW9CdWZmZXJDb21taXRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUNhbmNlbEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQ3JlYXRlRXZlbnRTY2hlbWEsXG4gICAgc2Vzc2lvblVwZGF0ZUV2ZW50U2NoZW1hLFxuICAgIHRyYW5zY3JpcHRpb25TZXNzaW9uVXBkYXRlRXZlbnRTY2hlbWEsXG5dKTtcbi8qKlxuICogUGFyc2VzIGEgcmVhbHRpbWUgZXZlbnQgZnJvbSB0aGUgc2VydmVyLiBJZiB0aGUgZXZlbnQgaXMgdW5rbm93biB0byB0aGUgY2xpZW50LCBpdCB3aWxsIGJlIHRyZWF0ZWQgYXMgYSBnZW5lcmljIGV2ZW50LlxuICogQHBhcmFtIGV2ZW50IC0gVGhlIGV2ZW50IHRvIHBhcnNlLlxuICogQHJldHVybnMgVGhlIHBhcnNlZCBldmVudCBvciBudWxsIGlmIHRoZSBldmVudCBpcyB1bmtub3duIHRvIHRoZSBjbGllbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVJlYWx0aW1lRXZlbnQoZXZlbnQpIHtcbiAgICBjb25zdCByYXcgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEudG9TdHJpbmcoKSk7XG4gICAgY29uc3QgcGFyc2VkID0gcmVhbHRpbWVTZXJ2ZXJFdmVudFNjaGVtYS5zYWZlUGFyc2UocmF3KTtcbiAgICBpZiAoIXBhcnNlZC5zdWNjZXNzKSB7XG4gICAgICAgIGNvbnN0IGdlbmVyaWNQYXJzZWQgPSBnZW5lcmljRXZlbnRTY2hlbWEuc2FmZVBhcnNlKHJhdyk7XG4gICAgICAgIGlmIChnZW5lcmljUGFyc2VkLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IGdlbmVyaWNQYXJzZWQuZGF0YSwgaXNHZW5lcmljOiB0cnVlIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgZGF0YTogbnVsbCwgaXNHZW5lcmljOiB0cnVlIH07XG4gICAgfVxuICAgIHJldHVybiB7IGRhdGE6IHBhcnNlZC5kYXRhLCBpc0dlbmVyaWM6IGZhbHNlIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcGVuYWlSZWFsdGltZUV2ZW50cy5tanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/openaiRealtimeEvents.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/openaiRealtimeWebRtc.mjs":
/*!*****************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/openaiRealtimeWebRtc.mjs ***!
  \*****************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OpenAIRealtimeWebRTC: () => (/* binding */ OpenAIRealtimeWebRTC)\n/* harmony export */ });\n/* harmony import */ var _openai_agents_core_shims__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openai/agents-core/_shims */ \"(ssr)/./node_modules/.pnpm/@openai+agents-core@0.0.2_ws@8.18.2_zod@3.25.51/node_modules/@openai/agents-core/dist/shims/shims-node.mjs\");\n/* harmony import */ var _openai_agents_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @openai/agents-core */ \"(ssr)/./node_modules/.pnpm/@openai+agents-core@0.0.2_ws@8.18.2_zod@3.25.51/node_modules/@openai/agents-core/dist/index.mjs\");\n/* harmony import */ var _logger_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./logger.mjs */ \"(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/logger.mjs\");\n/* harmony import */ var _openaiRealtimeBase_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./openaiRealtimeBase.mjs */ \"(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/openaiRealtimeBase.mjs\");\n/* harmony import */ var _openaiRealtimeEvents_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./openaiRealtimeEvents.mjs */ \"(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/openaiRealtimeEvents.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils.mjs */ \"(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/utils.mjs\");\n/// <reference lib=\"dom\" />\n\n\n\n\n\n\n/**\n * Transport layer that's handling the connection between the client and OpenAI's Realtime API\n * via WebRTC. While this transport layer is designed to be used within a RealtimeSession, it can\n * also be used standalone if you want to have a direct connection to the Realtime API.\n *\n * Unless you specify a `mediaStream` or `audioElement` option, the transport layer will\n * automatically configure the microphone and audio output to be used by the session.\n */\nclass OpenAIRealtimeWebRTC extends _openaiRealtimeBase_mjs__WEBPACK_IMPORTED_MODULE_3__.OpenAIRealtimeBase {\n    options;\n    #url;\n    #state = {\n        status: 'disconnected',\n        peerConnection: undefined,\n        dataChannel: undefined,\n    };\n    #useInsecureApiKey;\n    #ongoingResponse = false;\n    #muted = false;\n    constructor(options = {}) {\n        if (typeof RTCPeerConnection === 'undefined') {\n            throw new Error('WebRTC is not supported in this environment');\n        }\n        super(options);\n        this.options = options;\n        this.#url = options.baseUrl ?? `https://api.openai.com/v1/realtime`;\n        this.#useInsecureApiKey = options.useInsecureApiKey ?? false;\n    }\n    /**\n     * The current status of the WebRTC connection.\n     */\n    get status() {\n        return this.#state.status;\n    }\n    /**\n     * The current connection state of the WebRTC connection including the peer connection and data\n     * channel.\n     */\n    get connectionState() {\n        return this.#state;\n    }\n    /**\n     * Whether the session is muted.\n     */\n    get muted() {\n        return this.#muted;\n    }\n    /**\n     * Connect to the Realtime API. This will establish the connection to the OpenAI Realtime API\n     * via WebRTC.\n     *\n     * If you are using a browser, the transport layer will also automatically configure the\n     * microphone and audio output to be used by the session.\n     *\n     * @param options - The options for the connection.\n     */\n    async connect(options) {\n        if (this.#state.status === 'connected') {\n            return;\n        }\n        if (this.#state.status === 'connecting') {\n            _logger_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].warn('Realtime connection already in progress. Please await original promise');\n        }\n        const model = options.model ?? this.currentModel;\n        this.currentModel = model;\n        const baseUrl = options.url ?? this.#url;\n        const apiKey = await this._getApiKey(options);\n        const isClientKey = typeof apiKey === 'string' && apiKey.startsWith('ek_');\n        if ((0,_openai_agents_core_shims__WEBPACK_IMPORTED_MODULE_0__.isBrowserEnvironment)() && !this.#useInsecureApiKey && !isClientKey) {\n            throw new _openai_agents_core__WEBPACK_IMPORTED_MODULE_1__.UserError('Using the WebRTC connection in a browser environment requires an insecure API key. Please use a WebSocket connection instead or set the useInsecureApiKey option to true.');\n        }\n        // eslint-disable-next-line no-async-promise-executor\n        return new Promise(async (resolve, reject) => {\n            try {\n                const userSessionConfig = {\n                    ...(options.initialSessionConfig || {}),\n                    model: this.currentModel,\n                };\n                const connectionUrl = new URL(baseUrl);\n                const peerConnection = new RTCPeerConnection();\n                const dataChannel = peerConnection.createDataChannel('oai-events');\n                this.#state = {\n                    status: 'connecting',\n                    peerConnection,\n                    dataChannel,\n                };\n                this.emit('connection_change', this.#state.status);\n                dataChannel.addEventListener('open', () => {\n                    this.#state = {\n                        status: 'connected',\n                        peerConnection,\n                        dataChannel,\n                    };\n                    // Sending the session config again here once the channel is connected to ensure\n                    // that the session config is sent to the server before the first response is received\n                    // Setting it on connection should work but the config is not being validated on the\n                    // server. This triggers a validation error if the config is not valid.\n                    this.updateSessionConfig(userSessionConfig);\n                    this.emit('connection_change', this.#state.status);\n                    this._onOpen();\n                    resolve();\n                });\n                dataChannel.addEventListener('error', (event) => {\n                    this.close();\n                    this._onError(event);\n                    reject(event);\n                });\n                dataChannel.addEventListener('message', (event) => {\n                    this._onMessage(event);\n                    const { data: parsed, isGeneric } = (0,_openaiRealtimeEvents_mjs__WEBPACK_IMPORTED_MODULE_4__.parseRealtimeEvent)(event);\n                    if (!parsed || isGeneric) {\n                        return;\n                    }\n                    if (parsed.type === 'response.created') {\n                        this.#ongoingResponse = true;\n                    }\n                    else if (parsed.type === 'response.done') {\n                        this.#ongoingResponse = false;\n                    }\n                    if (parsed.type === 'session.created') {\n                        this._tracingConfig = parsed.session.tracing;\n                        // Trying to turn on tracing after the session is created\n                        this._updateTracingConfig(userSessionConfig.tracing ?? 'auto');\n                    }\n                });\n                // set up audio playback\n                const audioElement = this.options.audioElement ?? document.createElement('audio');\n                audioElement.autoplay = true;\n                peerConnection.ontrack = (event) => {\n                    audioElement.srcObject = event.streams[0];\n                };\n                // get microphone stream\n                const stream = this.options.mediaStream ??\n                    (await navigator.mediaDevices.getUserMedia({\n                        audio: true,\n                    }));\n                peerConnection.addTrack(stream.getAudioTracks()[0]);\n                const offer = await peerConnection.createOffer();\n                await peerConnection.setLocalDescription(offer);\n                if (!offer.sdp) {\n                    throw new Error('Failed to create offer');\n                }\n                const sessionConfig = {\n                    ...this._getMergedSessionConfig(userSessionConfig),\n                    model: this.currentModel,\n                };\n                const data = new FormData();\n                data.append('sdp', offer.sdp);\n                data.append('session', JSON.stringify(sessionConfig));\n                const sdpResponse = await fetch(connectionUrl, {\n                    method: 'POST',\n                    body: data,\n                    headers: {\n                        Authorization: `Bearer ${apiKey}`,\n                        'X-OpenAI-Agents-SDK': _utils_mjs__WEBPACK_IMPORTED_MODULE_5__.HEADERS['X-OpenAI-Agents-SDK'],\n                    },\n                });\n                const answer = {\n                    type: 'answer',\n                    sdp: await sdpResponse.text(),\n                };\n                await peerConnection.setRemoteDescription(answer);\n            }\n            catch (error) {\n                this.close();\n                this._onError(error);\n                reject(error);\n            }\n        });\n    }\n    /**\n     * Send an event to the Realtime API. This will stringify the event and send it directly to the\n     * API. This can be used if you want to take control over the connection and send events manually.\n     *\n     * @param event - The event to send.\n     */\n    sendEvent(event) {\n        if (!this.#state.dataChannel ||\n            this.#state.dataChannel.readyState !== 'open') {\n            throw new Error('WebRTC data channel is not connected. Make sure you call `connect()` before sending events.');\n        }\n        this.#state.dataChannel.send(JSON.stringify(event));\n    }\n    /**\n     * Mute or unmute the session.\n     * @param muted - Whether to mute the session.\n     */\n    mute(muted) {\n        this.#muted = muted;\n        if (this.#state.peerConnection) {\n            const peerConnection = this.#state.peerConnection;\n            peerConnection.getSenders().forEach((sender) => {\n                if (sender.track) {\n                    sender.track.enabled = !muted;\n                }\n            });\n        }\n    }\n    /**\n     * Close the connection to the Realtime API and disconnects the underlying WebRTC connection.\n     */\n    close() {\n        if (this.#state.dataChannel) {\n            this.#state.dataChannel.close();\n        }\n        if (this.#state.peerConnection) {\n            const peerConnection = this.#state.peerConnection;\n            peerConnection.getSenders().forEach((sender) => {\n                sender.track?.stop();\n            });\n            peerConnection.close();\n        }\n        if (this.#state.status !== 'disconnected') {\n            this.#state = {\n                status: 'disconnected',\n                peerConnection: undefined,\n                dataChannel: undefined,\n            };\n            this.emit('connection_change', this.#state.status);\n            this._onClose();\n        }\n    }\n    /**\n     * Interrupt the current response if one is ongoing and clear the audio buffer so that the agent\n     * stops talking.\n     */\n    interrupt() {\n        if (this.#ongoingResponse) {\n            this.sendEvent({\n                type: 'response.cancel',\n            });\n        }\n        this.sendEvent({\n            type: 'output_audio_buffer.clear',\n        });\n    }\n}\n//# sourceMappingURL=openaiRealtimeWebRtc.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW5haSthZ2VudHMtcmVhbHRpbWVAMC4wLjJfem9kQDMuMjUuNTEvbm9kZV9tb2R1bGVzL0BvcGVuYWkvYWdlbnRzLXJlYWx0aW1lL2Rpc3Qvb3BlbmFpUmVhbHRpbWVXZWJSdGMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNrRTtBQUNsQjtBQUNkO0FBQzZCO0FBQ0M7QUFDMUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLG1DQUFtQyx1RUFBa0I7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksbURBQU07QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwrRUFBb0I7QUFDaEMsc0JBQXNCLDBEQUFTO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQ7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLDRCQUE0QiwwQkFBMEIsRUFBRSw2RUFBa0I7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELE9BQU87QUFDeEQsK0NBQStDLCtDQUFPO0FBQ3RELHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW5haW55dHcvLi9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW5haSthZ2VudHMtcmVhbHRpbWVAMC4wLjJfem9kQDMuMjUuNTEvbm9kZV9tb2R1bGVzL0BvcGVuYWkvYWdlbnRzLXJlYWx0aW1lL2Rpc3Qvb3BlbmFpUmVhbHRpbWVXZWJSdGMubWpzP2Q1ZjEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgbGliPVwiZG9tXCIgLz5cbmltcG9ydCB7IGlzQnJvd3NlckVudmlyb25tZW50IH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuaW1wb3J0IHsgVXNlckVycm9yIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IE9wZW5BSVJlYWx0aW1lQmFzZSwgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUJhc2UubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVJlYWx0aW1lRXZlbnQgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUV2ZW50cy5tanNcIjtcbmltcG9ydCB7IEhFQURFUlMgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbi8qKlxuICogVHJhbnNwb3J0IGxheWVyIHRoYXQncyBoYW5kbGluZyB0aGUgY29ubmVjdGlvbiBiZXR3ZWVuIHRoZSBjbGllbnQgYW5kIE9wZW5BSSdzIFJlYWx0aW1lIEFQSVxuICogdmlhIFdlYlJUQy4gV2hpbGUgdGhpcyB0cmFuc3BvcnQgbGF5ZXIgaXMgZGVzaWduZWQgdG8gYmUgdXNlZCB3aXRoaW4gYSBSZWFsdGltZVNlc3Npb24sIGl0IGNhblxuICogYWxzbyBiZSB1c2VkIHN0YW5kYWxvbmUgaWYgeW91IHdhbnQgdG8gaGF2ZSBhIGRpcmVjdCBjb25uZWN0aW9uIHRvIHRoZSBSZWFsdGltZSBBUEkuXG4gKlxuICogVW5sZXNzIHlvdSBzcGVjaWZ5IGEgYG1lZGlhU3RyZWFtYCBvciBgYXVkaW9FbGVtZW50YCBvcHRpb24sIHRoZSB0cmFuc3BvcnQgbGF5ZXIgd2lsbFxuICogYXV0b21hdGljYWxseSBjb25maWd1cmUgdGhlIG1pY3JvcGhvbmUgYW5kIGF1ZGlvIG91dHB1dCB0byBiZSB1c2VkIGJ5IHRoZSBzZXNzaW9uLlxuICovXG5leHBvcnQgY2xhc3MgT3BlbkFJUmVhbHRpbWVXZWJSVEMgZXh0ZW5kcyBPcGVuQUlSZWFsdGltZUJhc2Uge1xuICAgIG9wdGlvbnM7XG4gICAgI3VybDtcbiAgICAjc3RhdGUgPSB7XG4gICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgIHBlZXJDb25uZWN0aW9uOiB1bmRlZmluZWQsXG4gICAgICAgIGRhdGFDaGFubmVsOiB1bmRlZmluZWQsXG4gICAgfTtcbiAgICAjdXNlSW5zZWN1cmVBcGlLZXk7XG4gICAgI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgICNtdXRlZCA9IGZhbHNlO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBpZiAodHlwZW9mIFJUQ1BlZXJDb25uZWN0aW9uID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJSVEMgaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuI3VybCA9IG9wdGlvbnMuYmFzZVVybCA/PyBgaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MS9yZWFsdGltZWA7XG4gICAgICAgIHRoaXMuI3VzZUluc2VjdXJlQXBpS2V5ID0gb3B0aW9ucy51c2VJbnNlY3VyZUFwaUtleSA/PyBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgc3RhdHVzIG9mIHRoZSBXZWJSVEMgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgc3RhdHVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RhdGUuc3RhdHVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBjb25uZWN0aW9uIHN0YXRlIG9mIHRoZSBXZWJSVEMgY29ubmVjdGlvbiBpbmNsdWRpbmcgdGhlIHBlZXIgY29ubmVjdGlvbiBhbmQgZGF0YVxuICAgICAqIGNoYW5uZWwuXG4gICAgICovXG4gICAgZ2V0IGNvbm5lY3Rpb25TdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoZSBzZXNzaW9uIGlzIG11dGVkLlxuICAgICAqL1xuICAgIGdldCBtdXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI211dGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25uZWN0IHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgd2lsbCBlc3RhYmxpc2ggdGhlIGNvbm5lY3Rpb24gdG8gdGhlIE9wZW5BSSBSZWFsdGltZSBBUElcbiAgICAgKiB2aWEgV2ViUlRDLlxuICAgICAqXG4gICAgICogSWYgeW91IGFyZSB1c2luZyBhIGJyb3dzZXIsIHRoZSB0cmFuc3BvcnQgbGF5ZXIgd2lsbCBhbHNvIGF1dG9tYXRpY2FsbHkgY29uZmlndXJlIHRoZVxuICAgICAqIG1pY3JvcGhvbmUgYW5kIGF1ZGlvIG91dHB1dCB0byBiZSB1c2VkIGJ5IHRoZSBzZXNzaW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBmb3IgdGhlIGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgYXN5bmMgY29ubmVjdChvcHRpb25zKSB7XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5zdGF0dXMgPT09ICdjb25uZWN0ZWQnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnN0YXR1cyA9PT0gJ2Nvbm5lY3RpbmcnKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignUmVhbHRpbWUgY29ubmVjdGlvbiBhbHJlYWR5IGluIHByb2dyZXNzLiBQbGVhc2UgYXdhaXQgb3JpZ2luYWwgcHJvbWlzZScpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1vZGVsID0gb3B0aW9ucy5tb2RlbCA/PyB0aGlzLmN1cnJlbnRNb2RlbDtcbiAgICAgICAgdGhpcy5jdXJyZW50TW9kZWwgPSBtb2RlbDtcbiAgICAgICAgY29uc3QgYmFzZVVybCA9IG9wdGlvbnMudXJsID8/IHRoaXMuI3VybDtcbiAgICAgICAgY29uc3QgYXBpS2V5ID0gYXdhaXQgdGhpcy5fZ2V0QXBpS2V5KG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBpc0NsaWVudEtleSA9IHR5cGVvZiBhcGlLZXkgPT09ICdzdHJpbmcnICYmIGFwaUtleS5zdGFydHNXaXRoKCdla18nKTtcbiAgICAgICAgaWYgKGlzQnJvd3NlckVudmlyb25tZW50KCkgJiYgIXRoaXMuI3VzZUluc2VjdXJlQXBpS2V5ICYmICFpc0NsaWVudEtleSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignVXNpbmcgdGhlIFdlYlJUQyBjb25uZWN0aW9uIGluIGEgYnJvd3NlciBlbnZpcm9ubWVudCByZXF1aXJlcyBhbiBpbnNlY3VyZSBBUEkga2V5LiBQbGVhc2UgdXNlIGEgV2ViU29ja2V0IGNvbm5lY3Rpb24gaW5zdGVhZCBvciBzZXQgdGhlIHVzZUluc2VjdXJlQXBpS2V5IG9wdGlvbiB0byB0cnVlLicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1hc3luYy1wcm9taXNlLWV4ZWN1dG9yXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJTZXNzaW9uQ29uZmlnID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi4ob3B0aW9ucy5pbml0aWFsU2Vzc2lvbkNvbmZpZyB8fCB7fSksXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsOiB0aGlzLmN1cnJlbnRNb2RlbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb25VcmwgPSBuZXcgVVJMKGJhc2VVcmwpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBlZXJDb25uZWN0aW9uID0gbmV3IFJUQ1BlZXJDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YUNoYW5uZWwgPSBwZWVyQ29ubmVjdGlvbi5jcmVhdGVEYXRhQ2hhbm5lbCgnb2FpLWV2ZW50cycpO1xuICAgICAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdjb25uZWN0aW5nJyxcbiAgICAgICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwuYWRkRXZlbnRMaXN0ZW5lcignb3BlbicsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdjb25uZWN0ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2VuZGluZyB0aGUgc2Vzc2lvbiBjb25maWcgYWdhaW4gaGVyZSBvbmNlIHRoZSBjaGFubmVsIGlzIGNvbm5lY3RlZCB0byBlbnN1cmVcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhhdCB0aGUgc2Vzc2lvbiBjb25maWcgaXMgc2VudCB0byB0aGUgc2VydmVyIGJlZm9yZSB0aGUgZmlyc3QgcmVzcG9uc2UgaXMgcmVjZWl2ZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gU2V0dGluZyBpdCBvbiBjb25uZWN0aW9uIHNob3VsZCB3b3JrIGJ1dCB0aGUgY29uZmlnIGlzIG5vdCBiZWluZyB2YWxpZGF0ZWQgb24gdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIHNlcnZlci4gVGhpcyB0cmlnZ2VycyBhIHZhbGlkYXRpb24gZXJyb3IgaWYgdGhlIGNvbmZpZyBpcyBub3QgdmFsaWQuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2Vzc2lvbkNvbmZpZyh1c2VyU2Vzc2lvbkNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbk9wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25FcnJvcihldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChldmVudCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbk1lc3NhZ2UoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGE6IHBhcnNlZCwgaXNHZW5lcmljIH0gPSBwYXJzZVJlYWx0aW1lRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZCB8fCBpc0dlbmVyaWMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5jcmVhdGVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmRvbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdzZXNzaW9uLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90cmFjaW5nQ29uZmlnID0gcGFyc2VkLnNlc3Npb24udHJhY2luZztcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyeWluZyB0byB0dXJuIG9uIHRyYWNpbmcgYWZ0ZXIgdGhlIHNlc3Npb24gaXMgY3JlYXRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlVHJhY2luZ0NvbmZpZyh1c2VyU2Vzc2lvbkNvbmZpZy50cmFjaW5nID8/ICdhdXRvJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBzZXQgdXAgYXVkaW8gcGxheWJhY2tcbiAgICAgICAgICAgICAgICBjb25zdCBhdWRpb0VsZW1lbnQgPSB0aGlzLm9wdGlvbnMuYXVkaW9FbGVtZW50ID8/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7XG4gICAgICAgICAgICAgICAgYXVkaW9FbGVtZW50LmF1dG9wbGF5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbi5vbnRyYWNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvRWxlbWVudC5zcmNPYmplY3QgPSBldmVudC5zdHJlYW1zWzBdO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gZ2V0IG1pY3JvcGhvbmUgc3RyZWFtXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gdGhpcy5vcHRpb25zLm1lZGlhU3RyZWFtID8/XG4gICAgICAgICAgICAgICAgICAgIChhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpbzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLmFkZFRyYWNrKHN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdKTtcbiAgICAgICAgICAgICAgICBjb25zdCBvZmZlciA9IGF3YWl0IHBlZXJDb25uZWN0aW9uLmNyZWF0ZU9mZmVyKCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgcGVlckNvbm5lY3Rpb24uc2V0TG9jYWxEZXNjcmlwdGlvbihvZmZlcik7XG4gICAgICAgICAgICAgICAgaWYgKCFvZmZlci5zZHApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIG9mZmVyJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHNlc3Npb25Db25maWcgPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuX2dldE1lcmdlZFNlc3Npb25Db25maWcodXNlclNlc3Npb25Db25maWcpLFxuICAgICAgICAgICAgICAgICAgICBtb2RlbDogdGhpcy5jdXJyZW50TW9kZWwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgICAgICAgICAgZGF0YS5hcHBlbmQoJ3NkcCcsIG9mZmVyLnNkcCk7XG4gICAgICAgICAgICAgICAgZGF0YS5hcHBlbmQoJ3Nlc3Npb24nLCBKU09OLnN0cmluZ2lmeShzZXNzaW9uQ29uZmlnKSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2RwUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChjb25uZWN0aW9uVXJsLCB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICBib2R5OiBkYXRhLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YXBpS2V5fWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAnWC1PcGVuQUktQWdlbnRzLVNESyc6IEhFQURFUlNbJ1gtT3BlbkFJLUFnZW50cy1TREsnXSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBhbnN3ZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdhbnN3ZXInLFxuICAgICAgICAgICAgICAgICAgICBzZHA6IGF3YWl0IHNkcFJlc3BvbnNlLnRleHQoKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGF3YWl0IHBlZXJDb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKGFuc3dlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fb25FcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYW4gZXZlbnQgdG8gdGhlIFJlYWx0aW1lIEFQSS4gVGhpcyB3aWxsIHN0cmluZ2lmeSB0aGUgZXZlbnQgYW5kIHNlbmQgaXQgZGlyZWN0bHkgdG8gdGhlXG4gICAgICogQVBJLiBUaGlzIGNhbiBiZSB1c2VkIGlmIHlvdSB3YW50IHRvIHRha2UgY29udHJvbCBvdmVyIHRoZSBjb25uZWN0aW9uIGFuZCBzZW5kIGV2ZW50cyBtYW51YWxseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBldmVudCAtIFRoZSBldmVudCB0byBzZW5kLlxuICAgICAqL1xuICAgIHNlbmRFdmVudChldmVudCkge1xuICAgICAgICBpZiAoIXRoaXMuI3N0YXRlLmRhdGFDaGFubmVsIHx8XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZS5kYXRhQ2hhbm5lbC5yZWFkeVN0YXRlICE9PSAnb3BlbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV2ViUlRDIGRhdGEgY2hhbm5lbCBpcyBub3QgY29ubmVjdGVkLiBNYWtlIHN1cmUgeW91IGNhbGwgYGNvbm5lY3QoKWAgYmVmb3JlIHNlbmRpbmcgZXZlbnRzLicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXRlLmRhdGFDaGFubmVsLnNlbmQoSlNPTi5zdHJpbmdpZnkoZXZlbnQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTXV0ZSBvciB1bm11dGUgdGhlIHNlc3Npb24uXG4gICAgICogQHBhcmFtIG11dGVkIC0gV2hldGhlciB0byBtdXRlIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIG11dGUobXV0ZWQpIHtcbiAgICAgICAgdGhpcy4jbXV0ZWQgPSBtdXRlZDtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnBlZXJDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBwZWVyQ29ubmVjdGlvbiA9IHRoaXMuI3N0YXRlLnBlZXJDb25uZWN0aW9uO1xuICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24uZ2V0U2VuZGVycygpLmZvckVhY2goKHNlbmRlcikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChzZW5kZXIudHJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgc2VuZGVyLnRyYWNrLmVuYWJsZWQgPSAhbXV0ZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2UgdGhlIGNvbm5lY3Rpb24gdG8gdGhlIFJlYWx0aW1lIEFQSSBhbmQgZGlzY29ubmVjdHMgdGhlIHVuZGVybHlpbmcgV2ViUlRDIGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5kYXRhQ2hhbm5lbCkge1xuICAgICAgICAgICAgdGhpcy4jc3RhdGUuZGF0YUNoYW5uZWwuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jc3RhdGUucGVlckNvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHBlZXJDb25uZWN0aW9uID0gdGhpcy4jc3RhdGUucGVlckNvbm5lY3Rpb247XG4gICAgICAgICAgICBwZWVyQ29ubmVjdGlvbi5nZXRTZW5kZXJzKCkuZm9yRWFjaCgoc2VuZGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgc2VuZGVyLnRyYWNrPy5zdG9wKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnN0YXR1cyAhPT0gJ2Rpc2Nvbm5lY3RlZCcpIHtcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb246IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgdGhpcy5fb25DbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVycnVwdCB0aGUgY3VycmVudCByZXNwb25zZSBpZiBvbmUgaXMgb25nb2luZyBhbmQgY2xlYXIgdGhlIGF1ZGlvIGJ1ZmZlciBzbyB0aGF0IHRoZSBhZ2VudFxuICAgICAqIHN0b3BzIHRhbGtpbmcuXG4gICAgICovXG4gICAgaW50ZXJydXB0KCkge1xuICAgICAgICBpZiAodGhpcy4jb25nb2luZ1Jlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlLmNhbmNlbCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnb3V0cHV0X2F1ZGlvX2J1ZmZlci5jbGVhcicsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wZW5haVJlYWx0aW1lV2ViUnRjLm1qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/openaiRealtimeWebRtc.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/openaiRealtimeWebsocket.mjs":
/*!********************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/openaiRealtimeWebsocket.mjs ***!
  \********************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OpenAIRealtimeWebSocket: () => (/* binding */ OpenAIRealtimeWebSocket)\n/* harmony export */ });\n/* harmony import */ var _openai_agents_realtime_shims__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openai/agents-realtime/_shims */ \"(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/shims/shims-node.mjs\");\n/* harmony import */ var _openaiRealtimeBase_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./openaiRealtimeBase.mjs */ \"(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/openaiRealtimeBase.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.mjs */ \"(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/utils.mjs\");\n/* harmony import */ var _openai_agents_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @openai/agents-core */ \"(ssr)/./node_modules/.pnpm/@openai+agents-core@0.0.2_ws@8.18.2_zod@3.25.51/node_modules/@openai/agents-core/dist/index.mjs\");\n/* harmony import */ var _openaiRealtimeEvents_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./openaiRealtimeEvents.mjs */ \"(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/openaiRealtimeEvents.mjs\");\n\n\n\n\n\n/**\n * Transport layer that's handling the connection between the client and OpenAI's Realtime API\n * via WebSockets. While this transport layer is designed to be used within a RealtimeSession, it\n * can also be used standalone if you want to have a direct connection to the Realtime API.\n */\nclass OpenAIRealtimeWebSocket extends _openaiRealtimeBase_mjs__WEBPACK_IMPORTED_MODULE_1__.OpenAIRealtimeBase {\n    #apiKey;\n    #url;\n    #state = {\n        status: 'disconnected',\n        websocket: undefined,\n    };\n    #useInsecureApiKey;\n    #currentItemId;\n    #currentAudioContentIndex;\n    /**\n     * Timestamp maintained by the transport layer to aid with the calculation of the elapsed time\n     * since the response started to compute the right interruption time.\n     *\n     * Mostly internal but might be used by extended transport layers for their interruption\n     * calculation.\n     */\n    _firstAudioTimestamp;\n    _audioLengthMs = 0;\n    #ongoingResponse = false;\n    constructor(options = {}) {\n        super(options);\n        this.#url = `wss://api.openai.com/v1/realtime?model=${this.currentModel}`;\n        this.#useInsecureApiKey = options.useInsecureApiKey ?? false;\n    }\n    /**\n     * The current status of the WebSocket connection.\n     */\n    get status() {\n        return this.#state.status;\n    }\n    /**\n     * The current connection state of the WebSocket connection.\n     */\n    get connectionState() {\n        return this.#state;\n    }\n    /**\n     * Always returns `null` as the WebSocket transport layer does not handle muting. Instead,\n     * this should be handled by the client by not triggering the `sendAudio` method.\n     */\n    get muted() {\n        return null;\n    }\n    /**\n     * The current item ID of the ongoing response.\n     */\n    get currentItemId() {\n        return this.#currentItemId;\n    }\n    /**\n     * Triggers the `audio` event that a client might listen to to receive the audio buffer.\n     * Protected for you to be able to override and disable emitting this event in case your extended\n     * transport layer handles audio internally.\n     *\n     * @param audioEvent - The audio event to emit.\n     */\n    _onAudio(audioEvent) {\n        this.emit('audio', audioEvent);\n    }\n    #setupWebSocket(resolve, reject, sessionConfig) {\n        if (this.#state.websocket) {\n            resolve();\n            return;\n        }\n        if (!this.#apiKey) {\n            throw new _openai_agents_core__WEBPACK_IMPORTED_MODULE_3__.UserError('API key is not set. Please call `connect()` with an API key first.');\n        }\n        if ((0,_openai_agents_realtime_shims__WEBPACK_IMPORTED_MODULE_0__.isBrowserEnvironment)() &&\n            !this.#apiKey.startsWith('ek_') &&\n            !this.#useInsecureApiKey) {\n            throw new _openai_agents_core__WEBPACK_IMPORTED_MODULE_3__.UserError('Using the WebSocket connection in a browser environment requires an ephemeral client key. If you have to use a regular API key, set the `useInsecureApiKey` option to true.');\n        }\n        const websocketArguments = (0,_openai_agents_realtime_shims__WEBPACK_IMPORTED_MODULE_0__.isBrowserEnvironment)()\n            ? [\n                'realtime',\n                // Auth\n                'openai-insecure-api-key.' + this.#apiKey,\n                // Beta protocol, required\n                'openai-beta.realtime-v1',\n                // Version header\n                _utils_mjs__WEBPACK_IMPORTED_MODULE_2__.WEBSOCKET_META,\n            ]\n            : {\n                headers: {\n                    Authorization: `Bearer ${this.#apiKey}`,\n                    'OpenAI-Beta': 'realtime=v1',\n                    ..._utils_mjs__WEBPACK_IMPORTED_MODULE_2__.HEADERS,\n                },\n            };\n        const ws = new _openai_agents_realtime_shims__WEBPACK_IMPORTED_MODULE_0__.WebSocket(this.#url, websocketArguments);\n        this.#state = {\n            status: 'connecting',\n            websocket: ws,\n        };\n        this.emit('connection_change', this.#state.status);\n        ws.addEventListener('open', () => {\n            this.#state = {\n                status: 'connected',\n                websocket: ws,\n            };\n            this.emit('connection_change', this.#state.status);\n            this._onOpen();\n            resolve();\n        });\n        ws.addEventListener('error', (error) => {\n            this._onError(error);\n            this.#state = {\n                status: 'disconnected',\n                websocket: undefined,\n            };\n            this.emit('connection_change', this.#state.status);\n            reject(error);\n        });\n        ws.addEventListener('message', (message) => {\n            this._onMessage(message);\n            const { data: parsed, isGeneric } = (0,_openaiRealtimeEvents_mjs__WEBPACK_IMPORTED_MODULE_4__.parseRealtimeEvent)(message);\n            if (!parsed || isGeneric) {\n                return;\n            }\n            if (parsed.type === 'response.audio.delta') {\n                this.#currentAudioContentIndex = parsed.content_index;\n                this.#currentItemId = parsed.item_id;\n                if (this._firstAudioTimestamp === undefined) {\n                    // If the response start timestamp is not set, we set it to the current time.\n                    // This is used to calculate the elapsed time for interruption.\n                    this._firstAudioTimestamp = Date.now();\n                    this._audioLengthMs = 0;\n                }\n                const buff = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.base64ToArrayBuffer)(parsed.delta);\n                // calculate the audio length in milliseconds assuming 24kHz pcm16le\n                this._audioLengthMs += buff.byteLength / 24 / 2; // 24kHz * 2 bytes per sample\n                const audioEvent = {\n                    type: 'audio',\n                    data: buff,\n                    responseId: parsed.response_id,\n                };\n                this._onAudio(audioEvent);\n            }\n            else if (parsed.type === 'input_audio_buffer.speech_started') {\n                this.interrupt();\n            }\n            else if (parsed.type === 'response.created') {\n                this.#ongoingResponse = true;\n            }\n            else if (parsed.type === 'response.done') {\n                this.#ongoingResponse = false;\n            }\n            else if (parsed.type === 'session.created') {\n                this._tracingConfig = parsed.session.tracing;\n                // Trying to turn on tracing after the session is created\n                this._updateTracingConfig(sessionConfig.tracing ?? 'auto');\n            }\n        });\n        ws.addEventListener('close', () => {\n            this.#state = {\n                status: 'disconnected',\n                websocket: undefined,\n            };\n            this.emit('connection_change', this.#state.status);\n            this._onClose();\n        });\n    }\n    async connect(options) {\n        const model = options.model ?? this.currentModel;\n        this.currentModel = model;\n        this.#apiKey = await this._getApiKey(options);\n        this.#url =\n            options.url ??\n                `wss://api.openai.com/v1/realtime?model=${this.currentModel}`;\n        const sessionConfig = {\n            ...(options.initialSessionConfig || {}),\n            model: this.currentModel,\n        };\n        await new Promise((resolve, reject) => {\n            try {\n                this.#setupWebSocket(resolve, reject, sessionConfig);\n            }\n            catch (error) {\n                reject(error);\n            }\n        });\n        await this.updateSessionConfig(sessionConfig);\n    }\n    /**\n     * Send an event to the Realtime API. This will stringify the event and send it directly to the\n     * API. This can be used if you want to take control over the connection and send events manually.\n     *\n     * @param event - The event to send.\n     */\n    sendEvent(event) {\n        if (!this.#state.websocket) {\n            throw new Error('WebSocket is not connected. Make sure you call `connect()` before sending events.');\n        }\n        this.#state.websocket.send(JSON.stringify(event));\n    }\n    /**\n     * Close the WebSocket connection.\n     *\n     * This will also reset any internal connection tracking used for interruption handling.\n     */\n    close() {\n        this.#state.websocket?.close();\n        this.#currentItemId = undefined;\n        this._firstAudioTimestamp = undefined;\n        this._audioLengthMs = 0;\n        this.#currentAudioContentIndex = undefined;\n    }\n    /**\n     * Will throw an error as the WebSocket transport layer does not support muting.\n     */\n    mute(_muted) {\n        throw new Error('Mute is not supported for the WebSocket transport. You have to mute the audio input yourself.');\n    }\n    /**\n     * Send an audio buffer to the Realtime API. This is used for your client to send audio to the\n     * model to respond.\n     *\n     * @param audio - The audio buffer to send.\n     * @param options - The options for the audio buffer.\n     */\n    sendAudio(audio, options = {}) {\n        if (this.#state.status === 'connected') {\n            super.sendAudio(audio, options);\n        }\n    }\n    /**\n     * Send a cancel response event to the Realtime API. This is used to cancel an ongoing\n     *  response that the model is currently generating.\n     */\n    _cancelResponse() {\n        // cancel the ongoing response\n        if (this.#ongoingResponse) {\n            this.sendEvent({\n                type: 'response.cancel',\n            });\n        }\n    }\n    /**\n     * Do NOT call this method directly. Call `interrupt()` instead for proper interruption handling.\n     *\n     * This method is used to send the right events to the API to inform the model that the user has\n     * interrupted the response. It might be overridden/extended by an extended transport layer. See\n     * the `TwilioRealtimeTransportLayer` for an example.\n     *\n     * @param elapsedTime - The elapsed time since the response started.\n     */\n    _interrupt(elapsedTime) {\n        // immediately emit this event so the client can stop playing audio\n        this.emit('audio_interrupted');\n        this.sendEvent({\n            type: 'conversation.item.truncate',\n            item_id: this.#currentItemId,\n            content_index: this.#currentAudioContentIndex,\n            audio_end_ms: elapsedTime,\n        });\n    }\n    /**\n     * Interrupt the ongoing response. This method is triggered automatically by the client when\n     * voice activity detection (VAD) is enabled (default) as well as when an output guardrail got\n     * triggered.\n     *\n     * You can also call this method directly if you want to interrupt the conversation for example\n     * based on an event in the client.\n     */\n    interrupt() {\n        if (!this.#currentItemId || typeof this._firstAudioTimestamp !== 'number') {\n            return;\n        }\n        this._cancelResponse();\n        const elapsedTime = Date.now() - this._firstAudioTimestamp;\n        console.log(`Interrupting response after ${elapsedTime}ms`);\n        console.log(`Audio length: ${this._audioLengthMs}ms`);\n        if (elapsedTime >= 0 && elapsedTime < this._audioLengthMs) {\n            this._interrupt(elapsedTime);\n        }\n        this.#currentItemId = undefined;\n        this._firstAudioTimestamp = undefined;\n        this._audioLengthMs = 0;\n        this.#currentAudioContentIndex = undefined;\n    }\n}\n//# sourceMappingURL=openaiRealtimeWebsocket.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW5haSthZ2VudHMtcmVhbHRpbWVAMC4wLjJfem9kQDMuMjUuNTEvbm9kZV9tb2R1bGVzL0BvcGVuYWkvYWdlbnRzLXJlYWx0aW1lL2Rpc3Qvb3BlbmFpUmVhbHRpbWVXZWJzb2NrZXQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFrRjtBQUNuQjtBQUNZO0FBQzNCO0FBQ2dCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxzQ0FBc0MsdUVBQWtCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0EsOERBQThELGtCQUFrQjtBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwwREFBUztBQUMvQjtBQUNBLFlBQVksbUZBQW9CO0FBQ2hDO0FBQ0E7QUFDQSxzQkFBc0IsMERBQVM7QUFDL0I7QUFDQSxtQ0FBbUMsbUZBQW9CO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHNEQUFjO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxhQUFhO0FBQzFEO0FBQ0EsdUJBQXVCLCtDQUFPO0FBQzlCLGlCQUFpQjtBQUNqQjtBQUNBLHVCQUF1QixvRUFBUztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxvQkFBb0IsMEJBQTBCLEVBQUUsNkVBQWtCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwrREFBbUI7QUFDaEQ7QUFDQSxpRUFBaUU7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELGtCQUFrQjtBQUM1RTtBQUNBLGtEQUFrRDtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxZQUFZO0FBQy9ELHFDQUFxQyxvQkFBb0I7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuYWlueXR3Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL0BvcGVuYWkrYWdlbnRzLXJlYWx0aW1lQDAuMC4yX3pvZEAzLjI1LjUxL25vZGVfbW9kdWxlcy9Ab3BlbmFpL2FnZW50cy1yZWFsdGltZS9kaXN0L29wZW5haVJlYWx0aW1lV2Vic29ja2V0Lm1qcz9lMDhmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzQnJvd3NlckVudmlyb25tZW50LCBXZWJTb2NrZXQsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtcmVhbHRpbWUvX3NoaW1zJztcbmltcG9ydCB7IE9wZW5BSVJlYWx0aW1lQmFzZSwgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUJhc2UubWpzXCI7XG5pbXBvcnQgeyBiYXNlNjRUb0FycmF5QnVmZmVyLCBIRUFERVJTLCBXRUJTT0NLRVRfTUVUQSB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuaW1wb3J0IHsgVXNlckVycm9yIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5pbXBvcnQgeyBwYXJzZVJlYWx0aW1lRXZlbnQgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUV2ZW50cy5tanNcIjtcbi8qKlxuICogVHJhbnNwb3J0IGxheWVyIHRoYXQncyBoYW5kbGluZyB0aGUgY29ubmVjdGlvbiBiZXR3ZWVuIHRoZSBjbGllbnQgYW5kIE9wZW5BSSdzIFJlYWx0aW1lIEFQSVxuICogdmlhIFdlYlNvY2tldHMuIFdoaWxlIHRoaXMgdHJhbnNwb3J0IGxheWVyIGlzIGRlc2lnbmVkIHRvIGJlIHVzZWQgd2l0aGluIGEgUmVhbHRpbWVTZXNzaW9uLCBpdFxuICogY2FuIGFsc28gYmUgdXNlZCBzdGFuZGFsb25lIGlmIHlvdSB3YW50IHRvIGhhdmUgYSBkaXJlY3QgY29ubmVjdGlvbiB0byB0aGUgUmVhbHRpbWUgQVBJLlxuICovXG5leHBvcnQgY2xhc3MgT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXQgZXh0ZW5kcyBPcGVuQUlSZWFsdGltZUJhc2Uge1xuICAgICNhcGlLZXk7XG4gICAgI3VybDtcbiAgICAjc3RhdGUgPSB7XG4gICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgIHdlYnNvY2tldDogdW5kZWZpbmVkLFxuICAgIH07XG4gICAgI3VzZUluc2VjdXJlQXBpS2V5O1xuICAgICNjdXJyZW50SXRlbUlkO1xuICAgICNjdXJyZW50QXVkaW9Db250ZW50SW5kZXg7XG4gICAgLyoqXG4gICAgICogVGltZXN0YW1wIG1haW50YWluZWQgYnkgdGhlIHRyYW5zcG9ydCBsYXllciB0byBhaWQgd2l0aCB0aGUgY2FsY3VsYXRpb24gb2YgdGhlIGVsYXBzZWQgdGltZVxuICAgICAqIHNpbmNlIHRoZSByZXNwb25zZSBzdGFydGVkIHRvIGNvbXB1dGUgdGhlIHJpZ2h0IGludGVycnVwdGlvbiB0aW1lLlxuICAgICAqXG4gICAgICogTW9zdGx5IGludGVybmFsIGJ1dCBtaWdodCBiZSB1c2VkIGJ5IGV4dGVuZGVkIHRyYW5zcG9ydCBsYXllcnMgZm9yIHRoZWlyIGludGVycnVwdGlvblxuICAgICAqIGNhbGN1bGF0aW9uLlxuICAgICAqL1xuICAgIF9maXJzdEF1ZGlvVGltZXN0YW1wO1xuICAgIF9hdWRpb0xlbmd0aE1zID0gMDtcbiAgICAjb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLiN1cmwgPSBgd3NzOi8vYXBpLm9wZW5haS5jb20vdjEvcmVhbHRpbWU/bW9kZWw9JHt0aGlzLmN1cnJlbnRNb2RlbH1gO1xuICAgICAgICB0aGlzLiN1c2VJbnNlY3VyZUFwaUtleSA9IG9wdGlvbnMudXNlSW5zZWN1cmVBcGlLZXkgPz8gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IHN0YXR1cyBvZiB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgZ2V0IHN0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXRlLnN0YXR1cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgY29ubmVjdGlvbiBzdGF0ZSBvZiB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgZ2V0IGNvbm5lY3Rpb25TdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbHdheXMgcmV0dXJucyBgbnVsbGAgYXMgdGhlIFdlYlNvY2tldCB0cmFuc3BvcnQgbGF5ZXIgZG9lcyBub3QgaGFuZGxlIG11dGluZy4gSW5zdGVhZCxcbiAgICAgKiB0aGlzIHNob3VsZCBiZSBoYW5kbGVkIGJ5IHRoZSBjbGllbnQgYnkgbm90IHRyaWdnZXJpbmcgdGhlIGBzZW5kQXVkaW9gIG1ldGhvZC5cbiAgICAgKi9cbiAgICBnZXQgbXV0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBpdGVtIElEIG9mIHRoZSBvbmdvaW5nIHJlc3BvbnNlLlxuICAgICAqL1xuICAgIGdldCBjdXJyZW50SXRlbUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jY3VycmVudEl0ZW1JZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcnMgdGhlIGBhdWRpb2AgZXZlbnQgdGhhdCBhIGNsaWVudCBtaWdodCBsaXN0ZW4gdG8gdG8gcmVjZWl2ZSB0aGUgYXVkaW8gYnVmZmVyLlxuICAgICAqIFByb3RlY3RlZCBmb3IgeW91IHRvIGJlIGFibGUgdG8gb3ZlcnJpZGUgYW5kIGRpc2FibGUgZW1pdHRpbmcgdGhpcyBldmVudCBpbiBjYXNlIHlvdXIgZXh0ZW5kZWRcbiAgICAgKiB0cmFuc3BvcnQgbGF5ZXIgaGFuZGxlcyBhdWRpbyBpbnRlcm5hbGx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGF1ZGlvRXZlbnQgLSBUaGUgYXVkaW8gZXZlbnQgdG8gZW1pdC5cbiAgICAgKi9cbiAgICBfb25BdWRpbyhhdWRpb0V2ZW50KSB7XG4gICAgICAgIHRoaXMuZW1pdCgnYXVkaW8nLCBhdWRpb0V2ZW50KTtcbiAgICB9XG4gICAgI3NldHVwV2ViU29ja2V0KHJlc29sdmUsIHJlamVjdCwgc2Vzc2lvbkNvbmZpZykge1xuICAgICAgICBpZiAodGhpcy4jc3RhdGUud2Vic29ja2V0KSB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLiNhcGlLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ0FQSSBrZXkgaXMgbm90IHNldC4gUGxlYXNlIGNhbGwgYGNvbm5lY3QoKWAgd2l0aCBhbiBBUEkga2V5IGZpcnN0LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0Jyb3dzZXJFbnZpcm9ubWVudCgpICYmXG4gICAgICAgICAgICAhdGhpcy4jYXBpS2V5LnN0YXJ0c1dpdGgoJ2VrXycpICYmXG4gICAgICAgICAgICAhdGhpcy4jdXNlSW5zZWN1cmVBcGlLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1VzaW5nIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvbiBpbiBhIGJyb3dzZXIgZW52aXJvbm1lbnQgcmVxdWlyZXMgYW4gZXBoZW1lcmFsIGNsaWVudCBrZXkuIElmIHlvdSBoYXZlIHRvIHVzZSBhIHJlZ3VsYXIgQVBJIGtleSwgc2V0IHRoZSBgdXNlSW5zZWN1cmVBcGlLZXlgIG9wdGlvbiB0byB0cnVlLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHdlYnNvY2tldEFyZ3VtZW50cyA9IGlzQnJvd3NlckVudmlyb25tZW50KClcbiAgICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAgICdyZWFsdGltZScsXG4gICAgICAgICAgICAgICAgLy8gQXV0aFxuICAgICAgICAgICAgICAgICdvcGVuYWktaW5zZWN1cmUtYXBpLWtleS4nICsgdGhpcy4jYXBpS2V5LFxuICAgICAgICAgICAgICAgIC8vIEJldGEgcHJvdG9jb2wsIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgJ29wZW5haS1iZXRhLnJlYWx0aW1lLXYxJyxcbiAgICAgICAgICAgICAgICAvLyBWZXJzaW9uIGhlYWRlclxuICAgICAgICAgICAgICAgIFdFQlNPQ0tFVF9NRVRBLFxuICAgICAgICAgICAgXVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy4jYXBpS2V5fWAsXG4gICAgICAgICAgICAgICAgICAgICdPcGVuQUktQmV0YSc6ICdyZWFsdGltZT12MScsXG4gICAgICAgICAgICAgICAgICAgIC4uLkhFQURFUlMsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNvbnN0IHdzID0gbmV3IFdlYlNvY2tldCh0aGlzLiN1cmwsIHdlYnNvY2tldEFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgc3RhdHVzOiAnY29ubmVjdGluZycsXG4gICAgICAgICAgICB3ZWJzb2NrZXQ6IHdzLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgd3MuYWRkRXZlbnRMaXN0ZW5lcignb3BlbicsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ2Nvbm5lY3RlZCcsXG4gICAgICAgICAgICAgICAgd2Vic29ja2V0OiB3cyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgIHRoaXMuX29uT3BlbigpO1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgd3MuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyxcbiAgICAgICAgICAgICAgICB3ZWJzb2NrZXQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH0pO1xuICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX29uTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogcGFyc2VkLCBpc0dlbmVyaWMgfSA9IHBhcnNlUmVhbHRpbWVFdmVudChtZXNzYWdlKTtcbiAgICAgICAgICAgIGlmICghcGFyc2VkIHx8IGlzR2VuZXJpYykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmF1ZGlvLmRlbHRhJykge1xuICAgICAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRBdWRpb0NvbnRlbnRJbmRleCA9IHBhcnNlZC5jb250ZW50X2luZGV4O1xuICAgICAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRJdGVtSWQgPSBwYXJzZWQuaXRlbV9pZDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSByZXNwb25zZSBzdGFydCB0aW1lc3RhbXAgaXMgbm90IHNldCwgd2Ugc2V0IGl0IHRvIHRoZSBjdXJyZW50IHRpbWUuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdXNlZCB0byBjYWxjdWxhdGUgdGhlIGVsYXBzZWQgdGltZSBmb3IgaW50ZXJydXB0aW9uLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1ZmYgPSBiYXNlNjRUb0FycmF5QnVmZmVyKHBhcnNlZC5kZWx0YSk7XG4gICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBhdWRpbyBsZW5ndGggaW4gbWlsbGlzZWNvbmRzIGFzc3VtaW5nIDI0a0h6IHBjbTE2bGVcbiAgICAgICAgICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zICs9IGJ1ZmYuYnl0ZUxlbmd0aCAvIDI0IC8gMjsgLy8gMjRrSHogKiAyIGJ5dGVzIHBlciBzYW1wbGVcbiAgICAgICAgICAgICAgICBjb25zdCBhdWRpb0V2ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYXVkaW8nLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBidWZmLFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZUlkOiBwYXJzZWQucmVzcG9uc2VfaWQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLl9vbkF1ZGlvKGF1ZGlvRXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VkLnR5cGUgPT09ICdpbnB1dF9hdWRpb19idWZmZXIuc3BlZWNoX3N0YXJ0ZWQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnRlcnJ1cHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuY3JlYXRlZCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5kb25lJykge1xuICAgICAgICAgICAgICAgIHRoaXMuI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VkLnR5cGUgPT09ICdzZXNzaW9uLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdHJhY2luZ0NvbmZpZyA9IHBhcnNlZC5zZXNzaW9uLnRyYWNpbmc7XG4gICAgICAgICAgICAgICAgLy8gVHJ5aW5nIHRvIHR1cm4gb24gdHJhY2luZyBhZnRlciB0aGUgc2Vzc2lvbiBpcyBjcmVhdGVkXG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlVHJhY2luZ0NvbmZpZyhzZXNzaW9uQ29uZmlnLnRyYWNpbmcgPz8gJ2F1dG8nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoJ2Nsb3NlJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyxcbiAgICAgICAgICAgICAgICB3ZWJzb2NrZXQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgIHRoaXMuX29uQ2xvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGNvbm5lY3Qob3B0aW9ucykge1xuICAgICAgICBjb25zdCBtb2RlbCA9IG9wdGlvbnMubW9kZWwgPz8gdGhpcy5jdXJyZW50TW9kZWw7XG4gICAgICAgIHRoaXMuY3VycmVudE1vZGVsID0gbW9kZWw7XG4gICAgICAgIHRoaXMuI2FwaUtleSA9IGF3YWl0IHRoaXMuX2dldEFwaUtleShvcHRpb25zKTtcbiAgICAgICAgdGhpcy4jdXJsID1cbiAgICAgICAgICAgIG9wdGlvbnMudXJsID8/XG4gICAgICAgICAgICAgICAgYHdzczovL2FwaS5vcGVuYWkuY29tL3YxL3JlYWx0aW1lP21vZGVsPSR7dGhpcy5jdXJyZW50TW9kZWx9YDtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkNvbmZpZyA9IHtcbiAgICAgICAgICAgIC4uLihvcHRpb25zLmluaXRpYWxTZXNzaW9uQ29uZmlnIHx8IHt9KSxcbiAgICAgICAgICAgIG1vZGVsOiB0aGlzLmN1cnJlbnRNb2RlbCxcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLiNzZXR1cFdlYlNvY2tldChyZXNvbHZlLCByZWplY3QsIHNlc3Npb25Db25maWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlU2Vzc2lvbkNvbmZpZyhzZXNzaW9uQ29uZmlnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhbiBldmVudCB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIHdpbGwgc3RyaW5naWZ5IHRoZSBldmVudCBhbmQgc2VuZCBpdCBkaXJlY3RseSB0byB0aGVcbiAgICAgKiBBUEkuIFRoaXMgY2FuIGJlIHVzZWQgaWYgeW91IHdhbnQgdG8gdGFrZSBjb250cm9sIG92ZXIgdGhlIGNvbm5lY3Rpb24gYW5kIHNlbmQgZXZlbnRzIG1hbnVhbGx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGV2ZW50IC0gVGhlIGV2ZW50IHRvIHNlbmQuXG4gICAgICovXG4gICAgc2VuZEV2ZW50KGV2ZW50KSB7XG4gICAgICAgIGlmICghdGhpcy4jc3RhdGUud2Vic29ja2V0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYlNvY2tldCBpcyBub3QgY29ubmVjdGVkLiBNYWtlIHN1cmUgeW91IGNhbGwgYGNvbm5lY3QoKWAgYmVmb3JlIHNlbmRpbmcgZXZlbnRzLicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXRlLndlYnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KGV2ZW50KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvbi5cbiAgICAgKlxuICAgICAqIFRoaXMgd2lsbCBhbHNvIHJlc2V0IGFueSBpbnRlcm5hbCBjb25uZWN0aW9uIHRyYWNraW5nIHVzZWQgZm9yIGludGVycnVwdGlvbiBoYW5kbGluZy5cbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy4jc3RhdGUud2Vic29ja2V0Py5jbG9zZSgpO1xuICAgICAgICB0aGlzLiNjdXJyZW50SXRlbUlkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zID0gMDtcbiAgICAgICAgdGhpcy4jY3VycmVudEF1ZGlvQ29udGVudEluZGV4ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaWxsIHRocm93IGFuIGVycm9yIGFzIHRoZSBXZWJTb2NrZXQgdHJhbnNwb3J0IGxheWVyIGRvZXMgbm90IHN1cHBvcnQgbXV0aW5nLlxuICAgICAqL1xuICAgIG11dGUoX211dGVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTXV0ZSBpcyBub3Qgc3VwcG9ydGVkIGZvciB0aGUgV2ViU29ja2V0IHRyYW5zcG9ydC4gWW91IGhhdmUgdG8gbXV0ZSB0aGUgYXVkaW8gaW5wdXQgeW91cnNlbGYuJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYW4gYXVkaW8gYnVmZmVyIHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgaXMgdXNlZCBmb3IgeW91ciBjbGllbnQgdG8gc2VuZCBhdWRpbyB0byB0aGVcbiAgICAgKiBtb2RlbCB0byByZXNwb25kLlxuICAgICAqXG4gICAgICogQHBhcmFtIGF1ZGlvIC0gVGhlIGF1ZGlvIGJ1ZmZlciB0byBzZW5kLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgZm9yIHRoZSBhdWRpbyBidWZmZXIuXG4gICAgICovXG4gICAgc2VuZEF1ZGlvKGF1ZGlvLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnN0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcpIHtcbiAgICAgICAgICAgIHN1cGVyLnNlbmRBdWRpbyhhdWRpbywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhIGNhbmNlbCByZXNwb25zZSBldmVudCB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIGlzIHVzZWQgdG8gY2FuY2VsIGFuIG9uZ29pbmdcbiAgICAgKiAgcmVzcG9uc2UgdGhhdCB0aGUgbW9kZWwgaXMgY3VycmVudGx5IGdlbmVyYXRpbmcuXG4gICAgICovXG4gICAgX2NhbmNlbFJlc3BvbnNlKCkge1xuICAgICAgICAvLyBjYW5jZWwgdGhlIG9uZ29pbmcgcmVzcG9uc2VcbiAgICAgICAgaWYgKHRoaXMuI29uZ29pbmdSZXNwb25zZSkge1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZS5jYW5jZWwnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRG8gTk9UIGNhbGwgdGhpcyBtZXRob2QgZGlyZWN0bHkuIENhbGwgYGludGVycnVwdCgpYCBpbnN0ZWFkIGZvciBwcm9wZXIgaW50ZXJydXB0aW9uIGhhbmRsaW5nLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBzZW5kIHRoZSByaWdodCBldmVudHMgdG8gdGhlIEFQSSB0byBpbmZvcm0gdGhlIG1vZGVsIHRoYXQgdGhlIHVzZXIgaGFzXG4gICAgICogaW50ZXJydXB0ZWQgdGhlIHJlc3BvbnNlLiBJdCBtaWdodCBiZSBvdmVycmlkZGVuL2V4dGVuZGVkIGJ5IGFuIGV4dGVuZGVkIHRyYW5zcG9ydCBsYXllci4gU2VlXG4gICAgICogdGhlIGBUd2lsaW9SZWFsdGltZVRyYW5zcG9ydExheWVyYCBmb3IgYW4gZXhhbXBsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlbGFwc2VkVGltZSAtIFRoZSBlbGFwc2VkIHRpbWUgc2luY2UgdGhlIHJlc3BvbnNlIHN0YXJ0ZWQuXG4gICAgICovXG4gICAgX2ludGVycnVwdChlbGFwc2VkVGltZSkge1xuICAgICAgICAvLyBpbW1lZGlhdGVseSBlbWl0IHRoaXMgZXZlbnQgc28gdGhlIGNsaWVudCBjYW4gc3RvcCBwbGF5aW5nIGF1ZGlvXG4gICAgICAgIHRoaXMuZW1pdCgnYXVkaW9faW50ZXJydXB0ZWQnKTtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLnRydW5jYXRlJyxcbiAgICAgICAgICAgIGl0ZW1faWQ6IHRoaXMuI2N1cnJlbnRJdGVtSWQsXG4gICAgICAgICAgICBjb250ZW50X2luZGV4OiB0aGlzLiNjdXJyZW50QXVkaW9Db250ZW50SW5kZXgsXG4gICAgICAgICAgICBhdWRpb19lbmRfbXM6IGVsYXBzZWRUaW1lLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJydXB0IHRoZSBvbmdvaW5nIHJlc3BvbnNlLiBUaGlzIG1ldGhvZCBpcyB0cmlnZ2VyZWQgYXV0b21hdGljYWxseSBieSB0aGUgY2xpZW50IHdoZW5cbiAgICAgKiB2b2ljZSBhY3Rpdml0eSBkZXRlY3Rpb24gKFZBRCkgaXMgZW5hYmxlZCAoZGVmYXVsdCkgYXMgd2VsbCBhcyB3aGVuIGFuIG91dHB1dCBndWFyZHJhaWwgZ290XG4gICAgICogdHJpZ2dlcmVkLlxuICAgICAqXG4gICAgICogWW91IGNhbiBhbHNvIGNhbGwgdGhpcyBtZXRob2QgZGlyZWN0bHkgaWYgeW91IHdhbnQgdG8gaW50ZXJydXB0IHRoZSBjb252ZXJzYXRpb24gZm9yIGV4YW1wbGVcbiAgICAgKiBiYXNlZCBvbiBhbiBldmVudCBpbiB0aGUgY2xpZW50LlxuICAgICAqL1xuICAgIGludGVycnVwdCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLiNjdXJyZW50SXRlbUlkIHx8IHR5cGVvZiB0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NhbmNlbFJlc3BvbnNlKCk7XG4gICAgICAgIGNvbnN0IGVsYXBzZWRUaW1lID0gRGF0ZS5ub3coKSAtIHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXA7XG4gICAgICAgIGNvbnNvbGUubG9nKGBJbnRlcnJ1cHRpbmcgcmVzcG9uc2UgYWZ0ZXIgJHtlbGFwc2VkVGltZX1tc2ApO1xuICAgICAgICBjb25zb2xlLmxvZyhgQXVkaW8gbGVuZ3RoOiAke3RoaXMuX2F1ZGlvTGVuZ3RoTXN9bXNgKTtcbiAgICAgICAgaWYgKGVsYXBzZWRUaW1lID49IDAgJiYgZWxhcHNlZFRpbWUgPCB0aGlzLl9hdWRpb0xlbmd0aE1zKSB7XG4gICAgICAgICAgICB0aGlzLl9pbnRlcnJ1cHQoZWxhcHNlZFRpbWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2N1cnJlbnRJdGVtSWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXAgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgPSAwO1xuICAgICAgICB0aGlzLiNjdXJyZW50QXVkaW9Db250ZW50SW5kZXggPSB1bmRlZmluZWQ7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3BlbmFpUmVhbHRpbWVXZWJzb2NrZXQubWpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/openaiRealtimeWebsocket.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/realtimeAgent.mjs":
/*!**********************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/realtimeAgent.mjs ***!
  \**********************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RealtimeAgent: () => (/* binding */ RealtimeAgent)\n/* harmony export */ });\n/* harmony import */ var _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openai/agents-core */ \"(ssr)/./node_modules/.pnpm/@openai+agents-core@0.0.2_ws@8.18.2_zod@3.25.51/node_modules/@openai/agents-core/dist/index.mjs\");\n\n/**\n * A specialized agent instance that is meant to be used within a `RealtimeSession` to build\n * voice agents. Due to the nature of this agent, some configuration options are not supported\n * that are supported by regular `Agent` instances. For example:\n * - `model` choice is not supported as all RealtimeAgents will be handled by the same model within\n *   a `RealtimeSession`\n * - `modelSettings` is not supported as all RealtimeAgents will be handled by the same model within\n *   a `RealtimeSession`\n * - `outputType` is not supported as RealtimeAgents do not support structured outputs\n * - `toolUseBehavior` is not supported as all RealtimeAgents will be handled by the same model within\n *   a `RealtimeSession`\n * - `voice` can be configured on an `Agent` level however it cannot be changed after the first\n *    agent within a `RealtimeSession` spoke\n *\n * @example\n * ```ts\n * const agent = new RealtimeAgent({\n *   name: 'my-agent',\n *   instructions: 'You are a helpful assistant that can answer questions and help with tasks.',\n * })\n *\n * const session = new RealtimeSession(agent);\n * ```\n */\nclass RealtimeAgent extends _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.Agent {\n    /**\n     * The voice intended to be used by the agent. If another agent already spoke during the\n     * RealtimeSession, changing the voice during a handoff will fail.\n     */\n    voice;\n    constructor(config) {\n        super(config);\n        this.voice = config.voice ?? 'ash';\n    }\n}\n//# sourceMappingURL=realtimeAgent.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW5haSthZ2VudHMtcmVhbHRpbWVAMC4wLjJfem9kQDMuMjUuNTEvbm9kZV9tb2R1bGVzL0BvcGVuYWkvYWdlbnRzLXJlYWx0aW1lL2Rpc3QvcmVhbHRpbWVBZ2VudC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDTyw0QkFBNEIsc0RBQUs7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW5haW55dHcvLi9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW5haSthZ2VudHMtcmVhbHRpbWVAMC4wLjJfem9kQDMuMjUuNTEvbm9kZV9tb2R1bGVzL0BvcGVuYWkvYWdlbnRzLXJlYWx0aW1lL2Rpc3QvcmVhbHRpbWVBZ2VudC5tanM/OGYxZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBZ2VudCwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbi8qKlxuICogQSBzcGVjaWFsaXplZCBhZ2VudCBpbnN0YW5jZSB0aGF0IGlzIG1lYW50IHRvIGJlIHVzZWQgd2l0aGluIGEgYFJlYWx0aW1lU2Vzc2lvbmAgdG8gYnVpbGRcbiAqIHZvaWNlIGFnZW50cy4gRHVlIHRvIHRoZSBuYXR1cmUgb2YgdGhpcyBhZ2VudCwgc29tZSBjb25maWd1cmF0aW9uIG9wdGlvbnMgYXJlIG5vdCBzdXBwb3J0ZWRcbiAqIHRoYXQgYXJlIHN1cHBvcnRlZCBieSByZWd1bGFyIGBBZ2VudGAgaW5zdGFuY2VzLiBGb3IgZXhhbXBsZTpcbiAqIC0gYG1vZGVsYCBjaG9pY2UgaXMgbm90IHN1cHBvcnRlZCBhcyBhbGwgUmVhbHRpbWVBZ2VudHMgd2lsbCBiZSBoYW5kbGVkIGJ5IHRoZSBzYW1lIG1vZGVsIHdpdGhpblxuICogICBhIGBSZWFsdGltZVNlc3Npb25gXG4gKiAtIGBtb2RlbFNldHRpbmdzYCBpcyBub3Qgc3VwcG9ydGVkIGFzIGFsbCBSZWFsdGltZUFnZW50cyB3aWxsIGJlIGhhbmRsZWQgYnkgdGhlIHNhbWUgbW9kZWwgd2l0aGluXG4gKiAgIGEgYFJlYWx0aW1lU2Vzc2lvbmBcbiAqIC0gYG91dHB1dFR5cGVgIGlzIG5vdCBzdXBwb3J0ZWQgYXMgUmVhbHRpbWVBZ2VudHMgZG8gbm90IHN1cHBvcnQgc3RydWN0dXJlZCBvdXRwdXRzXG4gKiAtIGB0b29sVXNlQmVoYXZpb3JgIGlzIG5vdCBzdXBwb3J0ZWQgYXMgYWxsIFJlYWx0aW1lQWdlbnRzIHdpbGwgYmUgaGFuZGxlZCBieSB0aGUgc2FtZSBtb2RlbCB3aXRoaW5cbiAqICAgYSBgUmVhbHRpbWVTZXNzaW9uYFxuICogLSBgdm9pY2VgIGNhbiBiZSBjb25maWd1cmVkIG9uIGFuIGBBZ2VudGAgbGV2ZWwgaG93ZXZlciBpdCBjYW5ub3QgYmUgY2hhbmdlZCBhZnRlciB0aGUgZmlyc3RcbiAqICAgIGFnZW50IHdpdGhpbiBhIGBSZWFsdGltZVNlc3Npb25gIHNwb2tlXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBjb25zdCBhZ2VudCA9IG5ldyBSZWFsdGltZUFnZW50KHtcbiAqICAgbmFtZTogJ215LWFnZW50JyxcbiAqICAgaW5zdHJ1Y3Rpb25zOiAnWW91IGFyZSBhIGhlbHBmdWwgYXNzaXN0YW50IHRoYXQgY2FuIGFuc3dlciBxdWVzdGlvbnMgYW5kIGhlbHAgd2l0aCB0YXNrcy4nLFxuICogfSlcbiAqXG4gKiBjb25zdCBzZXNzaW9uID0gbmV3IFJlYWx0aW1lU2Vzc2lvbihhZ2VudCk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFJlYWx0aW1lQWdlbnQgZXh0ZW5kcyBBZ2VudCB7XG4gICAgLyoqXG4gICAgICogVGhlIHZvaWNlIGludGVuZGVkIHRvIGJlIHVzZWQgYnkgdGhlIGFnZW50LiBJZiBhbm90aGVyIGFnZW50IGFscmVhZHkgc3Bva2UgZHVyaW5nIHRoZVxuICAgICAqIFJlYWx0aW1lU2Vzc2lvbiwgY2hhbmdpbmcgdGhlIHZvaWNlIGR1cmluZyBhIGhhbmRvZmYgd2lsbCBmYWlsLlxuICAgICAqL1xuICAgIHZvaWNlO1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICBzdXBlcihjb25maWcpO1xuICAgICAgICB0aGlzLnZvaWNlID0gY29uZmlnLnZvaWNlID8/ICdhc2gnO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWx0aW1lQWdlbnQubWpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/realtimeAgent.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/realtimeSession.mjs":
/*!************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/realtimeSession.mjs ***!
  \************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RealtimeSession: () => (/* binding */ RealtimeSession)\n/* harmony export */ });\n/* harmony import */ var _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @openai/agents-core */ \"(ssr)/./node_modules/.pnpm/@openai+agents-core@0.0.2_ws@8.18.2_zod@3.25.51/node_modules/@openai/agents-core/dist/index.mjs\");\n/* harmony import */ var _openai_agents_core_shims__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @openai/agents-core/_shims */ \"(ssr)/./node_modules/.pnpm/@openai+agents-core@0.0.2_ws@8.18.2_zod@3.25.51/node_modules/@openai/agents-core/dist/shims/shims-node.mjs\");\n/* harmony import */ var _openai_agents_core_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @openai/agents-core/utils */ \"(ssr)/./node_modules/.pnpm/@openai+agents-core@0.0.2_ws@8.18.2_zod@3.25.51/node_modules/@openai/agents-core/dist/utils/index.mjs\");\n/* harmony import */ var _guardrail_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./guardrail.mjs */ \"(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/guardrail.mjs\");\n/* harmony import */ var _openaiRealtimeWebRtc_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./openaiRealtimeWebRtc.mjs */ \"(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/openaiRealtimeWebRtc.mjs\");\n/* harmony import */ var _openaiRealtimeWebsocket_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./openaiRealtimeWebsocket.mjs */ \"(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/openaiRealtimeWebsocket.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils.mjs */ \"(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/utils.mjs\");\n/* harmony import */ var _logger_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./logger.mjs */ \"(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/logger.mjs\");\n\n\n\n\n\n\n\n\n/**\n * A `RealtimeSession` is the corner piece of building Voice Agents. It's the equivalent of a\n * Runner in text-based agents except that it automatically handles multiple turns by maintaining a\n * connection with the underlying transport layer.\n *\n * The session handles managing the local history copy, executes tools, runs output guardrails, and\n * facilities handoffs.\n *\n * The actual audio handling and generation of model responses is handled by the underlying\n * transport layer. By default if you are using a browser with WebRTC support, the session will\n * automatically use the WebRTC version of the OpenAI Realtime API. On the server or if you pass\n * `websocket` as the transport layer, the session will establish a connection using WebSockets.\n *\n * In the case of WebRTC, in the browser, the transport layer will also automatically configure the\n * microphone and audio output to be used by the session.\n *\n * You can also create a transport layer instance yourself and pass it in to have more control over\n * the configuration or even extend the existing ones. Check out the `TwilioRealtimeTransportLayer`\n * for an example of how to create a custom transport layer.\n *\n * @example\n * ```ts\n * const agent = new RealtimeAgent({\n *   name: 'my-agent',\n *   instructions: 'You are a helpful assistant that can answer questions and help with tasks.',\n * })\n *\n * const session = new RealtimeSession(agent);\n * session.connect({\n *   apiKey: 'your-api-key',\n * });\n * ```\n */\nclass RealtimeSession extends _openai_agents_core_shims__WEBPACK_IMPORTED_MODULE_1__.RuntimeEventEmitter {\n    initialAgent;\n    options;\n    #transport;\n    #currentAgent;\n    #currentTools = [];\n    #context;\n    #outputGuardrails = [];\n    #outputGuardrailSettings;\n    #transcribedTextDeltas = {};\n    #history = [];\n    #shouldIncludeAudioData;\n    constructor(initialAgent, options = {}) {\n        super();\n        this.initialAgent = initialAgent;\n        this.options = options;\n        if ((typeof options.transport === 'undefined' && (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.hasWebRTCSupport)()) ||\n            options.transport === 'webrtc') {\n            this.#transport = new _openaiRealtimeWebRtc_mjs__WEBPACK_IMPORTED_MODULE_4__.OpenAIRealtimeWebRTC();\n        }\n        else if (options.transport === 'websocket' ||\n            typeof options.transport === 'undefined') {\n            this.#transport = new _openaiRealtimeWebsocket_mjs__WEBPACK_IMPORTED_MODULE_5__.OpenAIRealtimeWebSocket();\n        }\n        else {\n            this.#transport = options.transport;\n        }\n        this.#currentAgent = initialAgent;\n        this.#context = new _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.RunContext({\n            ...(options.context ?? {}),\n            history: this.#history,\n        });\n        this.#outputGuardrails = (options.outputGuardrails ?? []).map(_guardrail_mjs__WEBPACK_IMPORTED_MODULE_3__.defineRealtimeOutputGuardrail);\n        this.#outputGuardrailSettings = (0,_guardrail_mjs__WEBPACK_IMPORTED_MODULE_3__.getRealtimeGuardrailSettings)(options.outputGuardrailSettings ?? {});\n        this.#shouldIncludeAudioData = options.historyStoreAudio ?? false;\n    }\n    /**\n     * The transport layer used by the session.\n     */\n    get transport() {\n        return this.#transport;\n    }\n    /**\n     * The current agent in the session.\n     */\n    get currentAgent() {\n        return this.#currentAgent;\n    }\n    /**\n     * The current usage of the session.\n     */\n    get usage() {\n        return this.#context.usage;\n    }\n    /**\n     * The current context of the session.\n     */\n    get context() {\n        return this.#context;\n    }\n    /**\n     * Whether the session is muted. Might be `null` if the underlying transport layer does not\n     * support muting.\n     */\n    get muted() {\n        return this.#transport.muted;\n    }\n    /**\n     * The history of the session.\n     */\n    get history() {\n        return this.#history;\n    }\n    async #setCurrentAgent(agent) {\n        this.#currentAgent = agent;\n        const handoffs = this.#currentAgent.handoffs.map(_openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.getHandoff);\n        const handoffTools = handoffs.map((handoff) => handoff.getHandoffAsFunctionTool());\n        this.#currentTools = [\n            ...(await this.#currentAgent.getAllTools()).filter((tool) => tool.type === 'function'),\n            ...handoffTools,\n        ];\n    }\n    async #getSessionConfig(additionalConfig = {}) {\n        const instructions = await this.#currentAgent.getSystemPrompt(this.#context);\n        const tracingConfig = this.options\n            .tracingDisabled\n            ? null\n            : this.options.workflowName\n                ? {\n                    workflow_name: this.options.workflowName,\n                }\n                : 'auto';\n        if (tracingConfig !== null && tracingConfig !== 'auto') {\n            if (this.options.groupId) {\n                tracingConfig.group_id = this.options.groupId;\n            }\n            if (this.options.traceMetadata) {\n                tracingConfig.metadata = this.options.traceMetadata;\n            }\n        }\n        else if (this.options.groupId || this.options.traceMetadata) {\n            _logger_mjs__WEBPACK_IMPORTED_MODULE_7__[\"default\"].warn('In order to set traceMetadata or a groupId you need to specify a workflowName.');\n        }\n        return {\n            instructions,\n            voice: this.#currentAgent.voice,\n            model: this.options.model,\n            tools: this.#currentTools,\n            tracing: tracingConfig,\n            ...additionalConfig,\n        };\n    }\n    async updateAgent(newAgent) {\n        this.#currentAgent.emit('agent_handoff', this.#context, newAgent);\n        this.emit('agent_handoff', this.#context, this.#currentAgent, newAgent);\n        await this.#setCurrentAgent(newAgent);\n        await this.#transport.updateSessionConfig(await this.#getSessionConfig());\n        return newAgent;\n    }\n    async #handleHandoff(toolCall, handoff) {\n        const newAgent = (await handoff.onInvokeHandoff(this.#context, toolCall.arguments));\n        this.#currentAgent.emit('agent_handoff', this.#context, newAgent);\n        this.emit('agent_handoff', this.#context, this.#currentAgent, newAgent);\n        // update session with new agent\n        await this.#setCurrentAgent(newAgent);\n        await this.#transport.updateSessionConfig(await this.#getSessionConfig());\n        const output = (0,_openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.getTransferMessage)(newAgent);\n        this.#transport.sendFunctionCallOutput(toolCall, output, true);\n        return newAgent;\n    }\n    async #handleFunctionToolCall(toolCall, tool) {\n        this.#context.context.history = JSON.parse(JSON.stringify(this.#history)); // deep copy of the history\n        let parsedArgs = toolCall.arguments;\n        if (tool.parameters) {\n            if ((0,_openai_agents_core_utils__WEBPACK_IMPORTED_MODULE_2__.isZodObject)(tool.parameters)) {\n                parsedArgs = tool.parameters.parse(parsedArgs);\n            }\n            else {\n                parsedArgs = JSON.parse(parsedArgs);\n            }\n        }\n        const needsApproval = await tool.needsApproval(this.#context, parsedArgs, toolCall.callId);\n        if (needsApproval) {\n            const approval = this.context.isToolApproved({\n                toolName: tool.name,\n                callId: toolCall.callId,\n            });\n            if (approval === false) {\n                this.emit('agent_tool_start', this.#context, this.#currentAgent, tool);\n                this.#currentAgent.emit('agent_tool_start', this.#context, tool);\n                const result = 'Tool execution was not approved.';\n                this.#transport.sendFunctionCallOutput(toolCall, result, true);\n                this.emit('agent_tool_end', this.#context, this.#currentAgent, tool, result);\n                this.#currentAgent.emit('agent_tool_end', this.#context, tool, result);\n                return;\n            }\n            else if (typeof approval === 'undefined') {\n                this.emit('tool_approval_requested', this.#context, this.#currentAgent, {\n                    type: 'function_approval',\n                    tool,\n                    approvalItem: new _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.RunToolApprovalItem(toolCall, this.#currentAgent),\n                });\n                return;\n            }\n        }\n        this.emit('agent_tool_start', this.#context, this.#currentAgent, tool);\n        this.#currentAgent.emit('agent_tool_start', this.#context, tool);\n        this.#context.context.history = JSON.parse(JSON.stringify(this.#history)); // deep copy of the history\n        const result = await tool.invoke(this.#context, toolCall.arguments);\n        const stringResult = (0,_openai_agents_core_utils__WEBPACK_IMPORTED_MODULE_2__.toSmartString)(result);\n        this.#transport.sendFunctionCallOutput(toolCall, stringResult, true);\n        this.emit('agent_tool_end', this.#context, this.#currentAgent, tool, stringResult);\n        this.#currentAgent.emit('agent_tool_end', this.#context, tool, stringResult);\n    }\n    async #handleFunctionCall(toolCall) {\n        const handoffMap = new Map(this.#currentAgent.handoffs\n            .map(_openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.getHandoff)\n            .map((handoff) => [handoff.toolName, handoff]));\n        const functionToolMap = new Map((await this.#currentAgent.getAllTools()).map((tool) => [tool.name, tool]));\n        const possibleHandoff = handoffMap.get(toolCall.name);\n        if (possibleHandoff) {\n            await this.#handleHandoff(toolCall, possibleHandoff);\n        }\n        else {\n            const functionTool = functionToolMap.get(toolCall.name);\n            if (functionTool && functionTool.type === 'function') {\n                await this.#handleFunctionToolCall(toolCall, functionTool);\n            }\n            else {\n                throw new _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.ModelBehaviorError(`Tool ${toolCall.name} not found`);\n            }\n        }\n    }\n    async #runOutputGuardrails(output) {\n        if (this.#outputGuardrails.length === 0) {\n            return;\n        }\n        const guardrailArgs = {\n            agent: this.#currentAgent,\n            agentOutput: output,\n            context: this.#context,\n        };\n        const results = await Promise.all(this.#outputGuardrails.map((guardrail) => guardrail.run(guardrailArgs)));\n        for (const result of results) {\n            if (result.output.tripwireTriggered) {\n                const error = new _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.OutputGuardrailTripwireTriggered(`Output guardrail triggered: ${JSON.stringify(result.output.outputInfo)}`, result);\n                this.emit('guardrail_tripped', this.#context, this.#currentAgent, error);\n                this.interrupt();\n                const feedbackText = (0,_guardrail_mjs__WEBPACK_IMPORTED_MODULE_3__.getRealtimeGuardrailFeedbackMessage)(result);\n                this.sendMessage(feedbackText);\n                break;\n            }\n        }\n    }\n    #setEventListeners() {\n        this.#transport.on('*', (event) => {\n            this.emit('transport_event', event);\n        });\n        this.#transport.on('audio', (event) => {\n            this.emit('audio', event);\n        });\n        this.#transport.on('turn_started', () => {\n            this.emit('agent_start', this.#context, this.#currentAgent);\n            this.#currentAgent.emit('agent_start', this.#context, this.#currentAgent);\n        });\n        this.#transport.on('turn_done', (event) => {\n            const item = event.response.output[event.response.output.length - 1];\n            const textOutput = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.getLastTextFromAudioOutputMessage)(item) ?? '';\n            this.emit('agent_end', this.#context, this.#currentAgent, textOutput);\n            this.#currentAgent.emit('agent_end', this.#context, textOutput);\n            this.#runOutputGuardrails(textOutput);\n        });\n        this.#transport.on('audio_done', () => {\n            this.emit('audio_stopped', this.#context, this.#currentAgent);\n        });\n        let lastRunIndex = 0;\n        let lastItemId;\n        this.#transport.on('audio_transcript_delta', (event) => {\n            try {\n                const delta = event.delta;\n                const itemId = event.itemId;\n                if (lastItemId !== itemId) {\n                    lastItemId = itemId;\n                    lastRunIndex = 0;\n                }\n                const currentText = this.#transcribedTextDeltas[itemId] ?? '';\n                const newText = currentText + delta;\n                this.#transcribedTextDeltas[itemId] = newText;\n                if (this.#outputGuardrailSettings.debounceTextLength < 0) {\n                    return;\n                }\n                const newRunIndex = Math.floor(newText.length / this.#outputGuardrailSettings.debounceTextLength);\n                if (newRunIndex > lastRunIndex) {\n                    lastRunIndex = newRunIndex;\n                    // We don't cancel existing runs because we want the first one to fail to fail\n                    // The transport layer should upon failure handle the interruption and stop the model\n                    // from generating further\n                    this.#runOutputGuardrails(newText);\n                }\n            }\n            catch (err) {\n                this.emit('error', {\n                    type: 'error',\n                    error: err,\n                });\n            }\n        });\n        this.#transport.on('item_update', (event) => {\n            try {\n                const isNew = !this.#history.some((item) => item.itemId === event.itemId);\n                this.#history = (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_6__.updateRealtimeHistory)(this.#history, event, this.#shouldIncludeAudioData);\n                this.#context.context.history = this.#history;\n                if (isNew) {\n                    const addedItem = this.#history.find((item) => item.itemId === event.itemId);\n                    if (addedItem) {\n                        this.emit('history_added', addedItem);\n                    }\n                }\n                this.emit('history_updated', this.#history);\n            }\n            catch (err) {\n                this.emit('error', {\n                    type: 'error',\n                    error: err,\n                });\n            }\n        });\n        this.#transport.on('item_deleted', (event) => {\n            try {\n                this.#history = this.#history.filter((item) => item.itemId !== event.itemId);\n                this.#context.context.history = this.#history;\n                this.emit('history_updated', this.#history);\n            }\n            catch (err) {\n                this.emit('error', {\n                    type: 'error',\n                    error: err,\n                });\n            }\n        });\n        this.#transport.on('function_call', async (event) => {\n            try {\n                await this.#handleFunctionCall(event);\n            }\n            catch (error) {\n                _logger_mjs__WEBPACK_IMPORTED_MODULE_7__[\"default\"].error('Error handling function call', error);\n                this.emit('error', {\n                    type: 'error',\n                    error,\n                });\n            }\n        });\n        this.#transport.on('usage_update', (usage) => {\n            this.#context.usage.add(usage);\n        });\n        this.#transport.on('audio_interrupted', () => {\n            this.emit('audio_interrupted', this.#context, this.#currentAgent);\n        });\n        this.#transport.on('error', (error) => {\n            this.emit('error', error);\n        });\n    }\n    /**\n     * Connect to the session. This will establish the connection to the underlying transport layer\n     * and start the session.\n     *\n     * After connecting, the session will also emit a `history_updated` event with an empty history.\n     *\n     * @param options - The options for the connection.\n     */\n    async connect(options) {\n        // makes sure the current agent is correctly set and loads the tools\n        await this.#setCurrentAgent(this.initialAgent);\n        this.#setEventListeners();\n        await this.#transport.connect({\n            apiKey: options.apiKey ?? this.options.apiKey,\n            model: this.options.model,\n            initialSessionConfig: await this.#getSessionConfig(this.options.config),\n        });\n        this.#history = [];\n        this.emit('history_updated', this.#history);\n    }\n    /**\n     * Update the history of the session.\n     * @param newHistory - The new history to set.\n     */\n    updateHistory(newHistory) {\n        let updatedHistory;\n        if (typeof newHistory === 'function') {\n            updatedHistory = newHistory(this.#history);\n        }\n        else {\n            updatedHistory = newHistory;\n        }\n        this.#transport.resetHistory(this.#history, updatedHistory);\n    }\n    /**\n     * Send a message to the session.\n     * @param message - The message to send.\n     * @param otherEventData - Additional event data to send.\n     */\n    sendMessage(message, otherEventData = {}) {\n        this.#transport.sendMessage(message, otherEventData);\n    }\n    /**\n     * Mute the session.\n     * @param muted - Whether to mute the session.\n     */\n    mute(muted) {\n        this.#transport.mute(muted);\n    }\n    /**\n     * Disconnect from the session.\n     */\n    close() {\n        this.#transport.close();\n    }\n    /**\n     * Send audio to the session.\n     * @param audio - The audio to send.\n     * @param options - Additional options.\n     * @param options.commit - Whether to finish the turn with this audio.\n     */\n    sendAudio(audio, options = {}) {\n        this.#transport.sendAudio(audio, options);\n    }\n    /**\n     * Interrupt the session artificially for example if you want to build a \"stop talking\"\n     * button.\n     */\n    interrupt() {\n        this.#transport.interrupt();\n    }\n    /**\n     * Approve a tool call. This will also trigger the tool call to the agent.\n     * @param approvalItem - The approval item to approve.\n     * @param options - Additional options.\n     * @param options.alwaysApprove - Whether to always approve the tool call.\n     */\n    async approve(approvalItem, options = { alwaysApprove: false }) {\n        this.#context.approveTool(approvalItem, options);\n        const tool = this.#currentAgent.tools.find((tool) => tool.name === approvalItem.rawItem.name);\n        if (tool && tool.type === 'function') {\n            await this.#handleFunctionToolCall(approvalItem.rawItem, tool);\n        }\n        else {\n            throw new _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.ModelBehaviorError(`Tool ${approvalItem.rawItem.name} not found`);\n        }\n    }\n    /**\n     * Reject a tool call. This will also trigger the tool call to the agent.\n     * @param approvalItem - The approval item to reject.\n     * @param options - Additional options.\n     * @param options.alwaysReject - Whether to always reject the tool call.\n     */\n    async reject(approvalItem, options = { alwaysReject: false }) {\n        this.#context.rejectTool(approvalItem, options);\n        // we still need to simulate a tool call to the agent to let the agent know\n        const tool = this.#currentAgent.tools.find((tool) => tool.name === approvalItem.rawItem.name);\n        if (tool && tool.type === 'function') {\n            await this.#handleFunctionToolCall(approvalItem.rawItem, tool);\n        }\n        else {\n            throw new _openai_agents_core__WEBPACK_IMPORTED_MODULE_0__.ModelBehaviorError(`Tool ${approvalItem.rawItem.name} not found`);\n        }\n    }\n}\n//# sourceMappingURL=realtimeSession.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW5haSthZ2VudHMtcmVhbHRpbWVAMC4wLjJfem9kQDMuMjUuNTEvbm9kZV9tb2R1bGVzL0BvcGVuYWkvYWdlbnRzLXJlYWx0aW1lL2Rpc3QvcmVhbHRpbWVTZXNzaW9uLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBNko7QUFDNUY7QUFDTTtBQUM2RDtBQUNsRTtBQUNNO0FBQ2tDO0FBQ3hFO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDTyw4QkFBOEIsMEVBQW1CO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0EseURBQXlELDREQUFnQjtBQUN6RTtBQUNBLGtDQUFrQywyRUFBb0I7QUFDdEQ7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGlGQUF1QjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDJEQUFVO0FBQ3RDLHFDQUFxQztBQUNyQztBQUNBLFNBQVM7QUFDVCxzRUFBc0UseUVBQTZCO0FBQ25HLHdDQUF3Qyw0RUFBNEIsc0NBQXNDO0FBQzFHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQsMkRBQVU7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksbURBQU07QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHVFQUFrQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLG1GQUFtRjtBQUNuRjtBQUNBO0FBQ0EsZ0JBQWdCLHNFQUFXO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0Msb0VBQW1CO0FBQ3pELGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUZBQW1GO0FBQ25GO0FBQ0EsNkJBQTZCLHdFQUFhO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiwyREFBVTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsbUVBQWtCLFNBQVMsZUFBZTtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsaUZBQWdDLGdDQUFnQyx5Q0FBeUM7QUFDM0k7QUFDQTtBQUNBLHFDQUFxQyxtRkFBbUM7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsK0JBQStCLDZFQUFpQztBQUNoRTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxpRUFBcUI7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixtREFBTTtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLHNCQUFzQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsbUVBQWtCLFNBQVMsMkJBQTJCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMscUJBQXFCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLG1FQUFrQixTQUFTLDJCQUEyQjtBQUM1RTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW5haW55dHcvLi9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW5haSthZ2VudHMtcmVhbHRpbWVAMC4wLjJfem9kQDMuMjUuNTEvbm9kZV9tb2R1bGVzL0BvcGVuYWkvYWdlbnRzLXJlYWx0aW1lL2Rpc3QvcmVhbHRpbWVTZXNzaW9uLm1qcz9hNzMzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEhhbmRvZmYsIGdldFRyYW5zZmVyTWVzc2FnZSwgTW9kZWxCZWhhdmlvckVycm9yLCBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgUnVuQ29udGV4dCwgUnVuVG9vbEFwcHJvdmFsSXRlbSwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmltcG9ydCB7IFJ1bnRpbWVFdmVudEVtaXR0ZXIgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5pbXBvcnQgeyBpc1pvZE9iamVjdCwgdG9TbWFydFN0cmluZyB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvdXRpbHMnO1xuaW1wb3J0IHsgZGVmaW5lUmVhbHRpbWVPdXRwdXRHdWFyZHJhaWwsIGdldFJlYWx0aW1lR3VhcmRyYWlsRmVlZGJhY2tNZXNzYWdlLCBnZXRSZWFsdGltZUd1YXJkcmFpbFNldHRpbmdzLCB9IGZyb20gXCIuL2d1YXJkcmFpbC5tanNcIjtcbmltcG9ydCB7IE9wZW5BSVJlYWx0aW1lV2ViUlRDIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVXZWJSdGMubWpzXCI7XG5pbXBvcnQgeyBPcGVuQUlSZWFsdGltZVdlYlNvY2tldCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lV2Vic29ja2V0Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0TGFzdFRleHRGcm9tQXVkaW9PdXRwdXRNZXNzYWdlLCBoYXNXZWJSVENTdXBwb3J0LCB1cGRhdGVSZWFsdGltZUhpc3RvcnksIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbi8qKlxuICogQSBgUmVhbHRpbWVTZXNzaW9uYCBpcyB0aGUgY29ybmVyIHBpZWNlIG9mIGJ1aWxkaW5nIFZvaWNlIEFnZW50cy4gSXQncyB0aGUgZXF1aXZhbGVudCBvZiBhXG4gKiBSdW5uZXIgaW4gdGV4dC1iYXNlZCBhZ2VudHMgZXhjZXB0IHRoYXQgaXQgYXV0b21hdGljYWxseSBoYW5kbGVzIG11bHRpcGxlIHR1cm5zIGJ5IG1haW50YWluaW5nIGFcbiAqIGNvbm5lY3Rpb24gd2l0aCB0aGUgdW5kZXJseWluZyB0cmFuc3BvcnQgbGF5ZXIuXG4gKlxuICogVGhlIHNlc3Npb24gaGFuZGxlcyBtYW5hZ2luZyB0aGUgbG9jYWwgaGlzdG9yeSBjb3B5LCBleGVjdXRlcyB0b29scywgcnVucyBvdXRwdXQgZ3VhcmRyYWlscywgYW5kXG4gKiBmYWNpbGl0aWVzIGhhbmRvZmZzLlxuICpcbiAqIFRoZSBhY3R1YWwgYXVkaW8gaGFuZGxpbmcgYW5kIGdlbmVyYXRpb24gb2YgbW9kZWwgcmVzcG9uc2VzIGlzIGhhbmRsZWQgYnkgdGhlIHVuZGVybHlpbmdcbiAqIHRyYW5zcG9ydCBsYXllci4gQnkgZGVmYXVsdCBpZiB5b3UgYXJlIHVzaW5nIGEgYnJvd3NlciB3aXRoIFdlYlJUQyBzdXBwb3J0LCB0aGUgc2Vzc2lvbiB3aWxsXG4gKiBhdXRvbWF0aWNhbGx5IHVzZSB0aGUgV2ViUlRDIHZlcnNpb24gb2YgdGhlIE9wZW5BSSBSZWFsdGltZSBBUEkuIE9uIHRoZSBzZXJ2ZXIgb3IgaWYgeW91IHBhc3NcbiAqIGB3ZWJzb2NrZXRgIGFzIHRoZSB0cmFuc3BvcnQgbGF5ZXIsIHRoZSBzZXNzaW9uIHdpbGwgZXN0YWJsaXNoIGEgY29ubmVjdGlvbiB1c2luZyBXZWJTb2NrZXRzLlxuICpcbiAqIEluIHRoZSBjYXNlIG9mIFdlYlJUQywgaW4gdGhlIGJyb3dzZXIsIHRoZSB0cmFuc3BvcnQgbGF5ZXIgd2lsbCBhbHNvIGF1dG9tYXRpY2FsbHkgY29uZmlndXJlIHRoZVxuICogbWljcm9waG9uZSBhbmQgYXVkaW8gb3V0cHV0IHRvIGJlIHVzZWQgYnkgdGhlIHNlc3Npb24uXG4gKlxuICogWW91IGNhbiBhbHNvIGNyZWF0ZSBhIHRyYW5zcG9ydCBsYXllciBpbnN0YW5jZSB5b3Vyc2VsZiBhbmQgcGFzcyBpdCBpbiB0byBoYXZlIG1vcmUgY29udHJvbCBvdmVyXG4gKiB0aGUgY29uZmlndXJhdGlvbiBvciBldmVuIGV4dGVuZCB0aGUgZXhpc3Rpbmcgb25lcy4gQ2hlY2sgb3V0IHRoZSBgVHdpbGlvUmVhbHRpbWVUcmFuc3BvcnRMYXllcmBcbiAqIGZvciBhbiBleGFtcGxlIG9mIGhvdyB0byBjcmVhdGUgYSBjdXN0b20gdHJhbnNwb3J0IGxheWVyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3QgYWdlbnQgPSBuZXcgUmVhbHRpbWVBZ2VudCh7XG4gKiAgIG5hbWU6ICdteS1hZ2VudCcsXG4gKiAgIGluc3RydWN0aW9uczogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB0aGF0IGNhbiBhbnN3ZXIgcXVlc3Rpb25zIGFuZCBoZWxwIHdpdGggdGFza3MuJyxcbiAqIH0pXG4gKlxuICogY29uc3Qgc2Vzc2lvbiA9IG5ldyBSZWFsdGltZVNlc3Npb24oYWdlbnQpO1xuICogc2Vzc2lvbi5jb25uZWN0KHtcbiAqICAgYXBpS2V5OiAneW91ci1hcGkta2V5JyxcbiAqIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWFsdGltZVNlc3Npb24gZXh0ZW5kcyBSdW50aW1lRXZlbnRFbWl0dGVyIHtcbiAgICBpbml0aWFsQWdlbnQ7XG4gICAgb3B0aW9ucztcbiAgICAjdHJhbnNwb3J0O1xuICAgICNjdXJyZW50QWdlbnQ7XG4gICAgI2N1cnJlbnRUb29scyA9IFtdO1xuICAgICNjb250ZXh0O1xuICAgICNvdXRwdXRHdWFyZHJhaWxzID0gW107XG4gICAgI291dHB1dEd1YXJkcmFpbFNldHRpbmdzO1xuICAgICN0cmFuc2NyaWJlZFRleHREZWx0YXMgPSB7fTtcbiAgICAjaGlzdG9yeSA9IFtdO1xuICAgICNzaG91bGRJbmNsdWRlQXVkaW9EYXRhO1xuICAgIGNvbnN0cnVjdG9yKGluaXRpYWxBZ2VudCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuaW5pdGlhbEFnZW50ID0gaW5pdGlhbEFnZW50O1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICBpZiAoKHR5cGVvZiBvcHRpb25zLnRyYW5zcG9ydCA9PT0gJ3VuZGVmaW5lZCcgJiYgaGFzV2ViUlRDU3VwcG9ydCgpKSB8fFxuICAgICAgICAgICAgb3B0aW9ucy50cmFuc3BvcnQgPT09ICd3ZWJydGMnKSB7XG4gICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQgPSBuZXcgT3BlbkFJUmVhbHRpbWVXZWJSVEMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRpb25zLnRyYW5zcG9ydCA9PT0gJ3dlYnNvY2tldCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiBvcHRpb25zLnRyYW5zcG9ydCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydCA9IG5ldyBPcGVuQUlSZWFsdGltZVdlYlNvY2tldCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy4jdHJhbnNwb3J0ID0gb3B0aW9ucy50cmFuc3BvcnQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jY3VycmVudEFnZW50ID0gaW5pdGlhbEFnZW50O1xuICAgICAgICB0aGlzLiNjb250ZXh0ID0gbmV3IFJ1bkNvbnRleHQoe1xuICAgICAgICAgICAgLi4uKG9wdGlvbnMuY29udGV4dCA/PyB7fSksXG4gICAgICAgICAgICBoaXN0b3J5OiB0aGlzLiNoaXN0b3J5LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jb3V0cHV0R3VhcmRyYWlscyA9IChvcHRpb25zLm91dHB1dEd1YXJkcmFpbHMgPz8gW10pLm1hcChkZWZpbmVSZWFsdGltZU91dHB1dEd1YXJkcmFpbCk7XG4gICAgICAgIHRoaXMuI291dHB1dEd1YXJkcmFpbFNldHRpbmdzID0gZ2V0UmVhbHRpbWVHdWFyZHJhaWxTZXR0aW5ncyhvcHRpb25zLm91dHB1dEd1YXJkcmFpbFNldHRpbmdzID8/IHt9KTtcbiAgICAgICAgdGhpcy4jc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSA9IG9wdGlvbnMuaGlzdG9yeVN0b3JlQXVkaW8gPz8gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSB0cmFuc3BvcnQgbGF5ZXIgdXNlZCBieSB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBnZXQgdHJhbnNwb3J0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jdHJhbnNwb3J0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBhZ2VudCBpbiB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBnZXQgY3VycmVudEFnZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jY3VycmVudEFnZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCB1c2FnZSBvZiB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBnZXQgdXNhZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjb250ZXh0LnVzYWdlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBjb250ZXh0IG9mIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGdldCBjb250ZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jY29udGV4dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgc2Vzc2lvbiBpcyBtdXRlZC4gTWlnaHQgYmUgYG51bGxgIGlmIHRoZSB1bmRlcmx5aW5nIHRyYW5zcG9ydCBsYXllciBkb2VzIG5vdFxuICAgICAqIHN1cHBvcnQgbXV0aW5nLlxuICAgICAqL1xuICAgIGdldCBtdXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3RyYW5zcG9ydC5tdXRlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGhpc3Rvcnkgb2YgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgZ2V0IGhpc3RvcnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNoaXN0b3J5O1xuICAgIH1cbiAgICBhc3luYyAjc2V0Q3VycmVudEFnZW50KGFnZW50KSB7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudCA9IGFnZW50O1xuICAgICAgICBjb25zdCBoYW5kb2ZmcyA9IHRoaXMuI2N1cnJlbnRBZ2VudC5oYW5kb2Zmcy5tYXAoZ2V0SGFuZG9mZik7XG4gICAgICAgIGNvbnN0IGhhbmRvZmZUb29scyA9IGhhbmRvZmZzLm1hcCgoaGFuZG9mZikgPT4gaGFuZG9mZi5nZXRIYW5kb2ZmQXNGdW5jdGlvblRvb2woKSk7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRUb29scyA9IFtcbiAgICAgICAgICAgIC4uLihhd2FpdCB0aGlzLiNjdXJyZW50QWdlbnQuZ2V0QWxsVG9vbHMoKSkuZmlsdGVyKCh0b29sKSA9PiB0b29sLnR5cGUgPT09ICdmdW5jdGlvbicpLFxuICAgICAgICAgICAgLi4uaGFuZG9mZlRvb2xzLFxuICAgICAgICBdO1xuICAgIH1cbiAgICBhc3luYyAjZ2V0U2Vzc2lvbkNvbmZpZyhhZGRpdGlvbmFsQ29uZmlnID0ge30pIHtcbiAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25zID0gYXdhaXQgdGhpcy4jY3VycmVudEFnZW50LmdldFN5c3RlbVByb21wdCh0aGlzLiNjb250ZXh0KTtcbiAgICAgICAgY29uc3QgdHJhY2luZ0NvbmZpZyA9IHRoaXMub3B0aW9uc1xuICAgICAgICAgICAgLnRyYWNpbmdEaXNhYmxlZFxuICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICA6IHRoaXMub3B0aW9ucy53b3JrZmxvd05hbWVcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgd29ya2Zsb3dfbmFtZTogdGhpcy5vcHRpb25zLndvcmtmbG93TmFtZSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiAnYXV0byc7XG4gICAgICAgIGlmICh0cmFjaW5nQ29uZmlnICE9PSBudWxsICYmIHRyYWNpbmdDb25maWcgIT09ICdhdXRvJykge1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5ncm91cElkKSB7XG4gICAgICAgICAgICAgICAgdHJhY2luZ0NvbmZpZy5ncm91cF9pZCA9IHRoaXMub3B0aW9ucy5ncm91cElkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50cmFjZU1ldGFkYXRhKSB7XG4gICAgICAgICAgICAgICAgdHJhY2luZ0NvbmZpZy5tZXRhZGF0YSA9IHRoaXMub3B0aW9ucy50cmFjZU1ldGFkYXRhO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMub3B0aW9ucy5ncm91cElkIHx8IHRoaXMub3B0aW9ucy50cmFjZU1ldGFkYXRhKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignSW4gb3JkZXIgdG8gc2V0IHRyYWNlTWV0YWRhdGEgb3IgYSBncm91cElkIHlvdSBuZWVkIHRvIHNwZWNpZnkgYSB3b3JrZmxvd05hbWUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGluc3RydWN0aW9ucyxcbiAgICAgICAgICAgIHZvaWNlOiB0aGlzLiNjdXJyZW50QWdlbnQudm9pY2UsXG4gICAgICAgICAgICBtb2RlbDogdGhpcy5vcHRpb25zLm1vZGVsLFxuICAgICAgICAgICAgdG9vbHM6IHRoaXMuI2N1cnJlbnRUb29scyxcbiAgICAgICAgICAgIHRyYWNpbmc6IHRyYWNpbmdDb25maWcsXG4gICAgICAgICAgICAuLi5hZGRpdGlvbmFsQ29uZmlnLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVBZ2VudChuZXdBZ2VudCkge1xuICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfaGFuZG9mZicsIHRoaXMuI2NvbnRleHQsIG5ld0FnZW50KTtcbiAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCBuZXdBZ2VudCk7XG4gICAgICAgIGF3YWl0IHRoaXMuI3NldEN1cnJlbnRBZ2VudChuZXdBZ2VudCk7XG4gICAgICAgIGF3YWl0IHRoaXMuI3RyYW5zcG9ydC51cGRhdGVTZXNzaW9uQ29uZmlnKGF3YWl0IHRoaXMuI2dldFNlc3Npb25Db25maWcoKSk7XG4gICAgICAgIHJldHVybiBuZXdBZ2VudDtcbiAgICB9XG4gICAgYXN5bmMgI2hhbmRsZUhhbmRvZmYodG9vbENhbGwsIGhhbmRvZmYpIHtcbiAgICAgICAgY29uc3QgbmV3QWdlbnQgPSAoYXdhaXQgaGFuZG9mZi5vbkludm9rZUhhbmRvZmYodGhpcy4jY29udGV4dCwgdG9vbENhbGwuYXJndW1lbnRzKSk7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgdGhpcy4jY29udGV4dCwgbmV3QWdlbnQpO1xuICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X2hhbmRvZmYnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIG5ld0FnZW50KTtcbiAgICAgICAgLy8gdXBkYXRlIHNlc3Npb24gd2l0aCBuZXcgYWdlbnRcbiAgICAgICAgYXdhaXQgdGhpcy4jc2V0Q3VycmVudEFnZW50KG5ld0FnZW50KTtcbiAgICAgICAgYXdhaXQgdGhpcy4jdHJhbnNwb3J0LnVwZGF0ZVNlc3Npb25Db25maWcoYXdhaXQgdGhpcy4jZ2V0U2Vzc2lvbkNvbmZpZygpKTtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gZ2V0VHJhbnNmZXJNZXNzYWdlKG5ld0FnZW50KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRGdW5jdGlvbkNhbGxPdXRwdXQodG9vbENhbGwsIG91dHB1dCwgdHJ1ZSk7XG4gICAgICAgIHJldHVybiBuZXdBZ2VudDtcbiAgICB9XG4gICAgYXN5bmMgI2hhbmRsZUZ1bmN0aW9uVG9vbENhbGwodG9vbENhbGwsIHRvb2wpIHtcbiAgICAgICAgdGhpcy4jY29udGV4dC5jb250ZXh0Lmhpc3RvcnkgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuI2hpc3RvcnkpKTsgLy8gZGVlcCBjb3B5IG9mIHRoZSBoaXN0b3J5XG4gICAgICAgIGxldCBwYXJzZWRBcmdzID0gdG9vbENhbGwuYXJndW1lbnRzO1xuICAgICAgICBpZiAodG9vbC5wYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICBpZiAoaXNab2RPYmplY3QodG9vbC5wYXJhbWV0ZXJzKSkge1xuICAgICAgICAgICAgICAgIHBhcnNlZEFyZ3MgPSB0b29sLnBhcmFtZXRlcnMucGFyc2UocGFyc2VkQXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXJzZWRBcmdzID0gSlNPTi5wYXJzZShwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZWVkc0FwcHJvdmFsID0gYXdhaXQgdG9vbC5uZWVkc0FwcHJvdmFsKHRoaXMuI2NvbnRleHQsIHBhcnNlZEFyZ3MsIHRvb2xDYWxsLmNhbGxJZCk7XG4gICAgICAgIGlmIChuZWVkc0FwcHJvdmFsKSB7XG4gICAgICAgICAgICBjb25zdCBhcHByb3ZhbCA9IHRoaXMuY29udGV4dC5pc1Rvb2xBcHByb3ZlZCh7XG4gICAgICAgICAgICAgICAgdG9vbE5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGFwcHJvdmFsID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgdG9vbCk7XG4gICAgICAgICAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCB0aGlzLiNjb250ZXh0LCB0b29sKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSAnVG9vbCBleGVjdXRpb24gd2FzIG5vdCBhcHByb3ZlZC4nO1xuICAgICAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kRnVuY3Rpb25DYWxsT3V0cHV0KHRvb2xDYWxsLCByZXN1bHQsIHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHRvb2wsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgdGhpcy4jY29udGV4dCwgdG9vbCwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgYXBwcm92YWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCd0b29sX2FwcHJvdmFsX3JlcXVlc3RlZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fYXBwcm92YWwnLFxuICAgICAgICAgICAgICAgICAgICB0b29sLFxuICAgICAgICAgICAgICAgICAgICBhcHByb3ZhbEl0ZW06IG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHRvb2xDYWxsLCB0aGlzLiNjdXJyZW50QWdlbnQpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHRvb2wpO1xuICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRvb2wpO1xuICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy4jaGlzdG9yeSkpOyAvLyBkZWVwIGNvcHkgb2YgdGhlIGhpc3RvcnlcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdG9vbC5pbnZva2UodGhpcy4jY29udGV4dCwgdG9vbENhbGwuYXJndW1lbnRzKTtcbiAgICAgICAgY29uc3Qgc3RyaW5nUmVzdWx0ID0gdG9TbWFydFN0cmluZyhyZXN1bHQpO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZEZ1bmN0aW9uQ2FsbE91dHB1dCh0b29sQ2FsbCwgc3RyaW5nUmVzdWx0LCB0cnVlKTtcbiAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgdG9vbCwgc3RyaW5nUmVzdWx0KTtcbiAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgdGhpcy4jY29udGV4dCwgdG9vbCwgc3RyaW5nUmVzdWx0KTtcbiAgICB9XG4gICAgYXN5bmMgI2hhbmRsZUZ1bmN0aW9uQ2FsbCh0b29sQ2FsbCkge1xuICAgICAgICBjb25zdCBoYW5kb2ZmTWFwID0gbmV3IE1hcCh0aGlzLiNjdXJyZW50QWdlbnQuaGFuZG9mZnNcbiAgICAgICAgICAgIC5tYXAoZ2V0SGFuZG9mZilcbiAgICAgICAgICAgIC5tYXAoKGhhbmRvZmYpID0+IFtoYW5kb2ZmLnRvb2xOYW1lLCBoYW5kb2ZmXSkpO1xuICAgICAgICBjb25zdCBmdW5jdGlvblRvb2xNYXAgPSBuZXcgTWFwKChhd2FpdCB0aGlzLiNjdXJyZW50QWdlbnQuZ2V0QWxsVG9vbHMoKSkubWFwKCh0b29sKSA9PiBbdG9vbC5uYW1lLCB0b29sXSkpO1xuICAgICAgICBjb25zdCBwb3NzaWJsZUhhbmRvZmYgPSBoYW5kb2ZmTWFwLmdldCh0b29sQ2FsbC5uYW1lKTtcbiAgICAgICAgaWYgKHBvc3NpYmxlSGFuZG9mZikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jaGFuZGxlSGFuZG9mZih0b29sQ2FsbCwgcG9zc2libGVIYW5kb2ZmKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZ1bmN0aW9uVG9vbCA9IGZ1bmN0aW9uVG9vbE1hcC5nZXQodG9vbENhbGwubmFtZSk7XG4gICAgICAgICAgICBpZiAoZnVuY3Rpb25Ub29sICYmIGZ1bmN0aW9uVG9vbC50eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jaGFuZGxlRnVuY3Rpb25Ub29sQ2FsbCh0b29sQ2FsbCwgZnVuY3Rpb25Ub29sKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoYFRvb2wgJHt0b29sQ2FsbC5uYW1lfSBub3QgZm91bmRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyAjcnVuT3V0cHV0R3VhcmRyYWlscyhvdXRwdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuI291dHB1dEd1YXJkcmFpbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZ3VhcmRyYWlsQXJncyA9IHtcbiAgICAgICAgICAgIGFnZW50OiB0aGlzLiNjdXJyZW50QWdlbnQsXG4gICAgICAgICAgICBhZ2VudE91dHB1dDogb3V0cHV0LFxuICAgICAgICAgICAgY29udGV4dDogdGhpcy4jY29udGV4dCxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKHRoaXMuI291dHB1dEd1YXJkcmFpbHMubWFwKChndWFyZHJhaWwpID0+IGd1YXJkcmFpbC5ydW4oZ3VhcmRyYWlsQXJncykpKTtcbiAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5vdXRwdXQudHJpcHdpcmVUcmlnZ2VyZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZChgT3V0cHV0IGd1YXJkcmFpbCB0cmlnZ2VyZWQ6ICR7SlNPTi5zdHJpbmdpZnkocmVzdWx0Lm91dHB1dC5vdXRwdXRJbmZvKX1gLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZ3VhcmRyYWlsX3RyaXBwZWQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB0aGlzLmludGVycnVwdCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZlZWRiYWNrVGV4dCA9IGdldFJlYWx0aW1lR3VhcmRyYWlsRmVlZGJhY2tNZXNzYWdlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kTWVzc2FnZShmZWVkYmFja1RleHQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgICNzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCcqJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3RyYW5zcG9ydF9ldmVudCcsIGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignYXVkaW8nLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW8nLCBldmVudCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ3R1cm5fc3RhcnRlZCcsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfc3RhcnQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpO1xuICAgICAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbigndHVybl9kb25lJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gZXZlbnQucmVzcG9uc2Uub3V0cHV0W2V2ZW50LnJlc3BvbnNlLm91dHB1dC5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGNvbnN0IHRleHRPdXRwdXQgPSBnZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UoaXRlbSkgPz8gJyc7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X2VuZCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgdGV4dE91dHB1dCk7XG4gICAgICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfZW5kJywgdGhpcy4jY29udGV4dCwgdGV4dE91dHB1dCk7XG4gICAgICAgICAgICB0aGlzLiNydW5PdXRwdXRHdWFyZHJhaWxzKHRleHRPdXRwdXQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdhdWRpb19kb25lJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdhdWRpb19zdG9wcGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBsYXN0UnVuSW5kZXggPSAwO1xuICAgICAgICBsZXQgbGFzdEl0ZW1JZDtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdhdWRpb190cmFuc2NyaXB0X2RlbHRhJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlbHRhID0gZXZlbnQuZGVsdGE7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbUlkID0gZXZlbnQuaXRlbUlkO1xuICAgICAgICAgICAgICAgIGlmIChsYXN0SXRlbUlkICE9PSBpdGVtSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFzdEl0ZW1JZCA9IGl0ZW1JZDtcbiAgICAgICAgICAgICAgICAgICAgbGFzdFJ1bkluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFRleHQgPSB0aGlzLiN0cmFuc2NyaWJlZFRleHREZWx0YXNbaXRlbUlkXSA/PyAnJztcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdUZXh0ID0gY3VycmVudFRleHQgKyBkZWx0YTtcbiAgICAgICAgICAgICAgICB0aGlzLiN0cmFuc2NyaWJlZFRleHREZWx0YXNbaXRlbUlkXSA9IG5ld1RleHQ7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuI291dHB1dEd1YXJkcmFpbFNldHRpbmdzLmRlYm91bmNlVGV4dExlbmd0aCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBuZXdSdW5JbmRleCA9IE1hdGguZmxvb3IobmV3VGV4dC5sZW5ndGggLyB0aGlzLiNvdXRwdXRHdWFyZHJhaWxTZXR0aW5ncy5kZWJvdW5jZVRleHRMZW5ndGgpO1xuICAgICAgICAgICAgICAgIGlmIChuZXdSdW5JbmRleCA+IGxhc3RSdW5JbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBsYXN0UnVuSW5kZXggPSBuZXdSdW5JbmRleDtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgZG9uJ3QgY2FuY2VsIGV4aXN0aW5nIHJ1bnMgYmVjYXVzZSB3ZSB3YW50IHRoZSBmaXJzdCBvbmUgdG8gZmFpbCB0byBmYWlsXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSB0cmFuc3BvcnQgbGF5ZXIgc2hvdWxkIHVwb24gZmFpbHVyZSBoYW5kbGUgdGhlIGludGVycnVwdGlvbiBhbmQgc3RvcCB0aGUgbW9kZWxcbiAgICAgICAgICAgICAgICAgICAgLy8gZnJvbSBnZW5lcmF0aW5nIGZ1cnRoZXJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jcnVuT3V0cHV0R3VhcmRyYWlscyhuZXdUZXh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignaXRlbV91cGRhdGUnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNOZXcgPSAhdGhpcy4jaGlzdG9yeS5zb21lKChpdGVtKSA9PiBpdGVtLml0ZW1JZCA9PT0gZXZlbnQuaXRlbUlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNoaXN0b3J5ID0gdXBkYXRlUmVhbHRpbWVIaXN0b3J5KHRoaXMuI2hpc3RvcnksIGV2ZW50LCB0aGlzLiNzaG91bGRJbmNsdWRlQXVkaW9EYXRhKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IHRoaXMuI2hpc3Rvcnk7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmV3KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFkZGVkSXRlbSA9IHRoaXMuI2hpc3RvcnkuZmluZCgoaXRlbSkgPT4gaXRlbS5pdGVtSWQgPT09IGV2ZW50Lml0ZW1JZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhZGRlZEl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaGlzdG9yeV9hZGRlZCcsIGFkZGVkSXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdoaXN0b3J5X3VwZGF0ZWQnLCB0aGlzLiNoaXN0b3J5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdpdGVtX2RlbGV0ZWQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jaGlzdG9yeSA9IHRoaXMuI2hpc3RvcnkuZmlsdGVyKChpdGVtKSA9PiBpdGVtLml0ZW1JZCAhPT0gZXZlbnQuaXRlbUlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IHRoaXMuI2hpc3Rvcnk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdoaXN0b3J5X3VwZGF0ZWQnLCB0aGlzLiNoaXN0b3J5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdmdW5jdGlvbl9jYWxsJywgYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZUZ1bmN0aW9uQ2FsbChldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGhhbmRsaW5nIGZ1bmN0aW9uIGNhbGwnLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ3VzYWdlX3VwZGF0ZScsICh1c2FnZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jY29udGV4dC51c2FnZS5hZGQodXNhZ2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdhdWRpb19pbnRlcnJ1cHRlZCcsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW9faW50ZXJydXB0ZWQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdlcnJvcicsIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbm5lY3QgdG8gdGhlIHNlc3Npb24uIFRoaXMgd2lsbCBlc3RhYmxpc2ggdGhlIGNvbm5lY3Rpb24gdG8gdGhlIHVuZGVybHlpbmcgdHJhbnNwb3J0IGxheWVyXG4gICAgICogYW5kIHN0YXJ0IHRoZSBzZXNzaW9uLlxuICAgICAqXG4gICAgICogQWZ0ZXIgY29ubmVjdGluZywgdGhlIHNlc3Npb24gd2lsbCBhbHNvIGVtaXQgYSBgaGlzdG9yeV91cGRhdGVkYCBldmVudCB3aXRoIGFuIGVtcHR5IGhpc3RvcnkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciB0aGUgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBhc3luYyBjb25uZWN0KG9wdGlvbnMpIHtcbiAgICAgICAgLy8gbWFrZXMgc3VyZSB0aGUgY3VycmVudCBhZ2VudCBpcyBjb3JyZWN0bHkgc2V0IGFuZCBsb2FkcyB0aGUgdG9vbHNcbiAgICAgICAgYXdhaXQgdGhpcy4jc2V0Q3VycmVudEFnZW50KHRoaXMuaW5pdGlhbEFnZW50KTtcbiAgICAgICAgdGhpcy4jc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgYXdhaXQgdGhpcy4jdHJhbnNwb3J0LmNvbm5lY3Qoe1xuICAgICAgICAgICAgYXBpS2V5OiBvcHRpb25zLmFwaUtleSA/PyB0aGlzLm9wdGlvbnMuYXBpS2V5LFxuICAgICAgICAgICAgbW9kZWw6IHRoaXMub3B0aW9ucy5tb2RlbCxcbiAgICAgICAgICAgIGluaXRpYWxTZXNzaW9uQ29uZmlnOiBhd2FpdCB0aGlzLiNnZXRTZXNzaW9uQ29uZmlnKHRoaXMub3B0aW9ucy5jb25maWcpLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jaGlzdG9yeSA9IFtdO1xuICAgICAgICB0aGlzLmVtaXQoJ2hpc3RvcnlfdXBkYXRlZCcsIHRoaXMuI2hpc3RvcnkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGhpc3Rvcnkgb2YgdGhlIHNlc3Npb24uXG4gICAgICogQHBhcmFtIG5ld0hpc3RvcnkgLSBUaGUgbmV3IGhpc3RvcnkgdG8gc2V0LlxuICAgICAqL1xuICAgIHVwZGF0ZUhpc3RvcnkobmV3SGlzdG9yeSkge1xuICAgICAgICBsZXQgdXBkYXRlZEhpc3Rvcnk7XG4gICAgICAgIGlmICh0eXBlb2YgbmV3SGlzdG9yeSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdXBkYXRlZEhpc3RvcnkgPSBuZXdIaXN0b3J5KHRoaXMuI2hpc3RvcnkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdXBkYXRlZEhpc3RvcnkgPSBuZXdIaXN0b3J5O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5yZXNldEhpc3RvcnkodGhpcy4jaGlzdG9yeSwgdXBkYXRlZEhpc3RvcnkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEgbWVzc2FnZSB0byB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBtZXNzYWdlIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG90aGVyRXZlbnREYXRhIC0gQWRkaXRpb25hbCBldmVudCBkYXRhIHRvIHNlbmQuXG4gICAgICovXG4gICAgc2VuZE1lc3NhZ2UobWVzc2FnZSwgb3RoZXJFdmVudERhdGEgPSB7fSkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZE1lc3NhZ2UobWVzc2FnZSwgb3RoZXJFdmVudERhdGEpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNdXRlIHRoZSBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSBtdXRlZCAtIFdoZXRoZXIgdG8gbXV0ZSB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBtdXRlKG11dGVkKSB7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5tdXRlKG11dGVkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzY29ubmVjdCBmcm9tIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuY2xvc2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhdWRpbyB0byB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gYXVkaW8gLSBUaGUgYXVkaW8gdG8gc2VuZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFkZGl0aW9uYWwgb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5jb21taXQgLSBXaGV0aGVyIHRvIGZpbmlzaCB0aGUgdHVybiB3aXRoIHRoaXMgYXVkaW8uXG4gICAgICovXG4gICAgc2VuZEF1ZGlvKGF1ZGlvLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRBdWRpbyhhdWRpbywgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVycnVwdCB0aGUgc2Vzc2lvbiBhcnRpZmljaWFsbHkgZm9yIGV4YW1wbGUgaWYgeW91IHdhbnQgdG8gYnVpbGQgYSBcInN0b3AgdGFsa2luZ1wiXG4gICAgICogYnV0dG9uLlxuICAgICAqL1xuICAgIGludGVycnVwdCgpIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LmludGVycnVwdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHByb3ZlIGEgdG9vbCBjYWxsLiBUaGlzIHdpbGwgYWxzbyB0cmlnZ2VyIHRoZSB0b29sIGNhbGwgdG8gdGhlIGFnZW50LlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgYXBwcm92YWwgaXRlbSB0byBhcHByb3ZlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQWRkaXRpb25hbCBvcHRpb25zLlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmFsd2F5c0FwcHJvdmUgLSBXaGV0aGVyIHRvIGFsd2F5cyBhcHByb3ZlIHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgYXN5bmMgYXBwcm92ZShhcHByb3ZhbEl0ZW0sIG9wdGlvbnMgPSB7IGFsd2F5c0FwcHJvdmU6IGZhbHNlIH0pIHtcbiAgICAgICAgdGhpcy4jY29udGV4dC5hcHByb3ZlVG9vbChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMpO1xuICAgICAgICBjb25zdCB0b29sID0gdGhpcy4jY3VycmVudEFnZW50LnRvb2xzLmZpbmQoKHRvb2wpID0+IHRvb2wubmFtZSA9PT0gYXBwcm92YWxJdGVtLnJhd0l0ZW0ubmFtZSk7XG4gICAgICAgIGlmICh0b29sICYmIHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jaGFuZGxlRnVuY3Rpb25Ub29sQ2FsbChhcHByb3ZhbEl0ZW0ucmF3SXRlbSwgdG9vbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKGBUb29sICR7YXBwcm92YWxJdGVtLnJhd0l0ZW0ubmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVqZWN0IGEgdG9vbCBjYWxsLiBUaGlzIHdpbGwgYWxzbyB0cmlnZ2VyIHRoZSB0b29sIGNhbGwgdG8gdGhlIGFnZW50LlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgYXBwcm92YWwgaXRlbSB0byByZWplY3QuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBZGRpdGlvbmFsIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMuYWx3YXlzUmVqZWN0IC0gV2hldGhlciB0byBhbHdheXMgcmVqZWN0IHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgYXN5bmMgcmVqZWN0KGFwcHJvdmFsSXRlbSwgb3B0aW9ucyA9IHsgYWx3YXlzUmVqZWN0OiBmYWxzZSB9KSB7XG4gICAgICAgIHRoaXMuI2NvbnRleHQucmVqZWN0VG9vbChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMpO1xuICAgICAgICAvLyB3ZSBzdGlsbCBuZWVkIHRvIHNpbXVsYXRlIGEgdG9vbCBjYWxsIHRvIHRoZSBhZ2VudCB0byBsZXQgdGhlIGFnZW50IGtub3dcbiAgICAgICAgY29uc3QgdG9vbCA9IHRoaXMuI2N1cnJlbnRBZ2VudC50b29scy5maW5kKCh0b29sKSA9PiB0b29sLm5hbWUgPT09IGFwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWUpO1xuICAgICAgICBpZiAodG9vbCAmJiB0b29sLnR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZUZ1bmN0aW9uVG9vbENhbGwoYXBwcm92YWxJdGVtLnJhd0l0ZW0sIHRvb2wpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcihgVG9vbCAke2FwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVhbHRpbWVTZXNzaW9uLm1qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/realtimeSession.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/shims/shims-node.mjs":
/*!*************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/shims/shims-node.mjs ***!
  \*************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WebSocket: () => (/* reexport safe */ ws__WEBPACK_IMPORTED_MODULE_0__.WebSocket),\n/* harmony export */   isBrowserEnvironment: () => (/* binding */ isBrowserEnvironment)\n/* harmony export */ });\n/* harmony import */ var ws__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ws */ \"(ssr)/./node_modules/.pnpm/ws@8.18.2/node_modules/ws/wrapper.mjs\");\n\nfunction isBrowserEnvironment() {\n    return false;\n}\n//# sourceMappingURL=shims-node.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW5haSthZ2VudHMtcmVhbHRpbWVAMC4wLjJfem9kQDMuMjUuNTEvbm9kZV9tb2R1bGVzL0BvcGVuYWkvYWdlbnRzLXJlYWx0aW1lL2Rpc3Qvc2hpbXMvc2hpbXMtbm9kZS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQStCO0FBQ3hCO0FBQ1A7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3BlbmFpbnl0dy8uL25vZGVfbW9kdWxlcy8ucG5wbS9Ab3BlbmFpK2FnZW50cy1yZWFsdGltZUAwLjAuMl96b2RAMy4yNS41MS9ub2RlX21vZHVsZXMvQG9wZW5haS9hZ2VudHMtcmVhbHRpbWUvZGlzdC9zaGltcy9zaGltcy1ub2RlLm1qcz82ZTMxIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7IFdlYlNvY2tldCB9IGZyb20gJ3dzJztcbmV4cG9ydCBmdW5jdGlvbiBpc0Jyb3dzZXJFbnZpcm9ubWVudCgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaGltcy1ub2RlLm1qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/shims/shims-node.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/utils.mjs":
/*!**************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/utils.mjs ***!
  \**************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HEADERS: () => (/* binding */ HEADERS),\n/* harmony export */   WEBSOCKET_META: () => (/* binding */ WEBSOCKET_META),\n/* harmony export */   arrayBufferToBase64: () => (/* binding */ arrayBufferToBase64),\n/* harmony export */   base64ToArrayBuffer: () => (/* binding */ base64ToArrayBuffer),\n/* harmony export */   diffRealtimeHistory: () => (/* binding */ diffRealtimeHistory),\n/* harmony export */   getLastTextFromAudioOutputMessage: () => (/* binding */ getLastTextFromAudioOutputMessage),\n/* harmony export */   hasWebRTCSupport: () => (/* binding */ hasWebRTCSupport),\n/* harmony export */   removeAudioFromContent: () => (/* binding */ removeAudioFromContent),\n/* harmony export */   updateRealtimeHistory: () => (/* binding */ updateRealtimeHistory)\n/* harmony export */ });\n/* harmony import */ var _metadata_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./metadata.mjs */ \"(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/metadata.mjs\");\n\n/**\n * Converts a base64 string to an ArrayBuffer\n * @param {string} base64\n * @returns {ArrayBuffer}\n */\nfunction base64ToArrayBuffer(base64) {\n    const binaryString = atob(base64);\n    const len = binaryString.length;\n    const bytes = new Uint8Array(len);\n    for (let i = 0; i < len; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    return bytes.buffer;\n}\n/**\n * Converts an ArrayBuffer to a base64 string\n * @param {ArrayBuffer} arrayBuffer\n * @returns {string}\n */\nfunction arrayBufferToBase64(arrayBuffer) {\n    const binaryString = String.fromCharCode(...new Uint8Array(arrayBuffer));\n    return btoa(binaryString);\n}\n/**\n * Get the last text from an audio output message\n * @param item\n * @returns\n */\nfunction getLastTextFromAudioOutputMessage(item) {\n    if (typeof item === 'undefined' ||\n        item === null ||\n        typeof item !== 'object' ||\n        !('type' in item) ||\n        typeof item.type !== 'string' ||\n        !item.type) {\n        return undefined;\n    }\n    if (item.type !== 'message') {\n        return undefined;\n    }\n    if (!('content' in item) ||\n        !Array.isArray(item.content) ||\n        item.content.length < 1) {\n        return undefined;\n    }\n    const lastContentItem = item.content[item.content.length - 1];\n    if (!('type' in lastContentItem) ||\n        typeof lastContentItem.type !== 'string') {\n        return undefined;\n    }\n    if (lastContentItem.type === 'text') {\n        return typeof lastContentItem.text === 'string'\n            ? lastContentItem.text\n            : undefined;\n    }\n    if (lastContentItem.type === 'audio') {\n        return typeof lastContentItem.transcript === 'string'\n            ? lastContentItem.transcript\n            : undefined;\n    }\n    return undefined;\n}\n/**\n * Compare two conversation histories to determine the removals, additions, and updates.\n * @param oldHistory - The old history.\n * @param newHistory - The new history.\n * @returns A diff of the two histories.\n */\nfunction diffRealtimeHistory(oldHistory, newHistory) {\n    const removals = oldHistory.filter((item) => !newHistory.some((newItem) => newItem.itemId === item.itemId));\n    const additions = newHistory.filter((item) => !oldHistory.some((oldItem) => oldItem.itemId === item.itemId));\n    const updates = newHistory.filter((item) => oldHistory.some((oldItem) => oldItem.itemId === item.itemId &&\n        JSON.stringify(oldItem) !== JSON.stringify(item)));\n    return {\n        removals,\n        additions,\n        updates,\n    };\n}\n/**\n * Check if the browser supports WebRTC.\n * @returns True if WebRTC is supported, false otherwise.\n */\nfunction hasWebRTCSupport() {\n    if (typeof window === 'undefined') {\n        return false;\n    }\n    return typeof window['RTCPeerConnection'] !== 'undefined';\n}\n/**\n * Removes the audio data from all content in a message by setting it to null.\n * @param item\n * @returns\n */\nfunction removeAudioFromContent(item) {\n    if (item.role === 'system') {\n        return item;\n    }\n    if (item.role === 'assistant') {\n        return {\n            ...item,\n            content: item.content.map((entry) => {\n                if (entry.type === 'audio') {\n                    return {\n                        ...entry,\n                        audio: null,\n                    };\n                }\n                return entry;\n            }),\n        };\n    }\n    if (item.role === 'user') {\n        return {\n            ...item,\n            content: item.content.map((entry) => {\n                if (entry.type === 'input_audio') {\n                    return {\n                        ...entry,\n                        audio: null,\n                    };\n                }\n                return entry;\n            }),\n        };\n    }\n    return item;\n}\n/**\n * Updates the realtime history array based on the incoming event and options.\n * @param history - The current history array.\n * @param event - The event to process (RealtimeItem).\n * @param shouldIncludeAudioData - Whether to include audio data in message items.\n * @returns The updated history array.\n */\nfunction updateRealtimeHistory(history, event, shouldIncludeAudioData) {\n    const newEvent = !shouldIncludeAudioData && event.type === 'message'\n        ? removeAudioFromContent(event)\n        : event;\n    const existingIndex = history.findIndex((item) => item.itemId === event.itemId);\n    if (existingIndex !== -1) {\n        // Update existing item\n        return history.map((item, idx) => {\n            if (idx === existingIndex) {\n                return newEvent;\n            }\n            if (!shouldIncludeAudioData && item.type === 'message') {\n                return removeAudioFromContent(item);\n            }\n            return item;\n        });\n    }\n    else if (event.previousItemId) {\n        // Insert after previousItemId if found, else at end\n        const prevIndex = history.findIndex((item) => item.itemId === event.previousItemId);\n        if (prevIndex !== -1) {\n            return [\n                ...history.slice(0, prevIndex + 1),\n                newEvent,\n                ...history.slice(prevIndex + 1),\n            ];\n        }\n        else {\n            return [...history, newEvent];\n        }\n    }\n    else {\n        return [...history, newEvent];\n    }\n}\n/**\n * The headers to use for the Realtime API.\n */\nconst HEADERS = {\n    'User-Agent': `Agents/JavaScript ${_metadata_mjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].version}`,\n    'X-OpenAI-Agents-SDK': `openai-agents-sdk.${_metadata_mjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].version}`,\n};\n/**\n * Browser websocket header\n */\nconst WEBSOCKET_META = `openai-agents-sdk.${_metadata_mjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].version}`;\n//# sourceMappingURL=utils.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW5haSthZ2VudHMtcmVhbHRpbWVAMC4wLjJfem9kQDMuMjUuNTEvbm9kZV9tb2R1bGVzL0BvcGVuYWkvYWdlbnRzLXJlYWx0aW1lL2Rpc3QvdXRpbHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBc0M7QUFDdEM7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixhQUFhO0FBQ2I7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixTQUFTO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsYUFBYTtBQUN4QixhQUFhO0FBQ2I7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsdUNBQXVDLHFEQUFRLFNBQVM7QUFDeEQsZ0RBQWdELHFEQUFRLFNBQVM7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDTyw0Q0FBNEMscURBQVEsU0FBUztBQUNwRSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW5haW55dHcvLi9ub2RlX21vZHVsZXMvLnBucG0vQG9wZW5haSthZ2VudHMtcmVhbHRpbWVAMC4wLjJfem9kQDMuMjUuNTEvbm9kZV9tb2R1bGVzL0BvcGVuYWkvYWdlbnRzLXJlYWx0aW1lL2Rpc3QvdXRpbHMubWpzPzc3MDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE1FVEFEQVRBIGZyb20gXCIuL21ldGFkYXRhLm1qc1wiO1xuLyoqXG4gKiBDb252ZXJ0cyBhIGJhc2U2NCBzdHJpbmcgdG8gYW4gQXJyYXlCdWZmZXJcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlNjRcbiAqIEByZXR1cm5zIHtBcnJheUJ1ZmZlcn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJhc2U2NFRvQXJyYXlCdWZmZXIoYmFzZTY0KSB7XG4gICAgY29uc3QgYmluYXJ5U3RyaW5nID0gYXRvYihiYXNlNjQpO1xuICAgIGNvbnN0IGxlbiA9IGJpbmFyeVN0cmluZy5sZW5ndGg7XG4gICAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShsZW4pO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgYnl0ZXNbaV0gPSBiaW5hcnlTdHJpbmcuY2hhckNvZGVBdChpKTtcbiAgICB9XG4gICAgcmV0dXJuIGJ5dGVzLmJ1ZmZlcjtcbn1cbi8qKlxuICogQ29udmVydHMgYW4gQXJyYXlCdWZmZXIgdG8gYSBiYXNlNjQgc3RyaW5nXG4gKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBhcnJheUJ1ZmZlclxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFycmF5QnVmZmVyVG9CYXNlNjQoYXJyYXlCdWZmZXIpIHtcbiAgICBjb25zdCBiaW5hcnlTdHJpbmcgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLm5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyKSk7XG4gICAgcmV0dXJuIGJ0b2EoYmluYXJ5U3RyaW5nKTtcbn1cbi8qKlxuICogR2V0IHRoZSBsYXN0IHRleHQgZnJvbSBhbiBhdWRpbyBvdXRwdXQgbWVzc2FnZVxuICogQHBhcmFtIGl0ZW1cbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UoaXRlbSkge1xuICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgaXRlbSA9PT0gbnVsbCB8fFxuICAgICAgICB0eXBlb2YgaXRlbSAhPT0gJ29iamVjdCcgfHxcbiAgICAgICAgISgndHlwZScgaW4gaXRlbSkgfHxcbiAgICAgICAgdHlwZW9mIGl0ZW0udHlwZSAhPT0gJ3N0cmluZycgfHxcbiAgICAgICAgIWl0ZW0udHlwZSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoaXRlbS50eXBlICE9PSAnbWVzc2FnZScpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKCEoJ2NvbnRlbnQnIGluIGl0ZW0pIHx8XG4gICAgICAgICFBcnJheS5pc0FycmF5KGl0ZW0uY29udGVudCkgfHxcbiAgICAgICAgaXRlbS5jb250ZW50Lmxlbmd0aCA8IDEpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgbGFzdENvbnRlbnRJdGVtID0gaXRlbS5jb250ZW50W2l0ZW0uY29udGVudC5sZW5ndGggLSAxXTtcbiAgICBpZiAoISgndHlwZScgaW4gbGFzdENvbnRlbnRJdGVtKSB8fFxuICAgICAgICB0eXBlb2YgbGFzdENvbnRlbnRJdGVtLnR5cGUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChsYXN0Q29udGVudEl0ZW0udHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgbGFzdENvbnRlbnRJdGVtLnRleHQgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICA/IGxhc3RDb250ZW50SXRlbS50ZXh0XG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKGxhc3RDb250ZW50SXRlbS50eXBlID09PSAnYXVkaW8nKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgbGFzdENvbnRlbnRJdGVtLnRyYW5zY3JpcHQgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICA/IGxhc3RDb250ZW50SXRlbS50cmFuc2NyaXB0XG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbi8qKlxuICogQ29tcGFyZSB0d28gY29udmVyc2F0aW9uIGhpc3RvcmllcyB0byBkZXRlcm1pbmUgdGhlIHJlbW92YWxzLCBhZGRpdGlvbnMsIGFuZCB1cGRhdGVzLlxuICogQHBhcmFtIG9sZEhpc3RvcnkgLSBUaGUgb2xkIGhpc3RvcnkuXG4gKiBAcGFyYW0gbmV3SGlzdG9yeSAtIFRoZSBuZXcgaGlzdG9yeS5cbiAqIEByZXR1cm5zIEEgZGlmZiBvZiB0aGUgdHdvIGhpc3Rvcmllcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpZmZSZWFsdGltZUhpc3Rvcnkob2xkSGlzdG9yeSwgbmV3SGlzdG9yeSkge1xuICAgIGNvbnN0IHJlbW92YWxzID0gb2xkSGlzdG9yeS5maWx0ZXIoKGl0ZW0pID0+ICFuZXdIaXN0b3J5LnNvbWUoKG5ld0l0ZW0pID0+IG5ld0l0ZW0uaXRlbUlkID09PSBpdGVtLml0ZW1JZCkpO1xuICAgIGNvbnN0IGFkZGl0aW9ucyA9IG5ld0hpc3RvcnkuZmlsdGVyKChpdGVtKSA9PiAhb2xkSGlzdG9yeS5zb21lKChvbGRJdGVtKSA9PiBvbGRJdGVtLml0ZW1JZCA9PT0gaXRlbS5pdGVtSWQpKTtcbiAgICBjb25zdCB1cGRhdGVzID0gbmV3SGlzdG9yeS5maWx0ZXIoKGl0ZW0pID0+IG9sZEhpc3Rvcnkuc29tZSgob2xkSXRlbSkgPT4gb2xkSXRlbS5pdGVtSWQgPT09IGl0ZW0uaXRlbUlkICYmXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KG9sZEl0ZW0pICE9PSBKU09OLnN0cmluZ2lmeShpdGVtKSkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlbW92YWxzLFxuICAgICAgICBhZGRpdGlvbnMsXG4gICAgICAgIHVwZGF0ZXMsXG4gICAgfTtcbn1cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgV2ViUlRDLlxuICogQHJldHVybnMgVHJ1ZSBpZiBXZWJSVEMgaXMgc3VwcG9ydGVkLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNXZWJSVENTdXBwb3J0KCkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0eXBlb2Ygd2luZG93WydSVENQZWVyQ29ubmVjdGlvbiddICE9PSAndW5kZWZpbmVkJztcbn1cbi8qKlxuICogUmVtb3ZlcyB0aGUgYXVkaW8gZGF0YSBmcm9tIGFsbCBjb250ZW50IGluIGEgbWVzc2FnZSBieSBzZXR0aW5nIGl0IHRvIG51bGwuXG4gKiBAcGFyYW0gaXRlbVxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUF1ZGlvRnJvbUNvbnRlbnQoaXRlbSkge1xuICAgIGlmIChpdGVtLnJvbGUgPT09ICdzeXN0ZW0nKSB7XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgIH1cbiAgICBpZiAoaXRlbS5yb2xlID09PSAnYXNzaXN0YW50Jykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGl0ZW0uY29udGVudC5tYXAoKGVudHJ5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5LnR5cGUgPT09ICdhdWRpbycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmVudHJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW86IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXRlbS5yb2xlID09PSAndXNlcicpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICBjb250ZW50OiBpdGVtLmNvbnRlbnQubWFwKChlbnRyeSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlbnRyeS50eXBlID09PSAnaW5wdXRfYXVkaW8nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5lbnRyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZW50cnk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGl0ZW07XG59XG4vKipcbiAqIFVwZGF0ZXMgdGhlIHJlYWx0aW1lIGhpc3RvcnkgYXJyYXkgYmFzZWQgb24gdGhlIGluY29taW5nIGV2ZW50IGFuZCBvcHRpb25zLlxuICogQHBhcmFtIGhpc3RvcnkgLSBUaGUgY3VycmVudCBoaXN0b3J5IGFycmF5LlxuICogQHBhcmFtIGV2ZW50IC0gVGhlIGV2ZW50IHRvIHByb2Nlc3MgKFJlYWx0aW1lSXRlbSkuXG4gKiBAcGFyYW0gc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSAtIFdoZXRoZXIgdG8gaW5jbHVkZSBhdWRpbyBkYXRhIGluIG1lc3NhZ2UgaXRlbXMuXG4gKiBAcmV0dXJucyBUaGUgdXBkYXRlZCBoaXN0b3J5IGFycmF5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUmVhbHRpbWVIaXN0b3J5KGhpc3RvcnksIGV2ZW50LCBzaG91bGRJbmNsdWRlQXVkaW9EYXRhKSB7XG4gICAgY29uc3QgbmV3RXZlbnQgPSAhc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSAmJiBldmVudC50eXBlID09PSAnbWVzc2FnZSdcbiAgICAgICAgPyByZW1vdmVBdWRpb0Zyb21Db250ZW50KGV2ZW50KVxuICAgICAgICA6IGV2ZW50O1xuICAgIGNvbnN0IGV4aXN0aW5nSW5kZXggPSBoaXN0b3J5LmZpbmRJbmRleCgoaXRlbSkgPT4gaXRlbS5pdGVtSWQgPT09IGV2ZW50Lml0ZW1JZCk7XG4gICAgaWYgKGV4aXN0aW5nSW5kZXggIT09IC0xKSB7XG4gICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBpdGVtXG4gICAgICAgIHJldHVybiBoaXN0b3J5Lm1hcCgoaXRlbSwgaWR4KSA9PiB7XG4gICAgICAgICAgICBpZiAoaWR4ID09PSBleGlzdGluZ0luZGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld0V2ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFzaG91bGRJbmNsdWRlQXVkaW9EYXRhICYmIGl0ZW0udHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlbW92ZUF1ZGlvRnJvbUNvbnRlbnQoaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGV2ZW50LnByZXZpb3VzSXRlbUlkKSB7XG4gICAgICAgIC8vIEluc2VydCBhZnRlciBwcmV2aW91c0l0ZW1JZCBpZiBmb3VuZCwgZWxzZSBhdCBlbmRcbiAgICAgICAgY29uc3QgcHJldkluZGV4ID0gaGlzdG9yeS5maW5kSW5kZXgoKGl0ZW0pID0+IGl0ZW0uaXRlbUlkID09PSBldmVudC5wcmV2aW91c0l0ZW1JZCk7XG4gICAgICAgIGlmIChwcmV2SW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIC4uLmhpc3Rvcnkuc2xpY2UoMCwgcHJldkluZGV4ICsgMSksXG4gICAgICAgICAgICAgICAgbmV3RXZlbnQsXG4gICAgICAgICAgICAgICAgLi4uaGlzdG9yeS5zbGljZShwcmV2SW5kZXggKyAxKSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gWy4uLmhpc3RvcnksIG5ld0V2ZW50XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFsuLi5oaXN0b3J5LCBuZXdFdmVudF07XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgaGVhZGVycyB0byB1c2UgZm9yIHRoZSBSZWFsdGltZSBBUEkuXG4gKi9cbmV4cG9ydCBjb25zdCBIRUFERVJTID0ge1xuICAgICdVc2VyLUFnZW50JzogYEFnZW50cy9KYXZhU2NyaXB0ICR7TUVUQURBVEEudmVyc2lvbn1gLFxuICAgICdYLU9wZW5BSS1BZ2VudHMtU0RLJzogYG9wZW5haS1hZ2VudHMtc2RrLiR7TUVUQURBVEEudmVyc2lvbn1gLFxufTtcbi8qKlxuICogQnJvd3NlciB3ZWJzb2NrZXQgaGVhZGVyXG4gKi9cbmV4cG9ydCBjb25zdCBXRUJTT0NLRVRfTUVUQSA9IGBvcGVuYWktYWdlbnRzLXNkay4ke01FVEFEQVRBLnZlcnNpb259YDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWxzLm1qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@openai+agents-realtime@0.0.2_zod@3.25.51/node_modules/@openai/agents-realtime/dist/utils.mjs\n");

/***/ })

};
;